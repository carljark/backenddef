(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{93:function(t,e,i){"use strict";i.r(e);var s=i(87),r=i(88),n=i(89),a=i(0),o=i(54),h=i(21),c=i(91),l=i(1),u=i(38),d=i(39),p=i(16);function m(t,e,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),"function"==typeof e?function(s){return s.pipe(m(function(i,s){return Object(o.a)(t(i,s)).pipe(Object(h.a)(function(t,r){return e(i,t,s,r)}))},i))}:("number"==typeof e&&(i=e),function(e){return e.lift(new f(t,i))})}var f=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new v(t,this.project,this.concurrent))},t}(),v=function(t){function e(e,i,s){void 0===s&&(s=Number.POSITIVE_INFINITY);var r=t.call(this,e)||this;return r.project=i,r.concurrent=s,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return l.a(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,i)},e.prototype._innerSub=function(t,e,i){var s=new p.a(this,void 0,void 0);this.destination.add(s),Object(u.a)(this,t,e,i,s)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,i,s,r){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(d.a),y=i(90),x=function(t){function e(e,i){var s=t.call(this,e,i)||this;return s.scheduler=e,s.work=i,s.pending=!1,s}return l.a(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(s,this.id,e),this},e.prototype.requestAsyncId=function(t,e,i){return void 0===i&&(i=0),setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,e,i){if(void 0===i&&(i=0),null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var i=!1,s=void 0;try{this.work(t)}catch(t){i=!0,s=!!t&&t||new Error(t)}if(i)return this.unsubscribe(),s},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,i=e.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==s&&i.splice(s,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,i){return t.call(this)||this}return l.a(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(i(3).a)),g=function(){function t(e,i){void 0===i&&(i=t.now),this.SchedulerAction=e,this.now=i}return t.prototype.schedule=function(t,e,i){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(i,e)},t.now=function(){return Date.now()},t}(),w=new(function(t){function e(i,s){void 0===s&&(s=g.now);var r=t.call(this,i,function(){return e.delegate&&e.delegate!==r?e.delegate.now():s()})||this;return r.actions=[],r.active=!1,r.scheduled=void 0,r}return l.a(e,t),e.prototype.schedule=function(i,s,r){return void 0===s&&(s=0),e.delegate&&e.delegate!==this?e.delegate.schedule(i,s,r):t.prototype.schedule.call(this,i,s,r)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}},e}(g))(x);var b,S=i(2),T=i(40);function A(t){var e=t.error;t.subscriber.error(e)}b||(b={});var P=function(){function t(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,i){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}},t.prototype.accept=function(t,e,i){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,i)},t.prototype.toObservable=function(){var t,e;switch(this.kind){case"N":return Object(n.a)(this.value);case"E":return t=this.error,e?new a.a(function(i){return e.schedule(A,0,{error:t,subscriber:i})}):new a.a(function(e){return e.error(t)});case"C":return Object(T.a)()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();function D(t,e){void 0===e&&(e=w);var i,s=(i=t)instanceof Date&&!isNaN(+i)?+t-e.now():Math.abs(t);return function(t){return t.lift(new N(s,e))}}var N=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new I(t,this.delay,this.scheduler))},t}(),I=function(t){function e(e,i,s){var r=t.call(this,e)||this;return r.delay=i,r.scheduler=s,r.queue=[],r.active=!1,r.errored=!1,r}return l.a(e,t),e.dispatch=function(t){for(var e=t.source,i=e.queue,s=t.scheduler,r=t.destination;i.length>0&&i[0].time-s.now()<=0;)i.shift().notification.observe(r);if(i.length>0){var n=Math.max(0,i[0].time-s.now());this.schedule(t,n)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,i=new k(e.now()+this.delay,t);this.queue.push(i),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(P.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(P.createComplete()),this.unsubscribe()},e}(S.a),k=function(){return function(t,e){this.time=t,this.notification=e}}();function E(t,e){return m(t,e,1)}var L=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new M(t,this.selector,this.caught))},t}(),M=function(t){function e(e,i,s){var r=t.call(this,e)||this;return r.selector=i,r.caught=s,r}return l.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var i=void 0;try{i=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var s=new p.a(this,void 0,void 0);this.add(s),Object(u.a)(this,i,void 0,void 0,s)}},e}(d.a);var O={date:"%d.%m.%Y",dateTime:"%a %b %e %X %Y",days:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],periods:["AM","PM"],shortDays:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],shortMonths:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],time:"%H:%M:%S"},_=i(13);const H=new(i(92).a),$=t=>{t.matches&&(console.log(t),H.next(t.media))},j=window.matchMedia("(max-width: 1024px)"),C=window.matchMedia("(max-width: 568px)"),V=window.matchMedia("(max-width: 320px)"),G=window.matchMedia("(min-width: 321px)");j.addListener($),C.addListener($),V.addListener($),G.addListener($);var z=H;i.d(e,"GraphLineComponent",function(){return F}),s.timeFormatDefaultLocale(O);class F{constructor(t,e){this.lineas=t,this.socketioServ=e,this.formatEverd=s.timeFormat("%d/%m %H:%M"),this.d={price:0,timestamp:new Date},this.bisectDate=s.bisector(t=>t.timestamp).right,this.bisectValue=s.bisector(t=>t.price).right,this.svgWidth=800,this.svgHeight=300,this.margin={top:30,right:40,bottom:70,left:100},this.width=this.svgWidth-this.margin.left-this.margin.right,this.height=this.svgHeight-this.margin.top-this.margin.bottom,this.originalCircle={cx:-150,cy:-15,r:20},this.chartProps={},this.titleGraph="",this.mediaString="(min-width: 321px)",this.ngOnInit(),z.subscribe(t=>{this.mediaString=t,console.log("detectado cambio de ancho",t),this.recalculateWidths(t)}),this.linesDataUpdated$=this.socketioServ.getUpdatedCurrencies$(),this.linesDataUpdated$.pipe(Object(h.a)(t=>{const e=t.findIndex(t=>t.name===this.titleGraph);return t[e]})).subscribe(t=>{console.log("currData updated: ",t),this.line1DataHistory.timePriceArray.shift(),this.lineas[0]=this.line1DataHistory,this.line1DataHistory.timePriceArray.push({price:t.price,timestamp:new Date}),this.updateAxis(),this.recalculateWidths(this.mediaString)})}static removeSvg$(t){return Object(n.a)(s.select(`#${t}`).remove()).pipe(Object(c.a)(!0))}updateAxis(){this.chartProps.xScale.domain(s.extent(this.line1DataHistory.timePriceArray,t=>new Date(t.timestamp).getTime())),this.chartProps.yScale.domain([0,s.max(this.lineas,t=>1.1*Math.max(...t.timePriceArray.map(t=>t.price)))]),this.lineSvg.attr("d",this.originalLine.bind(this)(this.line1DataHistory.timePriceArray)),this.d3eventtransform&&1!==this.d3eventtransform.k?(console.log("d3eventTransform: ",this.d3eventtransform),this.lineSvg.attr("d",this.scaledLine.bind(this)(this.line1DataHistory.timePriceArray)),this.svgViewport.call(this.zoom.bind(this))):this.d3eventtransform&&1===this.d3eventtransform.k&&(this.lineSvg.attr("d",this.originalLine.bind(this)(this.line1DataHistory.timePriceArray)),this.d3eventtransform=void 0,this.newxScale=void 0)}onclickremove(){document.getElementById(`${this.titleGraph}data`).className="fila",F.removeSvg$(this.titleGraph)}getLine1(){return new a.a(t=>{this.line1DataHistory=this.lineas[0],t.next(this.lineas[0])})}getTitles(){return new a.a(t=>{let e="";this.lineas.forEach(t=>{t.name&&(e=""===e?t.name:e+" / "+t.name)}),this.titleGraph=e,t.next(e)})}putToolTipInLastPoint(){return new a.a(t=>{const e=this.line1DataHistory.timePriceArray.length-1;this.d=this.line1DataHistory.timePriceArray[e],this.moveToolTip(),t.next(!0)})}ngOnInit(){var t;this.getTitles().pipe(m(()=>this.getLine1()),Object(y.a)(()=>this.defineChart$()),Object(y.a)(()=>Object(o.a)(this.lineas)),m(t=>this.drawLine$(t)),D(1e3),E(()=>this.addToolTips$()),E(()=>this.addEventsArea()),Object(y.a)(()=>this.putToolTipInLastPoint()),(t=(()=>Object(n.a)("error")),function(e){var i=new L(t),s=e.lift(i);return i.caught=s})).subscribe(()=>{this.addTitleGraph()})}defineChart$(){return new a.a(t=>{this.defineChart(),t.next(!0)})}defineChart(){this.lineGraphElement=document.getElementById("linechart"),this.svgViewport=s.select(this.lineGraphElement).append("svg").attr("id",this.titleGraph).style("background","white").attr("viewBox",`0 0 ${this.svgWidth} ${this.svgHeight}`),this.chartProps.xScale=s.scaleTime().domain(s.extent(this.line1DataHistory.timePriceArray,t=>new Date(t.timestamp).getTime())).range([0,this.width]).clamp(!0),this.svgViewport.on("mousedown.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null),this.chartProps.yScale=s.scaleLinear().domain([0,s.max(this.lineas,t=>1.1*Math.max(...t.timePriceArray.map(t=>t.price)))]).range([this.height,0]).clamp(!0),this.xAxis=s.axisBottom(this.chartProps.xScale),this.yAxis=s.axisLeft(this.chartProps.yScale),this.zoom=s.zoom().scaleExtent([1,1/0]).translateExtent([[0,0],[this.width,this.height]]).extent([[0,0],[this.width,this.height]]).on("zoom",this.zoomFunction.bind(this)),this.innerSpace=this.svgViewport.append("g").attr("class","inner_space").attr("transform","translate("+this.margin.left+","+this.margin.top+")").call(this.zoom.bind(this));const t=window.innerWidth/200;console.log("numberOfTics",t),this.gX=this.innerSpace.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+this.height+")").call(this.xAxis.ticks(Math.max(t,2)).tickFormat(this.formatEverd)),this.gY=this.innerSpace.append("g").attr("class","axis axis--y").call(this.yAxis.ticks(Math.max(t,4))),this.originalLine=s.line().x(t=>{if(t.timestamp instanceof Date)return this.chartProps.xScale(t.timestamp.getTime())}).y(t=>this.chartProps.yScale(t.price)),this.scaledLine=s.line().x(t=>{if(t.timestamp instanceof Date)return this.newxScale(t.timestamp.getTime())}).y(t=>this.newyScale(t.price));this.svgViewport.append("rect").attr("x",5).attr("y",5).attr("width",30).attr("height",30).attr("fill","red").on("click",this.onclickremove.bind(this)),this.svgViewport.append("line").attr("class","aspas").attr("x1",35).attr("x2",5).attr("y1",5).attr("y2",35).attr("pointer-events","none"),this.svgViewport.append("line").attr("class","aspas").attr("x1",5).attr("x2",35).attr("y1",5).attr("y2",35).attr("pointer-events","none")}addEventsArea(){return new a.a(t=>{this.view=this.innerSpace.append("rect").attr("class","zoom").attr("width",this.width).attr("height",this.height).on("mouseover",this.mouseover.bind(this)).on("mousemove",this.mousemove.bind(this)).on("touchstart",this.touchStart.bind(this)).on("touchmove",this.touchMove.bind(this)).on("touchend",()=>{this.focus.style("display",null)}),t.next(!0)})}drawLine$(t){return new a.a(e=>{this.drawLine(t),e.next(t)})}drawLine(t){t.timePriceArray.forEach(t=>{t.timestamp=r(t.timestamp).toDate()}),this.lineSvg=this.innerSpace.append("path").datum(t.timePriceArray).attr("class","linegraph").style("stroke","black").attr("d",this.originalLine.bind(this)(t.timePriceArray))}reescaleGraphic(){this.newxScale=this.d3eventtransform.rescaleX(this.chartProps.xScale),this.newyScale=this.d3eventtransform.rescaleY(this.chartProps.yScale),this.gX.call(this.xAxis.scale(this.newxScale)),this.gY.call(this.yAxis.scale(this.newyScale)),this.lineSvg.call(this.xAxis.scale(this.newxScale)),this.lineSvg.call(this.yAxis.scale(this.newyScale)),this.changeLine(),this.moveToolTip()}zoomFunction(){this.d3eventtransform=s.event.transform,this.reescaleGraphic()}changeLine(){this.lineSvg.attr("d",this.scaledLine.bind(this))}addTitleGraph(){this.titleSvg=this.innerSpace.append("text").attr("x",this.margin.left).attr("y",260).attr("class","graphic_title_text").attr("text-anchor","start").text(this.titleGraph)}addToolTips$(){return new a.a(t=>{this.addToolTips(),t.next(!0)})}addToolTips(){this.focus=this.innerSpace.append("g").attr("class","this.focus").style("display","null"),this.focus.append("line").attr("class","x-hover-line hover-line").attr("y1",0).attr("y2",this.height).attr("pointer-events","none"),this.focus.append("line").attr("class","y-hover-line hover-line").attr("x1",0).attr("x2",this.width).attr("pointer-events","none"),this.focus.append("circle").attr("r",2).attr("pointer-events","none"),this.textToolTip=this.focus.append("text").attr("id","textToolTip").attr("class","text_tooltip").attr("text-anchor","end").attr("y",-20).attr("dy",".31em")}getDataPoint(){if(this.d){return`${r(this.d.timestamp).format(_.a.tooltipTimeFormat)}: ${(Math.round(100*this.d.price)/100).toLocaleString("es-ES",{currency:"EUR",style:"currency"})}`}return"no data"}touchMove(t,e,i){s.event.preventDefault(),s.event.stopPropagation();s.touches(i[e]);this.focus.style("display",null),this.mousemove(t,e,i)}touchStart(t,e,i){s.event.preventDefault(),s.event.stopPropagation();s.touches(i[e]);this.focus.style("display",null),this.mousemove(t,e,i)}mouseover(t,e,i){s.event.preventDefault(),s.event.stopPropagation(),this.focus.style("display",null),this.mousemove(t,e,i)}mousemove(t,e,i){let r;s.event.preventDefault(),s.event.stopPropagation(),r=this.newxScale?this.newxScale.invert(s.mouse(i[e])[0]):this.chartProps.xScale.invert(s.mouse(i[e])[0]);const n=this.bisectDate(this.line1DataHistory.timePriceArray,r,1),a=this.line1DataHistory.timePriceArray[n-1],o=this.line1DataHistory.timePriceArray.length;let h;h=n>=this.line1DataHistory.timePriceArray.length?this.line1DataHistory.timePriceArray[o-1]:this.line1DataHistory.timePriceArray[n],this.d=r.getTime()-a.timestamp.getTime()>h.timestamp.getTime()-r.getTime()?h:a,this.moveToolTip()}moveToolTip(){this.newxScale?(this.focus.attr("transform",`translate(${this.newxScale(new Date(this.d.timestamp))},${this.newyScale(this.d.price)})`),this.distanciax=this.newxScale(new Date(this.d.timestamp))):(this.focus.attr("transform",`translate(${this.chartProps.xScale(new Date(this.d.timestamp))},${this.chartProps.yScale(this.d.price)})`),this.distanciax=this.chartProps.xScale(new Date(this.d.timestamp))),this.textToolTip.text(this.getDataPoint.bind(this)),this.focus.selectAll("rect").remove(),this.calculateBbox();this.focus.append("rect").attr("x",this.bbox.x).attr("y",this.bbox.y).attr("width",this.bbox.width).attr("height",this.bbox.height).style("fill","white").style("fill-opacity",".9").style("stroke","#666").style("stroke-width","0.5px");this.txtNode=this.textToolTip.node(),this.focus.node().insertBefore(this.txtNode,null);let t=0;t=this.newyScale?this.newyScale(this.d.price):this.chartProps.yScale(this.d.price),this.focus.select(".x-hover-line").attr("y2",this.height-t),this.focus.select(".y-hover-line").attr("x2",-this.distanciax)}recalculateWidths(t){const e=parseInt(t.slice(12,16),10);console.log("widthToNumber: ",e);const i=e/100;console.log("numberOfTics: ",i),this.gX.call(this.xAxis.ticks(Math.max(i,2)).tickFormat(this.formatEverd)),this.gY.call(this.yAxis.ticks(4)),this.moveToolTip()}calculateBbox(){return this.txtNode=this.textToolTip.node(),this.bbox=this.txtNode.getBBox(),this.bbox.width+10>this.distanciax?(this.textToolTip.attr("text-anchor","start"),this.bbox=this.txtNode.getBBox()):this.textToolTip.attr("text-anchor","end"),this.bbox}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvbWVyZ2VNYXAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc2NoZWR1bGVyL0FzeW5jQWN0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3NjaGVkdWxlci9BY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvU2NoZWR1bGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3NjaGVkdWxlci9hc3luYy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9zY2hlZHVsZXIvQXN5bmNTY2hlZHVsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvTm90aWZpY2F0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL29ic2VydmFibGUvdGhyb3dFcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvZGVsYXkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9pc0RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvb3BlcmF0b3JzL2NvbmNhdE1hcC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvY2F0Y2hFcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZDMtdGltZWZvcm1hdGRlZmF1bHRsb2NhbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Jlc3BvbnNpdmUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2QzaGlzdG9yeWdyYXBoLnRzIl0sIm5hbWVzIjpbIm1lcmdlTWFwIiwicHJvamVjdCIsInJlc3VsdFNlbGVjdG9yIiwiY29uY3VycmVudCIsIk51bWJlciIsIlBPU0lUSVZFX0lORklOSVRZIiwic291cmNlIiwicGlwZSIsImEiLCJpIiwiT2JqZWN0IiwiZnJvbSIsIm1hcCIsImIiLCJpaSIsImxpZnQiLCJNZXJnZU1hcE9wZXJhdG9yIiwidGhpcyIsInByb3RvdHlwZSIsImNhbGwiLCJvYnNlcnZlciIsInN1YnNjcmliZSIsIm1lcmdlTWFwX01lcmdlTWFwU3Vic2NyaWJlciIsIl9zdXBlciIsIk1lcmdlTWFwU3Vic2NyaWJlciIsImRlc3RpbmF0aW9uIiwiX3RoaXMiLCJoYXNDb21wbGV0ZWQiLCJidWZmZXIiLCJhY3RpdmUiLCJpbmRleCIsInRzbGliX2VzNiIsIl9uZXh0IiwidmFsdWUiLCJfdHJ5TmV4dCIsInB1c2giLCJyZXN1bHQiLCJlcnIiLCJlcnJvciIsIl9pbm5lclN1YiIsImlzaCIsImlubmVyU3Vic2NyaWJlciIsIklubmVyU3Vic2NyaWJlciIsInVuZGVmaW5lZCIsImFkZCIsInN1YnNjcmliZVRvUmVzdWx0IiwiX2NvbXBsZXRlIiwibGVuZ3RoIiwiY29tcGxldGUiLCJ1bnN1YnNjcmliZSIsIm5vdGlmeU5leHQiLCJvdXRlclZhbHVlIiwiaW5uZXJWYWx1ZSIsIm91dGVySW5kZXgiLCJpbm5lckluZGV4IiwiaW5uZXJTdWIiLCJuZXh0Iiwibm90aWZ5Q29tcGxldGUiLCJyZW1vdmUiLCJzaGlmdCIsIk91dGVyU3Vic2NyaWJlciIsIkFzeW5jQWN0aW9uX0FzeW5jQWN0aW9uIiwiQXN5bmNBY3Rpb24iLCJzY2hlZHVsZXIiLCJ3b3JrIiwicGVuZGluZyIsInNjaGVkdWxlIiwic3RhdGUiLCJkZWxheSIsImNsb3NlZCIsImlkIiwicmVjeWNsZUFzeW5jSWQiLCJyZXF1ZXN0QXN5bmNJZCIsInNldEludGVydmFsIiwiZmx1c2giLCJiaW5kIiwiY2xlYXJJbnRlcnZhbCIsImV4ZWN1dGUiLCJFcnJvciIsIl9leGVjdXRlIiwiZXJyb3JlZCIsImVycm9yVmFsdWUiLCJlIiwiX3Vuc3Vic2NyaWJlIiwiYWN0aW9ucyIsImluZGV4T2YiLCJzcGxpY2UiLCJBY3Rpb24iLCJTY2hlZHVsZXIiLCJTY2hlZHVsZXJBY3Rpb24iLCJub3ciLCJEYXRlIiwiYXN5bmNfYXN5bmMiLCJBc3luY1NjaGVkdWxlciIsImRlbGVnYXRlIiwic2NoZWR1bGVkIiwiYWN0aW9uIiwiTm90aWZpY2F0aW9uS2luZCIsImRpc3BhdGNoIiwiX2EiLCJzdWJzY3JpYmVyIiwiTm90aWZpY2F0aW9uX05vdGlmaWNhdGlvbiIsIk5vdGlmaWNhdGlvbiIsImtpbmQiLCJoYXNWYWx1ZSIsIm9ic2VydmUiLCJkbyIsImFjY2VwdCIsIm5leHRPck9ic2VydmVyIiwidG9PYnNlcnZhYmxlIiwib2YiLCJPYnNlcnZhYmxlIiwiZW1wdHkiLCJjcmVhdGVOZXh0IiwidW5kZWZpbmVkVmFsdWVOb3RpZmljYXRpb24iLCJjcmVhdGVFcnJvciIsImNyZWF0ZUNvbXBsZXRlIiwiY29tcGxldGVOb3RpZmljYXRpb24iLCJkZWxheV9kZWxheSIsImRlbGF5Rm9yIiwiaXNOYU4iLCJNYXRoIiwiYWJzIiwiRGVsYXlPcGVyYXRvciIsImRlbGF5X0RlbGF5U3Vic2NyaWJlciIsIkRlbGF5U3Vic2NyaWJlciIsInF1ZXVlIiwidGltZSIsIm5vdGlmaWNhdGlvbiIsImRlbGF5XzEiLCJtYXgiLCJfc2NoZWR1bGUiLCJzY2hlZHVsZU5vdGlmaWNhdGlvbiIsIm1lc3NhZ2UiLCJEZWxheU1lc3NhZ2UiLCJfZXJyb3IiLCJTdWJzY3JpYmVyIiwiY29uY2F0TWFwIiwiQ2F0Y2hPcGVyYXRvciIsInNlbGVjdG9yIiwiY2F0Y2hFcnJvcl9DYXRjaFN1YnNjcmliZXIiLCJjYXVnaHQiLCJDYXRjaFN1YnNjcmliZXIiLCJpc1N0b3BwZWQiLCJlcnIyIiwiX3Vuc3Vic2NyaWJlQW5kUmVjeWNsZSIsImQzX3RpbWVmb3JtYXRkZWZhdWx0bG9jYWxlIiwiZGF0ZSIsImRhdGVUaW1lIiwiZGF5cyIsIm1vbnRocyIsInBlcmlvZHMiLCJzaG9ydERheXMiLCJzaG9ydE1vbnRocyIsImNoYW5nZVdpZHRoJCIsImRldGVjdFdpZHRoIiwibWVkaWFRTGlzdCIsIm1hdGNoZXMiLCJjb25zb2xlIiwibG9nIiwibWVkaWEiLCJtUUxpc3QxMDI0Iiwid2luZG93IiwibWF0Y2hNZWRpYSIsIm1RTGlzdDU2OCIsIm1RTGlzdDMyMCIsIm1RTGlzdDMyMSIsImFkZExpc3RlbmVyIiwicmVzcG9uc2l2ZSIsIl9fd2VicGFja19yZXF1aXJlX18iLCJkIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsImQzaGlzdG9yeWdyYXBoX0dyYXBoTGluZUNvbXBvbmVudCIsImV4dGVybmFsX2QzXyIsIltvYmplY3QgT2JqZWN0XSIsImxpbmVhcyIsInNvY2tldGlvU2VydiIsImZvcm1hdEV2ZXJkIiwicHJpY2UiLCJ0aW1lc3RhbXAiLCJiaXNlY3REYXRlIiwicmlnaHQiLCJiaXNlY3RWYWx1ZSIsInN2Z1dpZHRoIiwic3ZnSGVpZ2h0IiwibWFyZ2luIiwidG9wIiwiYm90dG9tIiwibGVmdCIsIndpZHRoIiwiaGVpZ2h0Iiwib3JpZ2luYWxDaXJjbGUiLCJjeCIsImN5IiwiciIsImNoYXJ0UHJvcHMiLCJ0aXRsZUdyYXBoIiwibWVkaWFTdHJpbmciLCJuZ09uSW5pdCIsInJlY2FsY3VsYXRlV2lkdGhzIiwibGluZXNEYXRhVXBkYXRlZCQiLCJnZXRVcGRhdGVkQ3VycmVuY2llcyQiLCJjdXJyZW5jaWVzRGF0YXMiLCJpZHgiLCJmaW5kSW5kZXgiLCJjdXJyZW5jeSIsIm5hbWUiLCJjdXJyRGF0YSIsImxpbmUxRGF0YUhpc3RvcnkiLCJ0aW1lUHJpY2VBcnJheSIsInVwZGF0ZUF4aXMiLCJjb2luTmFtZSIsIm1hcFRvIiwieFNjYWxlIiwiZG9tYWluIiwiZ2V0VGltZSIsInlTY2FsZSIsImxpbmVTdmciLCJhdHRyIiwib3JpZ2luYWxMaW5lIiwiZDNldmVudHRyYW5zZm9ybSIsImsiLCJzY2FsZWRMaW5lIiwic3ZnVmlld3BvcnQiLCJ6b29tIiwibmV3eFNjYWxlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNsYXNzTmFtZSIsInJlbW92ZVN2ZyQiLCJvYiIsInRpdGxlcyIsImZvckVhY2giLCJsaW5kYXRhIiwibGFzdEluZGV4IiwibW92ZVRvb2xUaXAiLCJnZXRUaXRsZXMiLCJnZXRMaW5lMSIsInN3aXRjaE1hcCIsImRlZmluZUNoYXJ0JCIsImxpbiIsImRyYXdMaW5lJCIsImFkZFRvb2xUaXBzJCIsImFkZEV2ZW50c0FyZWEiLCJwdXRUb29sVGlwSW5MYXN0UG9pbnQiLCJvcGVyYXRvciIsImFkZFRpdGxlR3JhcGgiLCJkZWZpbmVDaGFydCIsImxpbmVHcmFwaEVsZW1lbnQiLCJhcHBlbmQiLCJzdHlsZSIsInJhbmdlIiwiY2xhbXAiLCJvbiIsInhBeGlzIiwieUF4aXMiLCJzY2FsZUV4dGVudCIsIkluZmluaXR5IiwidHJhbnNsYXRlRXh0ZW50IiwiZXh0ZW50Iiwiem9vbUZ1bmN0aW9uIiwiaW5uZXJTcGFjZSIsIm51bWJlck9mVGlja3MiLCJpbm5lcldpZHRoIiwiZ1giLCJ0aWNrcyIsInRpY2tGb3JtYXQiLCJnWSIsIngiLCJ5IiwibmV3eVNjYWxlIiwib25jbGlja3JlbW92ZSIsInZpZXciLCJtb3VzZW92ZXIiLCJtb3VzZW1vdmUiLCJ0b3VjaFN0YXJ0IiwidG91Y2hNb3ZlIiwiZm9jdXMiLCJsaW5lIiwiZHJhd0xpbmUiLCJwb2ludCIsImV4dGVybmFsX21vbWVudF8iLCJ0b0RhdGUiLCJkYXR1bSIsInJlc2NhbGVYIiwicmVzY2FsZVkiLCJzY2FsZSIsImNoYW5nZUxpbmUiLCJ0cmFuc2Zvcm0iLCJyZWVzY2FsZUdyYXBoaWMiLCJ0aXRsZVN2ZyIsInRleHQiLCJhZGRUb29sVGlwcyIsInRleHRUb29sVGlwIiwiZm9ybWF0IiwiZW52aXJvbm1lbnQiLCJ0b29sdGlwVGltZUZvcm1hdCIsInJvdW5kIiwidG9Mb2NhbGVTdHJpbmciLCJqIiwibm9kZXMiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsIngwIiwiaW52ZXJ0IiwiZDAiLCJhTGVuZ3RoIiwiZDEiLCJkaXN0YW5jaWF4IiwiZ2V0RGF0YVBvaW50Iiwic2VsZWN0QWxsIiwiY2FsY3VsYXRlQmJveCIsImJib3giLCJ0eHROb2RlIiwibm9kZSIsImluc2VydEJlZm9yZSIsIm5ld3kyIiwic2VsZWN0IiwiY2hhbmdlV2lkdGgiLCJ3aWR0aFRvTnVtYmVyIiwicGFyc2VJbnQiLCJzbGljZSIsImdldEJCb3giXSwibWFwcGluZ3MiOiIwTEFPTyxTQUFBQSxFQUFBQyxFQUFBQyxFQUFBQyxHQUlQLFlBSEEsSUFBQUEsSUFDQUEsRUFBQUMsT0FBQUMsbUJBRUEsbUJBQUFILEVBQ0EsU0FBQUksR0FBa0MsT0FBQUEsRUFBQUMsS0FBQVAsRUFBQSxTQUFBUSxFQUFBQyxHQUE4QyxPQUFRQyxPQUFBQyxFQUFBLEVBQUFELENBQUlULEVBQUFPLEVBQUFDLElBQUFGLEtBQXFCRyxPQUFBRSxFQUFBLEVBQUFGLENBQUcsU0FBQUcsRUFBQUMsR0FBbUIsT0FBQVosRUFBQU0sRUFBQUssRUFBQUosRUFBQUssT0FBMkNYLE1BRWxMLGlCQUFBRCxJQUNBQyxFQUFBRCxHQUVBLFNBQUFJLEdBQThCLE9BQUFBLEVBQUFTLEtBQUEsSUFBQUMsRUFBQWYsRUFBQUUsTUFFOUIsSUFBQWEsRUFBQSxXQUNBLFNBQUFBLEVBQUFmLEVBQUFFLFFBQ0EsSUFBQUEsSUFDQUEsRUFBQUMsT0FBQUMsbUJBRUFZLEtBQUFoQixVQUNBZ0IsS0FBQWQsYUFLQSxPQUhBYSxFQUFBRSxVQUFBQyxLQUFBLFNBQUFDLEVBQUFkLEdBQ0EsT0FBQUEsRUFBQWUsVUFBQSxJQUFvQ0MsRUFBa0JGLEVBQUFILEtBQUFoQixRQUFBZ0IsS0FBQWQsY0FFdERhLEVBWEEsR0FjSU0sRUFBa0IsU0FBQUMsR0FFdEIsU0FBQUMsRUFBQUMsRUFBQXhCLEVBQUFFLFFBQ0EsSUFB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eWdyYXBoLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCxfT3V0ZXJTdWJzY3JpYmVyLF9Jbm5lclN1YnNjcmliZXIsX21hcCxfb2JzZXJ2YWJsZV9mcm9tIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBzdWJzY3JpYmVUb1Jlc3VsdCB9IGZyb20gJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnO1xuaW1wb3J0IHsgT3V0ZXJTdWJzY3JpYmVyIH0gZnJvbSAnLi4vT3V0ZXJTdWJzY3JpYmVyJztcbmltcG9ydCB7IElubmVyU3Vic2NyaWJlciB9IGZyb20gJy4uL0lubmVyU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBtYXAgfSBmcm9tICcuL21hcCc7XG5pbXBvcnQgeyBmcm9tIH0gZnJvbSAnLi4vb2JzZXJ2YWJsZS9mcm9tJztcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZU1hcChwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkge1xuICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHtcbiAgICAgICAgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiByZXN1bHRTZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gc291cmNlLnBpcGUobWVyZ2VNYXAoZnVuY3Rpb24gKGEsIGkpIHsgcmV0dXJuIGZyb20ocHJvamVjdChhLCBpKSkucGlwZShtYXAoZnVuY3Rpb24gKGIsIGlpKSB7IHJldHVybiByZXN1bHRTZWxlY3RvcihhLCBiLCBpLCBpaSk7IH0pKTsgfSwgY29uY3VycmVudCkpOyB9O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgcmVzdWx0U2VsZWN0b3IgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGNvbmN1cnJlbnQgPSByZXN1bHRTZWxlY3RvcjtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBNZXJnZU1hcE9wZXJhdG9yKHByb2plY3QsIGNvbmN1cnJlbnQpKTsgfTtcbn1cbnZhciBNZXJnZU1hcE9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1lcmdlTWFwT3BlcmF0b3IocHJvamVjdCwgY29uY3VycmVudCkge1xuICAgICAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG4gICAgfVxuICAgIE1lcmdlTWFwT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgTWVyZ2VNYXBTdWJzY3JpYmVyKG9ic2VydmVyLCB0aGlzLnByb2plY3QsIHRoaXMuY29uY3VycmVudCkpO1xuICAgIH07XG4gICAgcmV0dXJuIE1lcmdlTWFwT3BlcmF0b3I7XG59KCkpO1xuZXhwb3J0IHsgTWVyZ2VNYXBPcGVyYXRvciB9O1xudmFyIE1lcmdlTWFwU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhNZXJnZU1hcFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWVyZ2VNYXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCBjb25jdXJyZW50KSB7XG4gICAgICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICBfdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcbiAgICAgICAgX3RoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmJ1ZmZlciA9IFtdO1xuICAgICAgICBfdGhpcy5hY3RpdmUgPSAwO1xuICAgICAgICBfdGhpcy5pbmRleCA9IDA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgPCB0aGlzLmNvbmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3RyeU5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeU5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0KHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aXZlKys7XG4gICAgICAgIHRoaXMuX2lubmVyU3ViKHJlc3VsdCwgdmFsdWUsIGluZGV4KTtcbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX2lubmVyU3ViID0gZnVuY3Rpb24gKGlzaCwgdmFsdWUsIGluZGV4KSB7XG4gICAgICAgIHZhciBpbm5lclN1YnNjcmliZXIgPSBuZXcgSW5uZXJTdWJzY3JpYmVyKHRoaXMsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgZGVzdGluYXRpb24uYWRkKGlubmVyU3Vic2NyaWJlcik7XG4gICAgICAgIHN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGlzaCwgdmFsdWUsIGluZGV4LCBpbm5lclN1YnNjcmliZXIpO1xuICAgIH07XG4gICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG4gICAgfTtcbiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcbiAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpO1xuICAgICAgICB0aGlzLmFjdGl2ZS0tO1xuICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX25leHQoYnVmZmVyLnNoaWZ0KCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuaGFzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBNZXJnZU1hcFN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcikpO1xuZXhwb3J0IHsgTWVyZ2VNYXBTdWJzY3JpYmVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZU1hcC5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX0FjdGlvbiBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSAnLi9BY3Rpb24nO1xudmFyIEFzeW5jQWN0aW9uID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKEFzeW5jQWN0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFzeW5jQWN0aW9uKHNjaGVkdWxlciwgd29yaykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBzY2hlZHVsZXIsIHdvcmspIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgX3RoaXMud29yayA9IHdvcms7XG4gICAgICAgIF90aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBBc3luY0FjdGlvbi5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBkZWxheSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIHZhciBpZCA9IHRoaXMuaWQ7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuaWQgPSB0aGlzLnJlY3ljbGVBc3luY0lkKHNjaGVkdWxlciwgaWQsIGRlbGF5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBlbmRpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG4gICAgICAgIHRoaXMuaWQgPSB0aGlzLmlkIHx8IHRoaXMucmVxdWVzdEFzeW5jSWQoc2NoZWR1bGVyLCB0aGlzLmlkLCBkZWxheSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQXN5bmNBY3Rpb24ucHJvdG90eXBlLnJlcXVlc3RBc3luY0lkID0gZnVuY3Rpb24gKHNjaGVkdWxlciwgaWQsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBkZWxheSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNldEludGVydmFsKHNjaGVkdWxlci5mbHVzaC5iaW5kKHNjaGVkdWxlciwgdGhpcyksIGRlbGF5KTtcbiAgICB9O1xuICAgIEFzeW5jQWN0aW9uLnByb3RvdHlwZS5yZWN5Y2xlQXN5bmNJZCA9IGZ1bmN0aW9uIChzY2hlZHVsZXIsIGlkLCBkZWxheSkge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgZGVsYXkgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWxheSAhPT0gbnVsbCAmJiB0aGlzLmRlbGF5ID09PSBkZWxheSAmJiB0aGlzLnBlbmRpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gaWQ7XG4gICAgICAgIH1cbiAgICAgICAgY2xlYXJJbnRlcnZhbChpZCk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICBBc3luY0FjdGlvbi5wcm90b3R5cGUuZXhlY3V0ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZGVsYXkpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdleGVjdXRpbmcgYSBjYW5jZWxsZWQgYWN0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wZW5kaW5nID0gZmFsc2U7XG4gICAgICAgIHZhciBlcnJvciA9IHRoaXMuX2V4ZWN1dGUoc3RhdGUsIGRlbGF5KTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5wZW5kaW5nID09PSBmYWxzZSAmJiB0aGlzLmlkICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuaWQgPSB0aGlzLnJlY3ljbGVBc3luY0lkKHRoaXMuc2NoZWR1bGVyLCB0aGlzLmlkLCBudWxsKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQXN5bmNBY3Rpb24ucHJvdG90eXBlLl9leGVjdXRlID0gZnVuY3Rpb24gKHN0YXRlLCBkZWxheSkge1xuICAgICAgICB2YXIgZXJyb3JlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgZXJyb3JWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMud29yayhzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGVycm9yZWQgPSB0cnVlO1xuICAgICAgICAgICAgZXJyb3JWYWx1ZSA9ICEhZSAmJiBlIHx8IG5ldyBFcnJvcihlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3JlZCkge1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yVmFsdWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFzeW5jQWN0aW9uLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpZCA9IHRoaXMuaWQ7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgdmFyIGFjdGlvbnMgPSBzY2hlZHVsZXIuYWN0aW9ucztcbiAgICAgICAgdmFyIGluZGV4ID0gYWN0aW9ucy5pbmRleE9mKHRoaXMpO1xuICAgICAgICB0aGlzLndvcmsgPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXRlID0gbnVsbDtcbiAgICAgICAgdGhpcy5wZW5kaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gbnVsbDtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgYWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmlkID0gdGhpcy5yZWN5Y2xlQXN5bmNJZChzY2hlZHVsZXIsIGlkLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlbGF5ID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBBc3luY0FjdGlvbjtcbn0oQWN0aW9uKSk7XG5leHBvcnQgeyBBc3luY0FjdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXN5bmNBY3Rpb24uanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpcHRpb24gUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4uL1N1YnNjcmlwdGlvbic7XG52YXIgQWN0aW9uID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKEFjdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBY3Rpb24oc2NoZWR1bGVyLCB3b3JrKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBBY3Rpb24ucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBkZWxheSkge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgZGVsYXkgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgcmV0dXJuIEFjdGlvbjtcbn0oU3Vic2NyaXB0aW9uKSk7XG5leHBvcnQgeyBBY3Rpb24gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFjdGlvbi5qcy5tYXBcbiIsInZhciBTY2hlZHVsZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2NoZWR1bGVyKFNjaGVkdWxlckFjdGlvbiwgbm93KSB7XG4gICAgICAgIGlmIChub3cgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgbm93ID0gU2NoZWR1bGVyLm5vdztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLlNjaGVkdWxlckFjdGlvbiA9IFNjaGVkdWxlckFjdGlvbjtcbiAgICAgICAgdGhpcy5ub3cgPSBub3c7XG4gICAgfVxuICAgIFNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAod29yaywgZGVsYXksIHN0YXRlKSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBkZWxheSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLlNjaGVkdWxlckFjdGlvbih0aGlzLCB3b3JrKS5zY2hlZHVsZShzdGF0ZSwgZGVsYXkpO1xuICAgIH07XG4gICAgU2NoZWR1bGVyLm5vdyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIERhdGUubm93KCk7IH07XG4gICAgcmV0dXJuIFNjaGVkdWxlcjtcbn0oKSk7XG5leHBvcnQgeyBTY2hlZHVsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNjaGVkdWxlci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX0FzeW5jQWN0aW9uLF9Bc3luY1NjaGVkdWxlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBBc3luY0FjdGlvbiB9IGZyb20gJy4vQXN5bmNBY3Rpb24nO1xuaW1wb3J0IHsgQXN5bmNTY2hlZHVsZXIgfSBmcm9tICcuL0FzeW5jU2NoZWR1bGVyJztcbmV4cG9ydCB2YXIgYXN5bmMgPSAvKkBfX1BVUkVfXyovIG5ldyBBc3luY1NjaGVkdWxlcihBc3luY0FjdGlvbik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3luYy5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1NjaGVkdWxlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgU2NoZWR1bGVyIH0gZnJvbSAnLi4vU2NoZWR1bGVyJztcbnZhciBBc3luY1NjaGVkdWxlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhBc3luY1NjaGVkdWxlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBc3luY1NjaGVkdWxlcihTY2hlZHVsZXJBY3Rpb24sIG5vdykge1xuICAgICAgICBpZiAobm93ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIG5vdyA9IFNjaGVkdWxlci5ub3c7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgU2NoZWR1bGVyQWN0aW9uLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoQXN5bmNTY2hlZHVsZXIuZGVsZWdhdGUgJiYgQXN5bmNTY2hlZHVsZXIuZGVsZWdhdGUgIT09IF90aGlzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEFzeW5jU2NoZWR1bGVyLmRlbGVnYXRlLm5vdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5hY3Rpb25zID0gW107XG4gICAgICAgIF90aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5zY2hlZHVsZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgQXN5bmNTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKHdvcmssIGRlbGF5LCBzdGF0ZSkge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgZGVsYXkgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBc3luY1NjaGVkdWxlci5kZWxlZ2F0ZSAmJiBBc3luY1NjaGVkdWxlci5kZWxlZ2F0ZSAhPT0gdGhpcykge1xuICAgICAgICAgICAgcmV0dXJuIEFzeW5jU2NoZWR1bGVyLmRlbGVnYXRlLnNjaGVkdWxlKHdvcmssIGRlbGF5LCBzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5zY2hlZHVsZS5jYWxsKHRoaXMsIHdvcmssIGRlbGF5LCBzdGF0ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFzeW5jU2NoZWR1bGVyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgdmFyIGFjdGlvbnMgPSB0aGlzLmFjdGlvbnM7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgICAgICAgICAgYWN0aW9ucy5wdXNoKGFjdGlvbik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVycm9yO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGlmIChlcnJvciA9IGFjdGlvbi5leGVjdXRlKGFjdGlvbi5zdGF0ZSwgYWN0aW9uLmRlbGF5KSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChhY3Rpb24gPSBhY3Rpb25zLnNoaWZ0KCkpO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHdoaWxlIChhY3Rpb24gPSBhY3Rpb25zLnNoaWZ0KCkpIHtcbiAgICAgICAgICAgICAgICBhY3Rpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQXN5bmNTY2hlZHVsZXI7XG59KFNjaGVkdWxlcikpO1xuZXhwb3J0IHsgQXN5bmNTY2hlZHVsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFzeW5jU2NoZWR1bGVyLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfb2JzZXJ2YWJsZV9lbXB0eSxfb2JzZXJ2YWJsZV9vZixfb2JzZXJ2YWJsZV90aHJvd0Vycm9yIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IGVtcHR5IH0gZnJvbSAnLi9vYnNlcnZhYmxlL2VtcHR5JztcbmltcG9ydCB7IG9mIH0gZnJvbSAnLi9vYnNlcnZhYmxlL29mJztcbmltcG9ydCB7IHRocm93RXJyb3IgfSBmcm9tICcuL29ic2VydmFibGUvdGhyb3dFcnJvcic7XG5leHBvcnQgdmFyIE5vdGlmaWNhdGlvbktpbmQ7XG4vKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoTm90aWZpY2F0aW9uS2luZCkge1xuICAgIE5vdGlmaWNhdGlvbktpbmRbXCJORVhUXCJdID0gXCJOXCI7XG4gICAgTm90aWZpY2F0aW9uS2luZFtcIkVSUk9SXCJdID0gXCJFXCI7XG4gICAgTm90aWZpY2F0aW9uS2luZFtcIkNPTVBMRVRFXCJdID0gXCJDXCI7XG59KShOb3RpZmljYXRpb25LaW5kIHx8IChOb3RpZmljYXRpb25LaW5kID0ge30pKTtcbnZhciBOb3RpZmljYXRpb24gPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTm90aWZpY2F0aW9uKGtpbmQsIHZhbHVlLCBlcnJvcikge1xuICAgICAgICB0aGlzLmtpbmQgPSBraW5kO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGtpbmQgPT09IFwiTlwiO1xuICAgIH1cbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLm9ic2VydmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgXCJOXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLm5leHQgJiYgb2JzZXJ2ZXIubmV4dCh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIGNhc2UgXCJFXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmVycm9yICYmIG9ic2VydmVyLmVycm9yKHRoaXMuZXJyb3IpO1xuICAgICAgICAgICAgY2FzZSBcIkNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuY29tcGxldGUgJiYgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS5kbyA9IGZ1bmN0aW9uIChuZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIGtpbmQgPSB0aGlzLmtpbmQ7XG4gICAgICAgIHN3aXRjaCAoa2luZCkge1xuICAgICAgICAgICAgY2FzZSBcIk5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dCAmJiBuZXh0KHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgY2FzZSBcIkVcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IgJiYgZXJyb3IodGhpcy5lcnJvcik7XG4gICAgICAgICAgICBjYXNlIFwiQ1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wbGV0ZSAmJiBjb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLmFjY2VwdCA9IGZ1bmN0aW9uIChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciAmJiB0eXBlb2YgbmV4dE9yT2JzZXJ2ZXIubmV4dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2ZShuZXh0T3JPYnNlcnZlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kbyhuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS50b09ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBraW5kID0gdGhpcy5raW5kO1xuICAgICAgICBzd2l0Y2ggKGtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgXCJOXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9mKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgY2FzZSBcIkVcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhyb3dFcnJvcih0aGlzLmVycm9yKTtcbiAgICAgICAgICAgIGNhc2UgXCJDXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmV4cGVjdGVkIG5vdGlmaWNhdGlvbiBraW5kIHZhbHVlJyk7XG4gICAgfTtcbiAgICBOb3RpZmljYXRpb24uY3JlYXRlTmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBOb3RpZmljYXRpb24oXCJOXCIsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTm90aWZpY2F0aW9uLnVuZGVmaW5lZFZhbHVlTm90aWZpY2F0aW9uO1xuICAgIH07XG4gICAgTm90aWZpY2F0aW9uLmNyZWF0ZUVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICByZXR1cm4gbmV3IE5vdGlmaWNhdGlvbihcIkVcIiwgdW5kZWZpbmVkLCBlcnIpO1xuICAgIH07XG4gICAgTm90aWZpY2F0aW9uLmNyZWF0ZUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gTm90aWZpY2F0aW9uLmNvbXBsZXRlTm90aWZpY2F0aW9uO1xuICAgIH07XG4gICAgTm90aWZpY2F0aW9uLmNvbXBsZXRlTm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbihcIkNcIik7XG4gICAgTm90aWZpY2F0aW9uLnVuZGVmaW5lZFZhbHVlTm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbihcIk5cIiwgdW5kZWZpbmVkKTtcbiAgICByZXR1cm4gTm90aWZpY2F0aW9uO1xufSgpKTtcbmV4cG9ydCB7IE5vdGlmaWNhdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Tm90aWZpY2F0aW9uLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfT2JzZXJ2YWJsZSBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vT2JzZXJ2YWJsZSc7XG5leHBvcnQgZnVuY3Rpb24gdGhyb3dFcnJvcihlcnJvciwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKCFzY2hlZHVsZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7IHJldHVybiBzdWJzY3JpYmVyLmVycm9yKGVycm9yKTsgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKHN1YnNjcmliZXIpIHsgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaCwgMCwgeyBlcnJvcjogZXJyb3IsIHN1YnNjcmliZXI6IHN1YnNjcmliZXIgfSk7IH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRpc3BhdGNoKF9hKSB7XG4gICAgdmFyIGVycm9yID0gX2EuZXJyb3IsIHN1YnNjcmliZXIgPSBfYS5zdWJzY3JpYmVyO1xuICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyb3IpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3dFcnJvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX3NjaGVkdWxlcl9hc3luYyxfdXRpbF9pc0RhdGUsX1N1YnNjcmliZXIsX05vdGlmaWNhdGlvbiBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgYXN5bmMgfSBmcm9tICcuLi9zY2hlZHVsZXIvYXN5bmMnO1xuaW1wb3J0IHsgaXNEYXRlIH0gZnJvbSAnLi4vdXRpbC9pc0RhdGUnO1xuaW1wb3J0IHsgU3Vic2NyaWJlciB9IGZyb20gJy4uL1N1YnNjcmliZXInO1xuaW1wb3J0IHsgTm90aWZpY2F0aW9uIH0gZnJvbSAnLi4vTm90aWZpY2F0aW9uJztcbmV4cG9ydCBmdW5jdGlvbiBkZWxheShkZWxheSwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHNjaGVkdWxlciA9IGFzeW5jO1xuICAgIH1cbiAgICB2YXIgYWJzb2x1dGVEZWxheSA9IGlzRGF0ZShkZWxheSk7XG4gICAgdmFyIGRlbGF5Rm9yID0gYWJzb2x1dGVEZWxheSA/ICgrZGVsYXkgLSBzY2hlZHVsZXIubm93KCkpIDogTWF0aC5hYnMoZGVsYXkpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgRGVsYXlPcGVyYXRvcihkZWxheUZvciwgc2NoZWR1bGVyKSk7IH07XG59XG52YXIgRGVsYXlPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEZWxheU9wZXJhdG9yKGRlbGF5LCBzY2hlZHVsZXIpIHtcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgRGVsYXlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IERlbGF5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmRlbGF5LCB0aGlzLnNjaGVkdWxlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIERlbGF5T3BlcmF0b3I7XG59KCkpO1xudmFyIERlbGF5U3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhEZWxheVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRGVsYXlTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkZWxheSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgICAgICBfdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIF90aGlzLnF1ZXVlID0gW107XG4gICAgICAgIF90aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5lcnJvcmVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgRGVsYXlTdWJzY3JpYmVyLmRpc3BhdGNoID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBzdGF0ZS5zb3VyY2U7XG4gICAgICAgIHZhciBxdWV1ZSA9IHNvdXJjZS5xdWV1ZTtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHN0YXRlLnNjaGVkdWxlcjtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gc3RhdGUuZGVzdGluYXRpb247XG4gICAgICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwICYmIChxdWV1ZVswXS50aW1lIC0gc2NoZWR1bGVyLm5vdygpKSA8PSAwKSB7XG4gICAgICAgICAgICBxdWV1ZS5zaGlmdCgpLm5vdGlmaWNhdGlvbi5vYnNlcnZlKGRlc3RpbmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGRlbGF5XzEgPSBNYXRoLm1heCgwLCBxdWV1ZVswXS50aW1lIC0gc2NoZWR1bGVyLm5vdygpKTtcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUsIGRlbGF5XzEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgc291cmNlLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9zY2hlZHVsZSA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICBkZXN0aW5hdGlvbi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKERlbGF5U3Vic2NyaWJlci5kaXNwYXRjaCwgdGhpcy5kZWxheSwge1xuICAgICAgICAgICAgc291cmNlOiB0aGlzLCBkZXN0aW5hdGlvbjogdGhpcy5kZXN0aW5hdGlvbiwgc2NoZWR1bGVyOiBzY2hlZHVsZXJcbiAgICAgICAgfSkpO1xuICAgIH07XG4gICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5zY2hlZHVsZU5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcbiAgICAgICAgaWYgKHRoaXMuZXJyb3JlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgRGVsYXlNZXNzYWdlKHNjaGVkdWxlci5ub3coKSArIHRoaXMuZGVsYXksIG5vdGlmaWNhdGlvbik7XG4gICAgICAgIHRoaXMucXVldWUucHVzaChtZXNzYWdlKTtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGUoc2NoZWR1bGVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnNjaGVkdWxlTm90aWZpY2F0aW9uKE5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0KHZhbHVlKSk7XG4gICAgfTtcbiAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5lcnJvcmVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIERlbGF5U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNjaGVkdWxlTm90aWZpY2F0aW9uKE5vdGlmaWNhdGlvbi5jcmVhdGVDb21wbGV0ZSgpKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIERlbGF5U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcikpO1xudmFyIERlbGF5TWVzc2FnZSA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEZWxheU1lc3NhZ2UodGltZSwgbm90aWZpY2F0aW9uKSB7XG4gICAgICAgIHRoaXMudGltZSA9IHRpbWU7XG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uO1xuICAgIH1cbiAgICByZXR1cm4gRGVsYXlNZXNzYWdlO1xufSgpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbGF5LmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRGF0ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIERhdGUgJiYgIWlzTmFOKCt2YWx1ZSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc0RhdGUuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9tZXJnZU1hcCBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBtZXJnZU1hcCB9IGZyb20gJy4vbWVyZ2VNYXAnO1xuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdE1hcChwcm9qZWN0LCByZXN1bHRTZWxlY3Rvcikge1xuICAgIHJldHVybiBtZXJnZU1hcChwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgMSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXRNYXAuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9PdXRlclN1YnNjcmliZXIsX0lubmVyU3Vic2NyaWJlcixfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgT3V0ZXJTdWJzY3JpYmVyIH0gZnJvbSAnLi4vT3V0ZXJTdWJzY3JpYmVyJztcbmltcG9ydCB7IElubmVyU3Vic2NyaWJlciB9IGZyb20gJy4uL0lubmVyU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBzdWJzY3JpYmVUb1Jlc3VsdCB9IGZyb20gJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnO1xuZXhwb3J0IGZ1bmN0aW9uIGNhdGNoRXJyb3Ioc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gY2F0Y2hFcnJvck9wZXJhdG9yRnVuY3Rpb24oc291cmNlKSB7XG4gICAgICAgIHZhciBvcGVyYXRvciA9IG5ldyBDYXRjaE9wZXJhdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgdmFyIGNhdWdodCA9IHNvdXJjZS5saWZ0KG9wZXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIChvcGVyYXRvci5jYXVnaHQgPSBjYXVnaHQpO1xuICAgIH07XG59XG52YXIgQ2F0Y2hPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDYXRjaE9wZXJhdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICB9XG4gICAgQ2F0Y2hPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IENhdGNoU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnNlbGVjdG9yLCB0aGlzLmNhdWdodCkpO1xuICAgIH07XG4gICAgcmV0dXJuIENhdGNoT3BlcmF0b3I7XG59KCkpO1xudmFyIENhdGNoU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhDYXRjaFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ2F0Y2hTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBzZWxlY3RvciwgY2F1Z2h0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgICAgICBfdGhpcy5jYXVnaHQgPSBjYXVnaHQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgQ2F0Y2hTdWJzY3JpYmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHZvaWQgMDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5zZWxlY3RvcihlcnIsIHRoaXMuY2F1Z2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIyKSB7XG4gICAgICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5lcnJvci5jYWxsKHRoaXMsIGVycjIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlQW5kUmVjeWNsZSgpO1xuICAgICAgICAgICAgdmFyIGlubmVyU3Vic2NyaWJlciA9IG5ldyBJbm5lclN1YnNjcmliZXIodGhpcywgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJTdWJzY3JpYmVyKTtcbiAgICAgICAgICAgIHN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHJlc3VsdCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGlubmVyU3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBDYXRjaFN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2F0Y2hFcnJvci5qcy5tYXBcbiIsImltcG9ydCB7IFRpbWVMb2NhbGVEZWZpbml0aW9uIH0gZnJvbSAnZDMnO1xuXG5jb25zdCB0aW1lZm9ybWF0ZGVmYXVsdGxvY2FsZTogVGltZUxvY2FsZURlZmluaXRpb24gPSB7XG4gICAgZGF0ZTogJyVkLiVtLiVZJyxcbiAgICBkYXRlVGltZTogJyVhICViICVlICVYICVZJyxcbiAgICBkYXlzOiBbXG4gICAgICAnRG9taW5nbycsXG4gICAgICAnTHVuZXMnLFxuICAgICAgJ01hcnRlcycsXG4gICAgICAnTWnDqXJjb2xlcycsXG4gICAgICAnSnVldmVzJyxcbiAgICAgICdWaWVybmVzJyxcbiAgICAgICdTw6FiYWRvJyxcbiAgICBdLFxuICAgIG1vbnRoczogW1xuICAgICAgICAnRW5lcm8nLFxuICAgICAgICAnRmVicmVybycsXG4gICAgICAgICdNYXJ6bycsXG4gICAgICAgICdBYnJpbCcsXG4gICAgICAgICdNYXlvJyxcbiAgICAgICAgJ0p1bmlvJyxcbiAgICAgICAgJ0p1bGlvJyxcbiAgICAgICAgJ0Fnb3N0bycsXG4gICAgICAgICdTZXB0aWVtYnJlJyxcbiAgICAgICAgJ09jdHVicmUnLFxuICAgICAgICAnTm92aWVtYnJlJyxcbiAgICAgICAgJ0RpY2llbWJyZScsXG4gICAgXSxcbiAgICBwZXJpb2RzOiBbJ0FNJywgJ1BNJ10sXG4gICAgc2hvcnREYXlzOiBbJ0RvJywgJ0x1JywgJ01hJywgJ01pJywgJ0p1JywgJ1ZpJywgJ1NhJ10sXG4gICAgc2hvcnRNb250aHM6IFtcbiAgICAgICAgJ0VuZScsXG4gICAgICAgICdGZWInLFxuICAgICAgICAnTWFyJyxcbiAgICAgICAgJ0FicicsXG4gICAgICAgICdNYXknLFxuICAgICAgICAnSnVuJyxcbiAgICAgICAgJ0p1bCcsXG4gICAgICAgICdBZ28nLFxuICAgICAgICAnU2VwJyxcbiAgICAgICAgJ09jdCcsXG4gICAgICAgICdOb3YnLFxuICAgICAgICAnRGljJyxcbiAgICBdLFxuICAgIHRpbWU6ICclSDolTTolUycsXG59O1xuZXhwb3J0IGRlZmF1bHQgdGltZWZvcm1hdGRlZmF1bHRsb2NhbGU7XG4iLCJpbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5jb25zdCBjaGFuZ2VXaWR0aCQgPSBuZXcgU3ViamVjdDxzdHJpbmc+KCk7XG5cbmNvbnN0IGRldGVjdFdpZHRoID0gKG1lZGlhUUxpc3Q6IE1lZGlhUXVlcnlMaXN0RXZlbnQpOiBhbnkgPT4ge1xuICAgIGlmIChtZWRpYVFMaXN0Lm1hdGNoZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cobWVkaWFRTGlzdCk7XG4gICAgICAgIGNoYW5nZVdpZHRoJC5uZXh0KG1lZGlhUUxpc3QubWVkaWEpO1xuXG4gICAgfVxufTtcblxuY29uc3QgbVFMaXN0MTAyNCA9IHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiAxMDI0cHgpJyk7XG5jb25zdCBtUUxpc3Q1NjggPSB3aW5kb3cubWF0Y2hNZWRpYSgnKG1heC13aWR0aDogNTY4cHgpJyk7XG5jb25zdCBtUUxpc3QzMjAgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKG1heC13aWR0aDogMzIwcHgpJyk7XG5jb25zdCBtUUxpc3QzMjEgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogMzIxcHgpJyk7XG5cbm1RTGlzdDEwMjQuYWRkTGlzdGVuZXIoZGV0ZWN0V2lkdGgpO1xubVFMaXN0NTY4LmFkZExpc3RlbmVyKGRldGVjdFdpZHRoKTtcbm1RTGlzdDMyMC5hZGRMaXN0ZW5lcihkZXRlY3RXaWR0aCk7XG5tUUxpc3QzMjEuYWRkTGlzdGVuZXIoZGV0ZWN0V2lkdGgpO1xuXG5leHBvcnQgZGVmYXVsdCBjaGFuZ2VXaWR0aCQ7XG4iLCJpbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgKiBhcyBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCB7IGZyb20sIE9ic2VydmFibGUsIG9mIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBjYXRjaEVycm9yLCBjb25jYXRNYXAsIGRlbGF5LCBtYXAsIG1hcFRvLCBtZXJnZU1hcCwgc3dpdGNoTWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IElDb2luSGlzdG9yeSBmcm9tICcuL2NvaW4taGlzdG9yeS5pbnRlcmZhY2UnO1xuaW1wb3J0IHRpbWVGb3JtYXREZWZhdWx0TG9jYWxlIGZyb20gJy4vZDMtdGltZWZvcm1hdGRlZmF1bHRsb2NhbGUnO1xuaW1wb3J0IElUaW1lUHJpY2UgZnJvbSAnLi90aW1lcHJpY2UuaW50ZXJmYWNlJztcblxuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2Vudmlyb25tZW50JztcblxuaW1wb3J0IGNoYW5nZVdpZHRoJCBmcm9tICcuL3Jlc3BvbnNpdmUnO1xuXG5pbXBvcnQge1NvY2tldGlvU2VydmljZX0gZnJvbSAnLi9zb2NrZXRpby5zZXJ2aWNlJztcblxuaW1wb3J0IElTaW1wbGVDb2luIGZyb20gJy4vc2ltcGxlY29pbi5pbnRlcmZhY2UnO1xuXG5kMy50aW1lRm9ybWF0RGVmYXVsdExvY2FsZSh0aW1lRm9ybWF0RGVmYXVsdExvY2FsZSk7XG5cbmludGVyZmFjZSBJU2NhbGVzIHtcbiAgeFNjYWxlOiBkMy5TY2FsZVRpbWU8bnVtYmVyLCBudW1iZXI+O1xuICB5U2NhbGU6IGQzLlNjYWxlTGluZWFyPG51bWJlciwgbnVtYmVyPjtcbn1cblxuZXhwb3J0IGNsYXNzIEdyYXBoTGluZUNvbXBvbmVudCB7XG4gICAgcHVibGljIHN0YXRpYyByZW1vdmVTdmckKGNvaW5OYW1lOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcbiAgICAgICAgcmV0dXJuIG9mKGQzLnNlbGVjdChgIyR7Y29pbk5hbWV9YCkucmVtb3ZlKCkpXG4gICAgICAgIC5waXBlKFxuICAgICAgICAgICAgbWFwVG8odHJ1ZSksXG4gICAgICAgICk7XG4gICAgfVxuICAgIHB1YmxpYyBmb3JtYXRFdmVyZCA9IGQzLnRpbWVGb3JtYXQoJyVkLyVtICVIOiVNJyk7XG4gICAgcHVibGljIHR4dE5vZGU6IFNWR1RleHRFbGVtZW50O1xuICAgIHB1YmxpYyBiYm94OiBET01SZWN0O1xuICAgIHB1YmxpYyBkaXN0YW5jaWF4OiBudW1iZXI7XG4gICAgcHVibGljIGQ6IElUaW1lUHJpY2UgPSB7cHJpY2U6IDAsIHRpbWVzdGFtcDogbmV3IERhdGUoKX07XG4gICAgcHVibGljIHBhblg6IGFueTtcbiAgICBwdWJsaWMgcGFuWTogYW55O1xuICAgIHB1YmxpYyBzY2FsZU11bHRpcGxpZXI6IGFueTtcbiAgICAvLyBwdWJsaWMgZDNldmVudHRyYW5zZm9ybTogYW55ID0geyBrOiAxLCB4OiAwLCB5OiAwIH07XG4gICAgcHVibGljIGQzZXZlbnR0cmFuc2Zvcm06IGFueTtcbiAgICAvLyBwdWJsaWMgbmV3eVNjYWxlOiBkMy5BeGlzU2NhbGU8bnVtYmVyIHwgeyB2YWx1ZU9mKCk6IG51bWJlcjsgfT47XG4gICAgLy8gcHVibGljIG5ld3hTY2FsZTogZDMuQXhpc1NjYWxlPG51bWJlciB8IHsgdmFsdWVPZigpOiBudW1iZXI7IH0+O1xuICAgIHB1YmxpYyBuZXd5U2NhbGU6IGFueTsgLy8gYXNpZ25hciBlbiBlbCBjb250cnVjdG9yIG8gZXF1aXZhbGVudGVcbiAgICBwdWJsaWMgbmV3eFNjYWxlOiBhbnk7XG4gICAgcHVibGljIGJpc2VjdERhdGUgPSBkMy5iaXNlY3RvcigoZDogSVRpbWVQcmljZSkgPT4gZC50aW1lc3RhbXApLnJpZ2h0O1xuICAgIHB1YmxpYyBiaXNlY3RWYWx1ZSA9IGQzLmJpc2VjdG9yKChkOiBJVGltZVByaWNlKSA9PiBkLnByaWNlKS5yaWdodDtcbiAgICBwdWJsaWMgc3ZnV2lkdGggPSA4MDA7XG4gICAgcHVibGljIHN2Z0hlaWdodCA9IDMwMDtcbiAgICBwdWJsaWMgbWFyZ2luID0geyB0b3A6IDMwLCByaWdodDogNDAsIGJvdHRvbTogNzAsIGxlZnQ6IDEwMCB9O1xuICAgIHB1YmxpYyB3aWR0aCA9IHRoaXMuc3ZnV2lkdGggLSB0aGlzLm1hcmdpbi5sZWZ0IC0gdGhpcy5tYXJnaW4ucmlnaHQ7XG4gICAgcHVibGljIGhlaWdodCA9IHRoaXMuc3ZnSGVpZ2h0IC0gdGhpcy5tYXJnaW4udG9wIC0gdGhpcy5tYXJnaW4uYm90dG9tO1xuICAgIHB1YmxpYyBvcmlnaW5hbExpbmU6IGQzLkxpbmU8SVRpbWVQcmljZT47XG4gICAgcHVibGljIHNjYWxlZExpbmU6IGQzLkxpbmU8SVRpbWVQcmljZT47XG4gICAgcHVibGljIG9yaWdpbmFsQ2lyY2xlID0ge1xuICAgIGN4OiAtMTUwLFxuICAgIGN5OiAtMTUsXG4gICAgcjogMjAsXG4gICAgfTtcbiAgICBwdWJsaWMgY2hhcnRQcm9wcyA9IHt9IGFzIElTY2FsZXM7XG4gICAgcHVibGljIGdYOiBkMy5TZWxlY3Rpb248U1ZHR0VsZW1lbnQsIHt9LCBudWxsLCB1bmRlZmluZWQ+O1xuICAgIHB1YmxpYyBnWTogZDMuU2VsZWN0aW9uPFNWR0dFbGVtZW50LCB7fSwgbnVsbCwgdW5kZWZpbmVkPjtcbiAgICBwdWJsaWMgbGluZVN2ZzogZDMuU2VsZWN0aW9uPFNWR0dFbGVtZW50LCB7fSwgbnVsbCwgdW5kZWZpbmVkPjtcbiAgICBwdWJsaWMgdmlldzogZDMuU2VsZWN0aW9uPFNWR0dFbGVtZW50LCB7fSwgbnVsbCwgdW5kZWZpbmVkPjtcbiAgICBwdWJsaWMgaW5uZXJTcGFjZTogZDMuU2VsZWN0aW9uPFNWR0dFbGVtZW50LCB7fSwgbnVsbCwgdW5kZWZpbmVkPjtcbiAgICBwdWJsaWMgc3ZnVmlld3BvcnQ6IGQzLlNlbGVjdGlvbjxTVkdHRWxlbWVudCwge30sIG51bGwsIHVuZGVmaW5lZD47XG4gICAgcHVibGljIHRpdGxlU3ZnOiBkMy5TZWxlY3Rpb248U1ZHR0VsZW1lbnQsIHt9LCBudWxsLCB1bmRlZmluZWQ+O1xuICAgIHB1YmxpYyBmb2N1czogZDMuU2VsZWN0aW9uPFNWR0dFbGVtZW50LCB7fSwgbnVsbCwgdW5kZWZpbmVkPjtcbiAgICBwdWJsaWMgdGV4dFRvb2xUaXA6IGQzLlNlbGVjdGlvbjxTVkdUZXh0RWxlbWVudCwge30sIG51bGwsIHVuZGVmaW5lZD47XG4gICAgcHVibGljIHpvb206IGQzLlpvb21CZWhhdmlvcjxFbGVtZW50LCB7fT47XG4gICAgcHVibGljIHhBeGlzOiBkMy5BeGlzPG51bWJlciB8IHsgdmFsdWVPZigpOiBudW1iZXIgfT47XG4gICAgcHVibGljIHlBeGlzOiBkMy5BeGlzPG51bWJlciB8IHsgdmFsdWVPZigpOiBudW1iZXIgfT47XG4gICAgcHVibGljIGxpbmVHcmFwaEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIHB1YmxpYyBsaW5lMURhdGFIaXN0b3J5OiBJQ29pbkhpc3Rvcnk7XG4gICAgcHVibGljIHRpdGxlR3JhcGggPSAnJztcbiAgICBwdWJsaWMgbGluZXNEYXRhVXBkYXRlZCQ6IE9ic2VydmFibGU8SVNpbXBsZUNvaW5bXT47XG4gICAgcHVibGljIG1lZGlhU3RyaW5nID0gJyhtaW4td2lkdGg6IDMyMXB4KSc7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBsaW5lYXM6IElDb2luSGlzdG9yeVtdLFxuICAgICAgICBwcml2YXRlIHNvY2tldGlvU2VydjogU29ja2V0aW9TZXJ2aWNlLFxuICAgICkge1xuICAgICAgICB0aGlzLm5nT25Jbml0KCk7XG4gICAgICAgIGNoYW5nZVdpZHRoJFxuICAgICAgICAuc3Vic2NyaWJlKChtZWRpYVN0cmluZykgPT4ge1xuICAgICAgICAgICAgdGhpcy5tZWRpYVN0cmluZyA9IG1lZGlhU3RyaW5nO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2RldGVjdGFkbyBjYW1iaW8gZGUgYW5jaG8nLCBtZWRpYVN0cmluZyk7XG4gICAgICAgICAgICB0aGlzLnJlY2FsY3VsYXRlV2lkdGhzKG1lZGlhU3RyaW5nKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5saW5lc0RhdGFVcGRhdGVkJCA9IHRoaXMuc29ja2V0aW9TZXJ2LmdldFVwZGF0ZWRDdXJyZW5jaWVzJCgpO1xuXG4gICAgICAgIHRoaXMubGluZXNEYXRhVXBkYXRlZCRcbiAgICAgICAgLnBpcGUoXG4gICAgICAgICAgICBtYXAoKGN1cnJlbmNpZXNEYXRhcykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IGN1cnJlbmNpZXNEYXRhcy5maW5kSW5kZXgoKGN1cnJlbmN5KSA9PiBjdXJyZW5jeS5uYW1lID09PSB0aGlzLnRpdGxlR3JhcGgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW5jaWVzRGF0YXNbaWR4XTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICApXG4gICAgICAgIC5zdWJzY3JpYmUoKGN1cnJEYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY3VyckRhdGEgdXBkYXRlZDogJywgY3VyckRhdGEpO1xuICAgICAgICAgICAgdGhpcy5saW5lMURhdGFIaXN0b3J5LnRpbWVQcmljZUFycmF5LnNoaWZ0KCk7XG4gICAgICAgICAgICB0aGlzLmxpbmVhc1swXSA9IHRoaXMubGluZTFEYXRhSGlzdG9yeTtcblxuICAgICAgICAgICAgdGhpcy5saW5lMURhdGFIaXN0b3J5LnRpbWVQcmljZUFycmF5LnB1c2goe1xuICAgICAgICAgICAgICBwcmljZTogY3VyckRhdGEucHJpY2UsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUF4aXMoKTtcbiAgICAgICAgICAgIHRoaXMucmVjYWxjdWxhdGVXaWR0aHModGhpcy5tZWRpYVN0cmluZyk7XG5cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHB1YmxpYyB1cGRhdGVBeGlzKCkge1xuICAgICAgICB0aGlzLmNoYXJ0UHJvcHMueFNjYWxlXG4gICAgICAgIC5kb21haW4oZDMuZXh0ZW50KHRoaXMubGluZTFEYXRhSGlzdG9yeS50aW1lUHJpY2VBcnJheSwgKGQpID0+IG5ldyBEYXRlKGQudGltZXN0YW1wKS5nZXRUaW1lKCkpKTtcbiAgICAgICAgdGhpcy5jaGFydFByb3BzLnlTY2FsZVxuICAgICAgICAuZG9tYWluKFtcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICBkMy5tYXgoXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lYXMsXG4gICAgICAgICAgICAgICAgKGQpID0+IE1hdGgubWF4KC4uLmQudGltZVByaWNlQXJyYXkubWFwKCh2YWx1ZSkgPT4gdmFsdWUucHJpY2UpKSAqIDEuMSxcbiAgICAgICAgICAgICksXG4gICAgICAgIF0pO1xuICAgICAgICAvKiBpZiAodGhpcy5saW5lU3ZnKSB7XG4gICAgICAgICAgICB0aGlzLmxpbmVTdmdcbiAgICAgICAgICAgIC5hdHRyKCdkJywgdGhpcy5vcmlnaW5hbExpbmUuYmluZCh0aGlzKSh0aGlzLmxpbmUxRGF0YUhpc3RvcnkudGltZVByaWNlQXJyYXkpKTtcblxuICAgICAgICB9ICovXG5cbiAgICAgICAgdGhpcy5saW5lU3ZnXG4gICAgICAgIC5hdHRyKCdkJywgdGhpcy5vcmlnaW5hbExpbmUuYmluZCh0aGlzKSh0aGlzLmxpbmUxRGF0YUhpc3RvcnkudGltZVByaWNlQXJyYXkpKTtcbiAgICAgICAgaWYgKHRoaXMuZDNldmVudHRyYW5zZm9ybSAmJiB0aGlzLmQzZXZlbnR0cmFuc2Zvcm0uayAhPT0gMSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2QzZXZlbnRUcmFuc2Zvcm06ICcsIHRoaXMuZDNldmVudHRyYW5zZm9ybSk7XG4gICAgICAgICAgICB0aGlzLmxpbmVTdmcuYXR0cignZCcsIHRoaXMuc2NhbGVkTGluZS5iaW5kKHRoaXMpKHRoaXMubGluZTFEYXRhSGlzdG9yeS50aW1lUHJpY2VBcnJheSkpO1xuICAgICAgICAgICAgLy8gdGhpcy5yZWVzY2FsZUdyYXBoaWMoKTtcbiAgICAgICAgICAgIHRoaXMuc3ZnVmlld3BvcnQuY2FsbCh0aGlzLnpvb20uYmluZCh0aGlzKSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kM2V2ZW50dHJhbnNmb3JtICYmIHRoaXMuZDNldmVudHRyYW5zZm9ybS5rID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLmxpbmVTdmdcbiAgICAgICAgICAgIC5hdHRyKCdkJywgdGhpcy5vcmlnaW5hbExpbmUuYmluZCh0aGlzKSh0aGlzLmxpbmUxRGF0YUhpc3RvcnkudGltZVByaWNlQXJyYXkpKTtcbiAgICAgICAgICAgIHRoaXMuZDNldmVudHRyYW5zZm9ybSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMubmV3eFNjYWxlID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIH1cblxuICAgIH1cbiAgICBwdWJsaWMgb25jbGlja3JlbW92ZSgpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7dGhpcy50aXRsZUdyYXBofWRhdGFgKS5jbGFzc05hbWUgPSAnZmlsYSc7XG4gICAgICAgIC8vIGQzLnNlbGVjdChgIyR7dGhpcy50aXRsZUdyYXBofWRhdGFgKS5hdHRyKCdjbGFzcycsICdmaWxhJyk7XG4gICAgICAgIEdyYXBoTGluZUNvbXBvbmVudC5yZW1vdmVTdmckKHRoaXMudGl0bGVHcmFwaCk7XG4gICAgfVxuICAgIHB1YmxpYyBnZXRMaW5lMSgpOiBPYnNlcnZhYmxlPElDb2luSGlzdG9yeT4ge1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGU8SUNvaW5IaXN0b3J5Pigob2IpID0+IHtcbiAgICAgICAgICAgIHRoaXMubGluZTFEYXRhSGlzdG9yeSA9IHRoaXMubGluZWFzWzBdO1xuICAgICAgICAgICAgb2IubmV4dCh0aGlzLmxpbmVhc1swXSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUaXRsZXMoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlPHN0cmluZz4oKG9iKSA9PiB7XG4gICAgICAgICAgICBsZXQgdGl0bGVzID0gJyc7XG4gICAgICAgICAgICB0aGlzLmxpbmVhcy5mb3JFYWNoKChsaW5kYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAobGluZGF0YS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRpdGxlcyA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICB0aXRsZXMgPSBsaW5kYXRhLm5hbWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aXRsZXMgPSB0aXRsZXMgKyAnIC8gJyArIGxpbmRhdGEubmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudGl0bGVHcmFwaCA9IHRpdGxlcztcbiAgICAgICAgICAgIG9iLm5leHQodGl0bGVzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHB1dFRvb2xUaXBJbkxhc3RQb2ludCgpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcbiAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZTxib29sZWFuPigob2IpID0+IHtcbiAgICAgICAgY29uc3QgbGFzdEluZGV4ID0gdGhpcy5saW5lMURhdGFIaXN0b3J5LnRpbWVQcmljZUFycmF5Lmxlbmd0aCAtIDE7XG4gICAgICAgIHRoaXMuZCA9IHRoaXMubGluZTFEYXRhSGlzdG9yeS50aW1lUHJpY2VBcnJheVtsYXN0SW5kZXhdO1xuICAgICAgICB0aGlzLm1vdmVUb29sVGlwKCk7XG4gICAgICAgIG9iLm5leHQodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbmdPbkluaXQoKSB7XG5cbiAgICAgICAgLyogdGhpcy5yZW1vdmVTdmckKClcbiAgICAgICAgLnBpcGUoc3dpdGNoTWFwKChvaykgPT4gdGhpcy5nZXRUaXRsZXMoKSlcbiAgICAgICAgKSAqL1xuICAgICAgICB0aGlzLmdldFRpdGxlcygpXG4gICAgICAgIC5waXBlKFxuICAgICAgICAgICAgbWVyZ2VNYXAoKCkgPT4gdGhpcy5nZXRMaW5lMSgpKSxcbiAgICAgICAgICAgIHN3aXRjaE1hcCgoKSA9PiB0aGlzLmRlZmluZUNoYXJ0JCgpKSxcbiAgICAgICAgICAgIHN3aXRjaE1hcCgoKSA9PiBmcm9tKHRoaXMubGluZWFzKSksXG4gICAgICAgICAgICBtZXJnZU1hcCgobGluKSA9PiB0aGlzLmRyYXdMaW5lJChsaW4pKSxcbiAgICAgICAgICAgIGRlbGF5KDEwMDApLFxuICAgICAgICAgICAgY29uY2F0TWFwKCgpID0+IHRoaXMuYWRkVG9vbFRpcHMkKCkpLFxuICAgICAgICAgICAgY29uY2F0TWFwKCgpID0+IHRoaXMuYWRkRXZlbnRzQXJlYSgpKSxcbiAgICAgICAgICAgIHN3aXRjaE1hcCgoKSA9PiB0aGlzLnB1dFRvb2xUaXBJbkxhc3RQb2ludCgpKSxcbiAgICAgICAgICAgIGNhdGNoRXJyb3IoKCkgPT4gb2YoJ2Vycm9yJykpLFxuICAgICAgICApXG4gICAgICAgIC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICB0aGlzLmFkZFRpdGxlR3JhcGgoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHB1YmxpYyBkZWZpbmVDaGFydCQoKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XG4gICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZTxib29sZWFuPigob2IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lQ2hhcnQoKTtcbiAgICAgICAgICAgIG9iLm5leHQodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwdWJsaWMgZGVmaW5lQ2hhcnQoKSB7XG4gICAgICAgIHRoaXMubGluZUdyYXBoRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5lY2hhcnQnKTtcbiAgICAgICAgdGhpcy5zdmdWaWV3cG9ydCA9IGQzXG4gICAgICAgIC5zZWxlY3QodGhpcy5saW5lR3JhcGhFbGVtZW50KVxuICAgICAgICAuYXBwZW5kKCdzdmcnKVxuICAgICAgICAuYXR0cignaWQnLCB0aGlzLnRpdGxlR3JhcGgpXG4gICAgICAgIC5zdHlsZSgnYmFja2dyb3VuZCcsICd3aGl0ZScpXG4gICAgICAgIC5hdHRyKCd2aWV3Qm94JywgYDAgMCAke3RoaXMuc3ZnV2lkdGh9ICR7dGhpcy5zdmdIZWlnaHR9YCk7XG4gICAgICAgIHRoaXMuY2hhcnRQcm9wcy54U2NhbGUgPSBkM1xuICAgICAgICAuc2NhbGVUaW1lKClcbiAgICAgICAgLmRvbWFpbihkMy5leHRlbnQodGhpcy5saW5lMURhdGFIaXN0b3J5LnRpbWVQcmljZUFycmF5LCAoZCkgPT4gbmV3IERhdGUoZC50aW1lc3RhbXApLmdldFRpbWUoKSkpXG4gICAgICAgIC5yYW5nZShbMCwgdGhpcy53aWR0aF0pXG4gICAgICAgIC5jbGFtcCh0cnVlKTtcblxuICAgICAgICAvLyBkZXNhY3Rpdm8gZWwgem9vbSBkZWwgc3ZnIHBhcmEgcXVlXG4gICAgICAgIC8vIG5vIGludGVyZmllcmEgY29uIGVsIHpvb20gZGVsIGxpbmVzdmdcbiAgICAgICAgdGhpcy5zdmdWaWV3cG9ydC5vbignbW91c2Vkb3duLnpvb20nLCBudWxsKVxuICAgICAgICAub24oJ3RvdWNoc3RhcnQuem9vbScsIG51bGwpXG4gICAgICAgIC5vbigndG91Y2htb3ZlLnpvb20nLCBudWxsKVxuICAgICAgICAub24oJ3RvdWNoZW5kLnpvb20nLCBudWxsKTtcblxuICAgICAgICB0aGlzLmNoYXJ0UHJvcHMueVNjYWxlID0gZDNcbiAgICAgICAgLnNjYWxlTGluZWFyKClcbiAgICAgICAgLmRvbWFpbihbXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgZDMubWF4KFxuICAgICAgICAgICAgICAgIHRoaXMubGluZWFzLFxuICAgICAgICAgICAgICAgIChkKSA9PiBNYXRoLm1heCguLi5kLnRpbWVQcmljZUFycmF5Lm1hcCgodmFsdWUpID0+IHZhbHVlLnByaWNlKSkgKiAxLjEsXG4gICAgICAgICAgICApLFxuICAgICAgICBdKVxuICAgICAgICAucmFuZ2UoW3RoaXMuaGVpZ2h0LCAwXSlcbiAgICAgICAgLmNsYW1wKHRydWUpO1xuXG4gICAgICAgIHRoaXMueEF4aXMgPSBkMy5heGlzQm90dG9tKHRoaXMuY2hhcnRQcm9wcy54U2NhbGUpO1xuICAgICAgICB0aGlzLnlBeGlzID0gZDMuYXhpc0xlZnQodGhpcy5jaGFydFByb3BzLnlTY2FsZSk7XG4gICAgICAgIHRoaXMuem9vbSA9IGQzLnpvb20oKVxuICAgICAgICAuc2NhbGVFeHRlbnQoWzEsIEluZmluaXR5XSlcbiAgICAgICAgLnRyYW5zbGF0ZUV4dGVudChbWzAsIDBdLCBbdGhpcy53aWR0aCwgdGhpcy5oZWlnaHRdXSlcbiAgICAgICAgLmV4dGVudChbWzAsIDBdLCBbdGhpcy53aWR0aCwgdGhpcy5oZWlnaHRdXSlcbiAgICAgICAgLm9uKCd6b29tJywgdGhpcy56b29tRnVuY3Rpb24uYmluZCh0aGlzKSk7XG5cbiAgICAgICAgdGhpcy5pbm5lclNwYWNlID0gdGhpcy5zdmdWaWV3cG9ydFxuICAgICAgICAuYXBwZW5kKCdnJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2lubmVyX3NwYWNlJylcbiAgICAgICAgLmF0dHIoXG4gICAgICAgICd0cmFuc2Zvcm0nLFxuICAgICAgICAndHJhbnNsYXRlKCcgKyB0aGlzLm1hcmdpbi5sZWZ0ICsgJywnICsgdGhpcy5tYXJnaW4udG9wICsgJyknLFxuICAgICAgICApXG4gICAgICAgIC5jYWxsKHRoaXMuem9vbS5iaW5kKHRoaXMpKTtcbiAgICAgICAgY29uc3QgbnVtYmVyT2ZUaWNrcyA9IHdpbmRvdy5pbm5lcldpZHRoIC8gMjAwO1xuICAgICAgICBjb25zb2xlLmxvZygnbnVtYmVyT2ZUaWNzJywgbnVtYmVyT2ZUaWNrcyk7XG4gICAgICAgIHRoaXMuZ1ggPSB0aGlzLmlubmVyU3BhY2VcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2F4aXMgYXhpcy0teCcpXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCcgKyB0aGlzLmhlaWdodCArICcpJylcbiAgICAgICAgICAgIC5jYWxsKHRoaXMueEF4aXMudGlja3MoTWF0aC5tYXgobnVtYmVyT2ZUaWNrcywgMikpLnRpY2tGb3JtYXQodGhpcy5mb3JtYXRFdmVyZCkpO1xuXG4gICAgICAgIHRoaXMuZ1kgPSB0aGlzLmlubmVyU3BhY2VcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2F4aXMgYXhpcy0teScpXG4gICAgICAgICAgICAvLyAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgdGhpcy5tYXJnaW4ubGVmdCArICcsMCknKVxuICAgICAgICAgICAgLmNhbGwodGhpcy55QXhpcy50aWNrcyhNYXRoLm1heChudW1iZXJPZlRpY2tzLCA0KSkpO1xuXG4gICAgICAgIHRoaXMub3JpZ2luYWxMaW5lID0gZDNcbiAgICAgICAgICAgIC5saW5lPElUaW1lUHJpY2U+KClcbiAgICAgICAgICAgIC54KChkKSA9PiB7XG4gICAgICAgICAgICBpZiAoZC50aW1lc3RhbXAgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2QuZGF0ZTogJywgZC5kYXRlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jaGFydFByb3BzLnhTY2FsZShkLnRpbWVzdGFtcC5nZXRUaW1lKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC55KChkKSA9PiB0aGlzLmNoYXJ0UHJvcHMueVNjYWxlKGQucHJpY2UpKTtcblxuICAgICAgICB0aGlzLnNjYWxlZExpbmUgPSBkM1xuICAgICAgICAubGluZTxJVGltZVByaWNlPigpXG4gICAgICAgIC54KChkKSA9PiB7XG4gICAgICAgIGlmIChkLnRpbWVzdGFtcCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdkLmRhdGU6ICcsIGQuZGF0ZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5uZXd4U2NhbGUoZC50aW1lc3RhbXAuZ2V0VGltZSgpKTtcbiAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAueSgoZCkgPT4gdGhpcy5uZXd5U2NhbGUoZC5wcmljZSkpO1xuXG4gICAgICAgIGNvbnN0IHJlbW92ZVJlY3RhbmdsZSA9IHRoaXMuc3ZnVmlld3BvcnRcbiAgICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAgIC5hdHRyKCd4JywgNSlcbiAgICAgICAgLmF0dHIoJ3knLCA1KVxuICAgICAgICAuYXR0cignd2lkdGgnLCAzMClcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIDMwKVxuICAgICAgICAuYXR0cignZmlsbCcsICdyZWQnKVxuICAgICAgICAub24oJ2NsaWNrJywgdGhpcy5vbmNsaWNrcmVtb3ZlLmJpbmQodGhpcykpO1xuXG4gICAgICAgIGNvbnN0IHJlbW92ZUFzcGExID0gdGhpcy5zdmdWaWV3cG9ydFxuICAgICAgICAuYXBwZW5kKCdsaW5lJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2FzcGFzJylcbiAgICAgICAgLmF0dHIoJ3gxJywgMzUpXG4gICAgICAgIC5hdHRyKCd4MicsIDUpXG4gICAgICAgIC5hdHRyKCd5MScsIDUpXG4gICAgICAgIC5hdHRyKCd5MicsIDM1KVxuICAgICAgICAuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpO1xuXG4gICAgICAgIGNvbnN0IHJlbW92ZUFzcGEyID0gdGhpcy5zdmdWaWV3cG9ydFxuICAgICAgICAuYXBwZW5kKCdsaW5lJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2FzcGFzJylcbiAgICAgICAgLmF0dHIoJ3gxJywgNSlcbiAgICAgICAgLmF0dHIoJ3gyJywgMzUpXG4gICAgICAgIC5hdHRyKCd5MScsIDUpXG4gICAgICAgIC5hdHRyKCd5MicsIDM1KVxuICAgICAgICAuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpO1xuXG4gICAgICAgIC8qIGQzLnhtbChgJHtjb25maWcudXJsU2VydmVyfS9jbG9zZWljb24uc3ZnYClcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIHJlbW92ZUljb24ubm9kZSgpLmFwcGVuZChkYXRhLmRvY3VtZW50RWxlbWVudCk7XG4gICAgICAgIH0pOyAqL1xuICAgIH1cbiAgICBwdWJsaWMgYWRkRXZlbnRzQXJlYSgpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlPGJvb2xlYW4+KChvYikgPT4ge1xuICAgICAgICAgICAgdGhpcy52aWV3ID0gdGhpcy5pbm5lclNwYWNlXG4gICAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd6b29tJylcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHRoaXMud2lkdGgpXG4gICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgdGhpcy5oZWlnaHQpXG4gICAgICAgICAgICAub24oJ21vdXNlb3ZlcicsIHRoaXMubW91c2VvdmVyLmJpbmQodGhpcykpXG4gICAgICAgICAgICAvLyAub24oJ21vdXNlb3V0JywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gICAgIHRoaXMuZm9jdXMuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgLy8gfSlcbiAgICAgICAgICAgIC5vbignbW91c2Vtb3ZlJywgdGhpcy5tb3VzZW1vdmUuYmluZCh0aGlzKSlcbiAgICAgICAgICAgIC5vbigndG91Y2hzdGFydCcsIHRoaXMudG91Y2hTdGFydC5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgLm9uKCd0b3VjaG1vdmUnLCB0aGlzLnRvdWNoTW92ZS5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgLm9uKCd0b3VjaGVuZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzLnN0eWxlKCdkaXNwbGF5JywgbnVsbCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgb2IubmV4dCh0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHB1YmxpYyBkcmF3TGluZSQobGluZTogSUNvaW5IaXN0b3J5KSB7XG4gICAgICByZXR1cm4gbmV3IE9ic2VydmFibGU8SUNvaW5IaXN0b3J5Pigob2IpID0+IHtcbiAgICAgICAgICB0aGlzLmRyYXdMaW5lKGxpbmUpO1xuICAgICAgICAgIG9iLm5leHQobGluZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcHVibGljIGRyYXdMaW5lKGxpbmU6IElDb2luSGlzdG9yeSkge1xuICAgICAgICBsaW5lLnRpbWVQcmljZUFycmF5LmZvckVhY2goKHBvaW50KSA9PiB7XG4gICAgICAgICAgICBwb2ludC50aW1lc3RhbXAgPSBtb21lbnQocG9pbnQudGltZXN0YW1wKS50b0RhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGluZVN2ZyA9IHRoaXMuaW5uZXJTcGFjZVxuICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXG4gICAgICAgICAgICAuZGF0dW0obGluZS50aW1lUHJpY2VBcnJheSlcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lZ3JhcGgnKVxuICAgICAgICAgICAgLy8gLnN0eWxlKCdzdHJva2UnLCBjb2xvcl9jb2RlKSAvLyBhw7FhZGlyIGFxdcOtIGVsIGNvbG9yIHF1ZSB2aWVuZSBkZSBsb3MgZGF0b3MgZGUgbGEgbGluZWFcbiAgICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgJ2JsYWNrJylcbiAgICAgICAgICAgIC5hdHRyKCdkJywgdGhpcy5vcmlnaW5hbExpbmUuYmluZCh0aGlzKShsaW5lLnRpbWVQcmljZUFycmF5KSk7XG4gICAgfVxuICAgIHB1YmxpYyByZWVzY2FsZUdyYXBoaWMoKSB7XG4gICAgICAgIC8vIHVwZGF0ZSBheGVzXG4gICAgICAgIHRoaXMubmV3eFNjYWxlID0gdGhpcy5kM2V2ZW50dHJhbnNmb3JtLnJlc2NhbGVYKHRoaXMuY2hhcnRQcm9wcy54U2NhbGUpO1xuICAgICAgICB0aGlzLm5ld3lTY2FsZSA9IHRoaXMuZDNldmVudHRyYW5zZm9ybS5yZXNjYWxlWSh0aGlzLmNoYXJ0UHJvcHMueVNjYWxlKTtcbiAgICAgICAgdGhpcy5nWC5jYWxsKHRoaXMueEF4aXMuc2NhbGUodGhpcy5uZXd4U2NhbGUpKTtcbiAgICAgICAgdGhpcy5nWS5jYWxsKHRoaXMueUF4aXMuc2NhbGUodGhpcy5uZXd5U2NhbGUpKTtcbiAgICAgICAgdGhpcy5saW5lU3ZnLmNhbGwodGhpcy54QXhpcy5zY2FsZSh0aGlzLm5ld3hTY2FsZSkpO1xuICAgICAgICB0aGlzLmxpbmVTdmcuY2FsbCh0aGlzLnlBeGlzLnNjYWxlKHRoaXMubmV3eVNjYWxlKSk7XG5cbiAgICAgICAgdGhpcy5jaGFuZ2VMaW5lKCk7XG5cbiAgICAgICAgdGhpcy5tb3ZlVG9vbFRpcCgpO1xuICAgIH1cbiAgICBwdWJsaWMgem9vbUZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmQzZXZlbnR0cmFuc2Zvcm0gPSBkMy5ldmVudC50cmFuc2Zvcm07XG4gICAgICAgIHRoaXMucmVlc2NhbGVHcmFwaGljKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNoYW5nZUxpbmUoKSB7XG4gICAgICAgIHRoaXMubGluZVN2Z1xuICAgICAgICAuYXR0cignZCcsIHRoaXMuc2NhbGVkTGluZS5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICAvLyBjcmVhbW9zIGxhcyBmdW5jaW9uZXMgcXVlIGNyZWFuIGxvcyBjaXJjdWxvcyB5IGxvcyB0b29sdGlwc1xuXG4gICAgcHVibGljIGFkZFRpdGxlR3JhcGgoKSB7XG4gICAgICAvLyBlc3RlIGVzIGVsIHTDrXR1bG8gcXVlIGRlYmVyw61hIGFwYXJlY2VyIGRlYmFqbyBkZSBsYSBncsOhZmljYVxuICAgICAgLy8gY29ycmVnaW1vcyBlbCBtYXJnZW4gdG9wXG4gICAgICAvLyBjb25zdCBkaXN0VGV4dFRvcCA9IHRoaXMuaGVpZ2h0ICsgdGhpcy5tYXJnaW4udG9wO1xuICAgICAgY29uc3QgZGlzdFRleHRUb3AgPSAyNjA7XG4gICAgICAvLyBjb25zb2xlLmxvZygnZGlzdFRleHRUb3A6ICcsIGRpc3RUZXh0VG9wKTtcbiAgICAgIHRoaXMudGl0bGVTdmcgPSB0aGlzLmlubmVyU3BhY2VcbiAgICAgIC5hcHBlbmQoJ3RleHQnKVxuICAgICAgLmF0dHIoJ3gnLCB0aGlzLm1hcmdpbi5sZWZ0KVxuICAgICAgLy8gLmF0dHIoJ3knLCAwIC0gdGhpcy5tYXJnaW4udG9wIC8gNClcbiAgICAgIC5hdHRyKCd5JywgZGlzdFRleHRUb3ApXG4gICAgICAuYXR0cignY2xhc3MnLCAnZ3JhcGhpY190aXRsZV90ZXh0JylcbiAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdzdGFydCcpXG4gICAgICAudGV4dCh0aGlzLnRpdGxlR3JhcGgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRUb29sVGlwcyQoKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XG4gICAgICByZXR1cm4gbmV3IE9ic2VydmFibGU8Ym9vbGVhbj4oKG9iKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRUb29sVGlwcygpO1xuICAgICAgICAgIG9iLm5leHQodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcHVibGljIGFkZFRvb2xUaXBzKCkge1xuICAgICAgICB0aGlzLmZvY3VzID0gdGhpcy5pbm5lclNwYWNlXG4gICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAndGhpcy5mb2N1cycpXG4gICAgICAgIC8vIC5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgIC5zdHlsZSgnZGlzcGxheScsICdudWxsJyk7XG5cbiAgICAgICAgdGhpcy5mb2N1c1xuICAgICAgICAuYXBwZW5kKCdsaW5lJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3gtaG92ZXItbGluZSBob3Zlci1saW5lJylcbiAgICAgICAgLmF0dHIoJ3kxJywgMClcbiAgICAgICAgLmF0dHIoJ3kyJywgdGhpcy5oZWlnaHQpXG4gICAgICAgIC5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XG5cbiAgICAgICAgdGhpcy5mb2N1c1xuICAgICAgICAuYXBwZW5kKCdsaW5lJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3ktaG92ZXItbGluZSBob3Zlci1saW5lJylcbiAgICAgICAgLmF0dHIoJ3gxJywgMClcbiAgICAgICAgLmF0dHIoJ3gyJywgdGhpcy53aWR0aClcbiAgICAgICAgLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcblxuICAgICAgICB0aGlzLmZvY3VzXG4gICAgICAgIC5hcHBlbmQoJ2NpcmNsZScpXG4gICAgICAgIC5hdHRyKCdyJywgMilcbiAgICAgICAgLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcblxuICAgICAgICB0aGlzLnRleHRUb29sVGlwID0gdGhpcy5mb2N1c1xuICAgICAgICAuYXBwZW5kKCd0ZXh0JylcbiAgICAgICAgLmF0dHIoJ2lkJywgJ3RleHRUb29sVGlwJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3RleHRfdG9vbHRpcCcpXG4gICAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdlbmQnKVxuICAgICAgICAuYXR0cigneScsIC0yMClcbiAgICAgICAgLmF0dHIoJ2R5JywgJy4zMWVtJyk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldERhdGFQb2ludCgpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy5kKSB7XG4gICAgICAgICAgICBjb25zdCBob3JhID0gbW9tZW50KHRoaXMuZC50aW1lc3RhbXApLmZvcm1hdChjb25maWcudG9vbHRpcFRpbWVGb3JtYXQpO1xuICAgICAgICAgICAgY29uc3QgcHJlY2lvUmVkb25kZWFkbyA9IE1hdGgucm91bmQodGhpcy5kLnByaWNlICogMTAwKSAvIDEwMDtcbiAgICAgICAgICAgIGNvbnN0IHByZWNpb1RvTG9jYWxlID0gcHJlY2lvUmVkb25kZWFkb1xuICAgICAgICAgICAgLnRvTG9jYWxlU3RyaW5nKCdlcy1FUycsIHtcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogJ0VVUicsXG4gICAgICAgICAgICAgICAgc3R5bGU6ICdjdXJyZW5jeScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBgJHtob3JhfTogJHtwcmVjaW9Ub0xvY2FsZX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICdubyBkYXRhJztcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgdG91Y2hNb3ZlKGRhdHVtOiBhbnksIGo6IGFueSwgbm9kZXM6IGFueSkge1xuICAgICAgICBkMy5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgY29uc3QgZCA9IGQzLnRvdWNoZXMobm9kZXNbal0pO1xuXG4gICAgICAgIHRoaXMuZm9jdXMuc3R5bGUoJ2Rpc3BsYXknLCBudWxsKTtcbiAgICAgICAgdGhpcy5tb3VzZW1vdmUoZGF0dW0sIGosIG5vZGVzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdG91Y2hTdGFydChkYXR1bTogYW55LCBqOiBhbnksIG5vZGVzOiBhbnkpIHtcbiAgICAgICAgZDMuZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZDMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGNvbnN0IGQgPSBkMy50b3VjaGVzKG5vZGVzW2pdKTtcblxuICAgICAgICB0aGlzLmZvY3VzLnN0eWxlKCdkaXNwbGF5JywgbnVsbCk7XG4gICAgICAgIHRoaXMubW91c2Vtb3ZlKGRhdHVtLCBqLCBub2Rlcyk7XG5cbiAgICAgICAgLy8gZCA9IGQzLnRvdWNoZXModGhpcyk7XG4gICAgfVxuXG4gICAgcHVibGljIG1vdXNlb3ZlcihkYXR1bTogYW55LCBqOiBhbnksIG5vZGVzOiBhbnkpIHtcbiAgICAgICAgZDMuZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZDMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAvLyBkID0gZDMudG91Y2hlcyh0aGlzKTtcbiAgICAgICAgdGhpcy5mb2N1cy5zdHlsZSgnZGlzcGxheScsIG51bGwpO1xuICAgICAgICB0aGlzLm1vdXNlbW92ZShkYXR1bSwgaiwgbm9kZXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBtb3VzZW1vdmUoZGF0dW06IGFueSwgajogYW55LCBub2RlczogYW55KSB7XG4gICAgICAgIGQzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBsZXQgeDA7XG4gICAgICAgIGlmICh0aGlzLm5ld3hTY2FsZSkge1xuICAgICAgICAgICAgeDAgPSB0aGlzLm5ld3hTY2FsZS5pbnZlcnQoZDMubW91c2Uobm9kZXNbal0pWzBdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHgwID0gdGhpcy5jaGFydFByb3BzLnhTY2FsZS5pbnZlcnQoZDMubW91c2Uobm9kZXNbal0pWzBdKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpID0gdGhpcy5iaXNlY3REYXRlKHRoaXMubGluZTFEYXRhSGlzdG9yeS50aW1lUHJpY2VBcnJheSwgeDAsIDEpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnaTogJywgaSk7XG5cbiAgICAgICAgY29uc3QgZDAgPSB0aGlzLmxpbmUxRGF0YUhpc3RvcnkudGltZVByaWNlQXJyYXlbaSAtIDFdO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnZDA6ICcsIGQwKTtcblxuICAgICAgICBjb25zdCBhTGVuZ3RoID0gdGhpcy5saW5lMURhdGFIaXN0b3J5LnRpbWVQcmljZUFycmF5Lmxlbmd0aDtcbiAgICAgICAgbGV0IGQxOiBJVGltZVByaWNlO1xuICAgICAgICBpZiAoaSA+PSB0aGlzLmxpbmUxRGF0YUhpc3RvcnkudGltZVByaWNlQXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgICBkMSA9IHRoaXMubGluZTFEYXRhSGlzdG9yeS50aW1lUHJpY2VBcnJheVthTGVuZ3RoIC0gMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkMSA9IHRoaXMubGluZTFEYXRhSGlzdG9yeS50aW1lUHJpY2VBcnJheVtpXTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjb25zb2xlLmxvZygnZDE6ICcsIGQxKTtcblxuICAgICAgICB0aGlzLmQgPVxuICAgICAgICAgICAgeDAuZ2V0VGltZSgpIC0gKGQwLnRpbWVzdGFtcCBhcyBEYXRlKS5nZXRUaW1lKCkgPlxuICAgICAgICAgICAgKGQxLnRpbWVzdGFtcCBhcyBEYXRlKS5nZXRUaW1lKCkgLSB4MC5nZXRUaW1lKClcbiAgICAgICAgICAgID8gZDFcbiAgICAgICAgICAgIDogZDA7XG4gICAgICAgIHRoaXMubW92ZVRvb2xUaXAoKTtcblxuICAgIH1cblxuICAgIHB1YmxpYyBtb3ZlVG9vbFRpcCgpIHtcbiAgICAgICAgaWYgKHRoaXMubmV3eFNjYWxlKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzXG4gICAgICAgICAgICAuYXR0cihcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJyxcbiAgICAgICAgICAgICAgICBgdHJhbnNsYXRlKCR7dGhpcy5uZXd4U2NhbGUoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKHRoaXMuZC50aW1lc3RhbXApLFxuICAgICAgICAgICAgICAgICl9LCR7dGhpcy5uZXd5U2NhbGUodGhpcy5kLnByaWNlKX0pYCk7XG5cbiAgICAgICAgICAgIHRoaXMuZGlzdGFuY2lheCA9IHRoaXMubmV3eFNjYWxlKG5ldyBEYXRlKHRoaXMuZC50aW1lc3RhbXApKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdkaXN0YW5jaWF4OiAnLCBkaXN0YW5jaWF4KTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5mb2N1c1xuICAgICAgICAgICAgLmF0dHIoXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybScsXG4gICAgICAgICAgICAgICAgYHRyYW5zbGF0ZSgke3RoaXMuY2hhcnRQcm9wcy54U2NhbGUoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKHRoaXMuZC50aW1lc3RhbXApLFxuICAgICAgICAgICAgICAgICl9LCR7dGhpcy5jaGFydFByb3BzLnlTY2FsZSh0aGlzLmQucHJpY2UpfSlgKTtcblxuICAgICAgICAgICAgdGhpcy5kaXN0YW5jaWF4ID0gdGhpcy5jaGFydFByb3BzLnhTY2FsZShuZXcgRGF0ZSh0aGlzLmQudGltZXN0YW1wKSk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZGlzdGFuY2lheDogJywgZGlzdGFuY2lheCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGlmICh0aGlzLmQzZXZlbnR0cmFuc2Zvcm0pIHtcbiAgICAgICAgICB0aGlzLmZvY3VzLmF0dHIoXG4gICAgICAgICAgICAndHJhbnNmb3JtJyxcbiAgICAgICAgICAgIHRoaXMuZDNldmVudHRyYW5zZm9ybVxuICAgICAgICAgIClcbiAgICAgICAgfSAqL1xuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmNoYXJ0UHJvcHMueFNjYWxlKG5ldyBEYXRlKGQuZGF0ZSkpKTtcblxuICAgICAgICB0aGlzLnRleHRUb29sVGlwXG4gICAgICAgIC50ZXh0KHRoaXMuZ2V0RGF0YVBvaW50LmJpbmQodGhpcykpO1xuXG4gICAgICAgIC8vIGNvbXByb2JhciBxdWUgc2UgcHVlZGUgbW92ZXIgZW4gdmV6IGRlIGVsaW1pbmFyIHkgY3JlYXJcbiAgICAgICAgdGhpcy5mb2N1cy5zZWxlY3RBbGwoJ3JlY3QnKS5yZW1vdmUoKTtcblxuICAgICAgICAvLyBzaSBubyBmdW5jaW9uYSBtZXRlciBlbiB1biBvYnNlcnZhYmxlXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlQmJveCgpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygndGhpcy5iYm94IGVuIG1vdmVUb29sdGlwOiAnLCB0aGlzLmJib3gpO1xuXG4gICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmZvY3VzXG4gICAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgICAgIC5hdHRyKCd4JywgdGhpcy5iYm94LngpXG4gICAgICAgICAgICAuYXR0cigneScsIHRoaXMuYmJveC55KVxuICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgdGhpcy5iYm94LndpZHRoKVxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHRoaXMuYmJveC5oZWlnaHQpXG4gICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCAnd2hpdGUnKVxuICAgICAgICAgICAgLnN0eWxlKCdmaWxsLW9wYWNpdHknLCAnLjknKVxuICAgICAgICAgICAgLnN0eWxlKCdzdHJva2UnLCAnIzY2NicpXG4gICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZS13aWR0aCcsICcwLjVweCcpO1xuXG4gICAgICAgIHRoaXMudHh0Tm9kZSA9IHRoaXMudGV4dFRvb2xUaXAubm9kZSgpIGFzIFNWR1RleHRFbGVtZW50O1xuXG4gICAgICAgIHRoaXMuZm9jdXMubm9kZSgpLmluc2VydEJlZm9yZSh0aGlzLnR4dE5vZGUsIG51bGwpO1xuXG4gICAgICAgIGxldCBuZXd5MiA9IDA7XG5cbiAgICAgICAgaWYgKHRoaXMubmV3eVNjYWxlKSB7XG4gICAgICAgICAgICBuZXd5MiA9IHRoaXMubmV3eVNjYWxlKHRoaXMuZC5wcmljZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXd5MiA9IHRoaXMuY2hhcnRQcm9wcy55U2NhbGUodGhpcy5kLnByaWNlKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZXNjYWxvIGxhIHBvc2ljaW9uIHkyIGRlIGxhIGzDrW5lYSBzZWfDum4gbGEgbnVldmEgZXNjYWxhIHNpIHNlIGhhIGhlY2hvIHpvb21cbiAgICAgICAgdGhpcy5mb2N1c1xuICAgICAgICAgICAgLnNlbGVjdCgnLngtaG92ZXItbGluZScpXG4gICAgICAgICAgICAuYXR0cigneTInLCB0aGlzLmhlaWdodCAtIG5ld3kyKTtcblxuICAgICAgICAvLyBubyBmdW5jaW9uYSBsYSBsaW5lYSBob3Jpem9udGFsXG4gICAgICAgIHRoaXMuZm9jdXMuc2VsZWN0KCcueS1ob3Zlci1saW5lJykuYXR0cigneDInLCAtIHRoaXMuZGlzdGFuY2lheCk7XG4gICAgfVxuICAgIHB1YmxpYyByZWNhbGN1bGF0ZVdpZHRocyhjaGFuZ2VXaWR0aDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHdpZHRoVG9OdW1iZXIgPSBwYXJzZUludChjaGFuZ2VXaWR0aC5zbGljZSgxMiwgMTYpLCAxMCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd3aWR0aFRvTnVtYmVyOiAnLCB3aWR0aFRvTnVtYmVyKTtcbiAgICAgICAgY29uc3QgbnVtYmVyT2ZUaWNrcyA9IHdpZHRoVG9OdW1iZXIgLyAxMDA7XG4gICAgICAgIGNvbnNvbGUubG9nKCdudW1iZXJPZlRpY3M6ICcsIG51bWJlck9mVGlja3MpO1xuICAgICAgICBpZiAoY2hhbmdlV2lkdGggPT09ICcobWF4LXdpZHRoOiAzMjBweCknKSB7XG4gICAgICAgICAgLy8gdGhpcy5nWC5yZW1vdmUoKVxuICAgICAgICAgIC8vIHRoaXMuZ1ggPSB0aGlzLmlubmVyU3BhY2VcbiAgICAgICAgICAvLyAgICAgLmFwcGVuZCgnZycpXG4gICAgICAgICAgLy8gICAgIC5hdHRyKCdjbGFzcycsICdheGlzIGF4aXMtLXgnKVxuICAgICAgICAgIC8vICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCcgKyB0aGlzLmhlaWdodCArICcpJylcbiAgICAgICAgICAvLyAgICAgLmNhbGwodGhpcy54QXhpcy50aWNrcygyKS50aWNrRm9ybWF0KHRoaXMuZm9ybWF0RXZlcmQpKTtcbiAgICAgICAgICB0aGlzLmdYXG4gICAgICAgICAgLmNhbGwodGhpcy54QXhpcy50aWNrcyhNYXRoLm1heChudW1iZXJPZlRpY2tzLCAyKSkudGlja0Zvcm1hdCh0aGlzLmZvcm1hdEV2ZXJkKSk7XG4gICAgICAgICAgdGhpcy5nWVxuICAgICAgICAgIC5jYWxsKHRoaXMueUF4aXMudGlja3MoNCkpO1xuICAgICAgICB9IGVsc2UgaWYgKCcobWluLXdpZHRoOiAzMjFweCknKSB7XG4gICAgICAgICAgdGhpcy5nWFxuICAgICAgICAgIC5jYWxsKHRoaXMueEF4aXMudGlja3MoTWF0aC5tYXgobnVtYmVyT2ZUaWNrcywgMikpLnRpY2tGb3JtYXQodGhpcy5mb3JtYXRFdmVyZCkpO1xuICAgICAgICAgIHRoaXMuZ1lcbiAgICAgICAgICAuY2FsbCh0aGlzLnlBeGlzLnRpY2tzKDQpKTtcbiAgICAgICAgfSBlbHNlIGlmICgnKG1pbi13aWR0aDogNTY5cHgpJykge1xuICAgICAgICAgIHRoaXMuZ1hcbiAgICAgICAgICAuY2FsbCh0aGlzLnhBeGlzLnRpY2tzKE1hdGgubWF4KDYpKS50aWNrRm9ybWF0KHRoaXMuZm9ybWF0RXZlcmQpKTtcbiAgICAgICAgICB0aGlzLmdZXG4gICAgICAgICAgLmNhbGwodGhpcy55QXhpcy50aWNrcyg1KSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tb3ZlVG9vbFRpcCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYWxjdWxhdGVCYm94KCk6IERPTVJlY3Qge1xuXG4gICAgICAgIHRoaXMudHh0Tm9kZSA9IHRoaXMudGV4dFRvb2xUaXAubm9kZSgpIGFzIFNWR1RleHRFbGVtZW50O1xuICAgICAgICB0aGlzLmJib3ggPSB0aGlzLnR4dE5vZGUuZ2V0QkJveCgpO1xuXG4gICAgICAgIGlmICh0aGlzLmJib3gud2lkdGggKyAxMCA+IHRoaXMuZGlzdGFuY2lheCkge1xuICAgICAgICAgICAgdGhpcy50ZXh0VG9vbFRpcFxuICAgICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ3N0YXJ0Jyk7XG4gICAgICAgICAgICB0aGlzLmJib3ggPSB0aGlzLnR4dE5vZGUuZ2V0QkJveCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50ZXh0VG9vbFRpcFxuICAgICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ2VuZCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0aGlzLmJib3ggZW4gY2FsY3VsYXRlQmJveDogJywgdGhpcy5iYm94KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmJveDtcbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9