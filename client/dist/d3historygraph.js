(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{59:function(t,e,i){"use strict";i.r(e);var s=i(57),a=i(58),h=i(88),r=i(61),n=i(85),o=i(90),l=i(87),c=i(91),p=i(94),m=i(92),d=i(93);var x={date:"%d.%m.%Y",dateTime:"%a %b %e %X %Y",days:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],periods:["AM","PM"],shortDays:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],shortMonths:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],time:"%H:%M:%S"},u=i(6);const g=new(i(95).a),v=t=>{t.matches&&(console.log(t),g.next(t.media))},w=window.matchMedia("(max-width: 1024px)"),y=window.matchMedia("(max-width: 568px)"),b=window.matchMedia("(max-width: 320px)"),f=window.matchMedia("(min-width: 321px)");w.addListener(v),y.addListener(v),b.addListener(v),f.addListener(v);var S=g;i.d(e,"GraphLineComponent",function(){return T}),s.timeFormatDefaultLocale(x);class T{constructor(t){this.lineas=t,this.d={price:0,timestamp:new Date},this.bisectDate=s.bisector(t=>t.timestamp).right,this.bisectValue=s.bisector(t=>t.price).right,this.svgWidth=800,this.svgHeight=300,this.margin={top:30,right:40,bottom:50,left:60},this.width=this.svgWidth-this.margin.left-this.margin.right,this.height=this.svgHeight-this.margin.top-this.margin.bottom,this.originalCircle={cx:-150,cy:-15,r:20},this.chartProps={},this.titleGraph="",this.ngOnInit(),S.subscribe(t=>{console.log("detectado cambio de ancho",t),this.recalculateWidths()})}static removeSvg$(t){return Object(h.a)(s.select(`#${t}`).remove()).pipe(Object(o.a)(!0))}onclickremove(){document.getElementById(`${this.titleGraph}data`).className="fila",T.removeSvg$(this.titleGraph)}getLine1(){return new r.a(t=>{this.linea1=this.lineas[0],t.next(this.lineas[0])})}getTitles(){return new r.a(t=>{let e="";this.lineas.forEach(t=>{t.name&&(e=""===e?t.name:e+" / "+t.name)}),this.titleGraph=e,t.next(e)})}ngOnInit(){this.getTitles().pipe(Object(l.a)(()=>this.getLine1()),Object(c.a)(()=>this.defineChart$()),Object(c.a)(()=>Object(n.a)(this.lineas)),Object(l.a)(t=>this.drawLine$(t)),Object(p.a)(1e3),Object(m.a)(()=>this.addToolTips$()),Object(m.a)(()=>this.addEventsArea()),Object(d.a)(()=>Object(h.a)("error"))).subscribe(()=>{this.addTitleGraph()})}defineChart$(){return new r.a(t=>{this.defineChart(),t.next(!0)})}defineChart(){console.log("titleGraph: ",this.titleGraph),this.lineGraphElement=document.getElementById("linechart"),this.svgViewport=s.select(this.lineGraphElement).append("svg").attr("id",this.titleGraph).style("background","white").attr("viewBox",`0 0 ${this.svgWidth} ${this.svgHeight}`),this.chartProps.xScale=s.scaleTime().domain(s.extent(this.linea1.timePriceArray,t=>new Date(t.timestamp).getTime())).range([0,this.width]).clamp(!0),this.svgViewport.on("mousedown.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null),this.chartProps.yScale=s.scaleLinear().domain([0,s.max(this.lineas,t=>1.1*Math.max(...t.timePriceArray.map(t=>t.price)))]).range([this.height,0]).clamp(!0),this.xAxis=s.axisBottom(this.chartProps.xScale),this.yAxis=s.axisLeft(this.chartProps.yScale),this.zoom=s.zoom().scaleExtent([1,1/0]).translateExtent([[0,0],[this.width,this.height]]).extent([[0,0],[this.width,this.height]]).on("zoom",this.zoomFunction.bind(this)),this.innerSpace=this.svgViewport.append("g").attr("class","inner_space").attr("transform","translate("+this.margin.left+","+this.margin.top+")").call(this.zoom.bind(this));const t=s.timeFormat("%d/%m %H:%M");this.gX=this.innerSpace.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+this.height+")").call(this.xAxis.ticks(6).tickFormat(t)),this.gY=this.innerSpace.append("g").attr("class","axis axis--y").call(this.yAxis),this.originalLine=s.line().x(t=>{if(t.timestamp instanceof Date)return this.chartProps.xScale(t.timestamp.getTime())}).y(t=>this.chartProps.yScale(t.price)),this.scaledLine=s.line().x(t=>{if(t.timestamp instanceof Date)return this.newxScale(t.timestamp.getTime())}).y(t=>this.newyScale(t.price));this.svgViewport.append("rect").attr("x",5).attr("y",5).attr("width",30).attr("height",30).attr("fill","red").on("click",this.onclickremove.bind(this)),this.svgViewport.append("line").attr("class","aspas").attr("x1",35).attr("x2",5).attr("y1",5).attr("y2",35).attr("pointer-events","none"),this.svgViewport.append("line").attr("class","aspas").attr("x1",5).attr("x2",35).attr("y1",5).attr("y2",35).attr("pointer-events","none")}addEventsArea(){return new r.a(t=>{this.view=this.innerSpace.append("rect").attr("class","zoom").attr("width",this.width).attr("height",this.height).on("mouseover",this.mouseover.bind(this)).on("mouseout",()=>{this.focus.style("display","none")}).on("mousemove",this.mousemove.bind(this)).on("touchstart",this.touchStart.bind(this)).on("touchmove",this.touchMove.bind(this)).on("touchend",()=>{this.focus.style("display",null)}),t.next(!0)})}drawLine$(t){return new r.a(e=>{this.drawLine(t),e.next(t)})}drawLine(t){t.timePriceArray.forEach(t=>{t.timestamp=a(t.timestamp).toDate()}),this.lineSvg=this.innerSpace.append("path").datum(t.timePriceArray).attr("class","linegraph").style("stroke","black").attr("d",this.originalLine.bind(this)(t.timePriceArray))}zoomFunction(){this.newxScale=s.event.transform.rescaleX(this.chartProps.xScale),this.newyScale=s.event.transform.rescaleY(this.chartProps.yScale),this.gX.call(this.xAxis.scale(this.newxScale)),this.gY.call(this.yAxis.scale(this.newyScale)),this.lineSvg.call(this.xAxis.scale(this.newxScale)),this.lineSvg.call(this.yAxis.scale(this.newyScale)),this.d3eventtransform=s.event.transform,this.changeLine(),this.moveToolTip()}changeLine(){this.lineSvg.attr("d",this.scaledLine.bind(this))}addTitleGraph(){this.titleSvg=this.innerSpace.append("text").attr("x",this.margin.left).attr("y",260).attr("class","graphic_title_text").attr("text-anchor","start").text(this.titleGraph)}addToolTips$(){return new r.a(t=>{this.addToolTips(),t.next(!0)})}addToolTips(){this.focus=this.innerSpace.append("g").attr("class","this.focus").style("display","none"),this.focus.append("line").attr("class","x-hover-line hover-line").attr("y1",0).attr("y2",this.height).attr("pointer-events","none"),this.focus.append("line").attr("class","y-hover-line hover-line").attr("x1",0).attr("x2",this.width).attr("pointer-events","none"),this.focus.append("circle").attr("r",2).attr("pointer-events","none"),this.textToolTip=this.focus.append("text").attr("id","textToolTip").attr("class","text_tooltip").attr("text-anchor","end").attr("y",-20).attr("dy",".31em")}getDataPoint(){if(this.d){return`${a(this.d.timestamp).format(u.a.tooltipTimeFormat)}: ${(Math.round(100*this.d.price)/100).toLocaleString()}€`}return"no data"}touchMove(t,e,i){s.event.preventDefault(),s.event.stopPropagation();s.touches(i[e]);this.focus.style("display",null),this.mousemove(t,e,i)}touchStart(t,e,i){s.event.preventDefault(),s.event.stopPropagation();s.touches(i[e]);this.focus.style("display",null),this.mousemove(t,e,i)}mouseover(t,e,i){s.event.preventDefault(),s.event.stopPropagation(),this.focus.style("display",null),this.mousemove(t,e,i)}mousemove(t,e,i){let a;a=this.newxScale?this.newxScale.invert(s.mouse(i[e])[0]):this.chartProps.xScale.invert(s.mouse(i[e])[0]);const h=this.bisectDate(this.linea1.timePriceArray,a,1),r=this.linea1.timePriceArray[h-1],n=this.linea1.timePriceArray.length;let o;o=h>=this.linea1.timePriceArray.length?this.linea1.timePriceArray[n-1]:this.linea1.timePriceArray[h],this.d=a.getTime()-r.timestamp.getTime()>o.timestamp.getTime()-a.getTime()?o:r,this.moveToolTip()}moveToolTip(){this.newxScale?(this.focus.attr("transform",`translate(${this.newxScale(new Date(this.d.timestamp))},${this.newyScale(this.d.price)})`),this.distanciax=this.newxScale(new Date(this.d.timestamp))):(this.focus.attr("transform",`translate(${this.chartProps.xScale(new Date(this.d.timestamp))},${this.chartProps.yScale(this.d.price)})`),this.distanciax=this.chartProps.xScale(new Date(this.d.timestamp))),this.textToolTip.text(this.getDataPoint.bind(this)),this.focus.selectAll("rect").remove(),this.calculateBbox();this.focus.append("rect").attr("x",this.bbox.x).attr("y",this.bbox.y).attr("width",this.bbox.width).attr("height",this.bbox.height).style("fill","white").style("fill-opacity",".9").style("stroke","#666").style("stroke-width","0.5px");this.txtNode=this.textToolTip.node(),this.focus.node().insertBefore(this.txtNode,null);let t=0;t=this.newyScale?this.newyScale(this.d.price):this.chartProps.yScale(this.d.price),this.focus.select(".x-hover-line").attr("y2",this.height-t),this.focus.select(".y-hover-line").attr("x2",-this.distanciax)}recalculateWidths(){this.moveToolTip()}calculateBbox(){return this.txtNode=this.textToolTip.node(),this.bbox=this.txtNode.getBBox(),this.bbox.width+10>this.distanciax?(this.textToolTip.attr("text-anchor","start"),this.bbox=this.txtNode.getBBox()):this.textToolTip.attr("text-anchor","end"),this.bbox}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZDMtdGltZWZvcm1hdGRlZmF1bHRsb2NhbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Jlc3BvbnNpdmUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2QzaGlzdG9yeWdyYXBoLnRzIl0sIm5hbWVzIjpbImQzX3RpbWVmb3JtYXRkZWZhdWx0bG9jYWxlIiwiZGF0ZSIsImRhdGVUaW1lIiwiZGF5cyIsIm1vbnRocyIsInBlcmlvZHMiLCJzaG9ydERheXMiLCJzaG9ydE1vbnRocyIsInRpbWUiLCJjaGFuZ2VXaWR0aCQiLCJkZXRlY3RXaWR0aCIsIm1lZGlhUUxpc3QiLCJtYXRjaGVzIiwiY29uc29sZSIsImxvZyIsIm5leHQiLCJtZWRpYSIsIm1RTGlzdDEwMjQiLCJ3aW5kb3ciLCJtYXRjaE1lZGlhIiwibVFMaXN0NTY4IiwibVFMaXN0MzIwIiwibVFMaXN0MzIxIiwiYWRkTGlzdGVuZXIiLCJyZXNwb25zaXZlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImQiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiZDNoaXN0b3J5Z3JhcGhfR3JhcGhMaW5lQ29tcG9uZW50IiwiZXh0ZXJuYWxfZDNfIiwiW29iamVjdCBPYmplY3RdIiwibGluZWFzIiwidGhpcyIsInByaWNlIiwidGltZXN0YW1wIiwiRGF0ZSIsImJpc2VjdERhdGUiLCJyaWdodCIsImJpc2VjdFZhbHVlIiwic3ZnV2lkdGgiLCJzdmdIZWlnaHQiLCJtYXJnaW4iLCJ0b3AiLCJib3R0b20iLCJsZWZ0Iiwid2lkdGgiLCJoZWlnaHQiLCJvcmlnaW5hbENpcmNsZSIsImN4IiwiY3kiLCJyIiwiY2hhcnRQcm9wcyIsInRpdGxlR3JhcGgiLCJuZ09uSW5pdCIsInN1YnNjcmliZSIsIm1lZGlhU3RyaW5nIiwicmVjYWxjdWxhdGVXaWR0aHMiLCJjb2luTmFtZSIsIk9iamVjdCIsIm9mIiwicmVtb3ZlIiwicGlwZSIsIm1hcFRvIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNsYXNzTmFtZSIsInJlbW92ZVN2ZyQiLCJPYnNlcnZhYmxlIiwib2IiLCJsaW5lYTEiLCJ0aXRsZXMiLCJmb3JFYWNoIiwibGluZGF0YSIsIm5hbWUiLCJnZXRUaXRsZXMiLCJtZXJnZU1hcCIsImdldExpbmUxIiwic3dpdGNoTWFwIiwiZGVmaW5lQ2hhcnQkIiwiZnJvbSIsImxpbiIsImRyYXdMaW5lJCIsImRlbGF5IiwiY29uY2F0TWFwIiwiYWRkVG9vbFRpcHMkIiwiYWRkRXZlbnRzQXJlYSIsImNhdGNoRXJyb3IiLCJhZGRUaXRsZUdyYXBoIiwiZGVmaW5lQ2hhcnQiLCJsaW5lR3JhcGhFbGVtZW50Iiwic3ZnVmlld3BvcnQiLCJhcHBlbmQiLCJhdHRyIiwic3R5bGUiLCJ4U2NhbGUiLCJkb21haW4iLCJ0aW1lUHJpY2VBcnJheSIsImdldFRpbWUiLCJyYW5nZSIsImNsYW1wIiwib24iLCJ5U2NhbGUiLCJNYXRoIiwibWF4IiwibWFwIiwidmFsdWUiLCJ4QXhpcyIsInlBeGlzIiwiem9vbSIsInNjYWxlRXh0ZW50IiwiSW5maW5pdHkiLCJ0cmFuc2xhdGVFeHRlbnQiLCJleHRlbnQiLCJ6b29tRnVuY3Rpb24iLCJiaW5kIiwiaW5uZXJTcGFjZSIsImNhbGwiLCJmb3JtYXRFdmVyZCIsImdYIiwidGlja3MiLCJ0aWNrRm9ybWF0IiwiZ1kiLCJvcmlnaW5hbExpbmUiLCJ4IiwieSIsInNjYWxlZExpbmUiLCJuZXd4U2NhbGUiLCJuZXd5U2NhbGUiLCJvbmNsaWNrcmVtb3ZlIiwidmlldyIsIm1vdXNlb3ZlciIsImZvY3VzIiwibW91c2Vtb3ZlIiwidG91Y2hTdGFydCIsInRvdWNoTW92ZSIsImxpbmUiLCJkcmF3TGluZSIsInBvaW50IiwiZXh0ZXJuYWxfbW9tZW50XyIsInRvRGF0ZSIsImxpbmVTdmciLCJkYXR1bSIsInRyYW5zZm9ybSIsInJlc2NhbGVYIiwicmVzY2FsZVkiLCJzY2FsZSIsImQzZXZlbnR0cmFuc2Zvcm0iLCJjaGFuZ2VMaW5lIiwibW92ZVRvb2xUaXAiLCJ0aXRsZVN2ZyIsInRleHQiLCJhZGRUb29sVGlwcyIsInRleHRUb29sVGlwIiwiZm9ybWF0IiwiZW52aXJvbm1lbnQiLCJ0b29sdGlwVGltZUZvcm1hdCIsInJvdW5kIiwidG9Mb2NhbGVTdHJpbmciLCJqIiwibm9kZXMiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsIngwIiwiaW52ZXJ0IiwiaSIsImQwIiwiYUxlbmd0aCIsImxlbmd0aCIsImQxIiwiZGlzdGFuY2lheCIsImdldERhdGFQb2ludCIsInNlbGVjdEFsbCIsImNhbGN1bGF0ZUJib3giLCJiYm94IiwidHh0Tm9kZSIsIm5vZGUiLCJpbnNlcnRCZWZvcmUiLCJuZXd5MiIsInNlbGVjdCIsImdldEJCb3giXSwibWFwcGluZ3MiOiI0TEE4Q2UsSUFBQUEsRUE1Q3VDLENBQ2xEQyxLQUFNLFdBQ05DLFNBQVUsaUJBQ1ZDLEtBQU0sQ0FDSixVQUNBLFFBQ0EsU0FDQSxZQUNBLFNBQ0EsVUFDQSxVQUVGQyxPQUFRLENBQ0osUUFDQSxVQUNBLFFBQ0EsUUFDQSxPQUNBLFFBQ0EsUUFDQSxTQUNBLGFBQ0EsVUFDQSxZQUNBLGFBRUpDLFFBQVMsQ0FBQyxLQUFNLE1BQ2hCQyxVQUFXLENBQUMsS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sTUFDaERDLFlBQWEsQ0FDVCxNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsT0FFSkMsS0FBTSxtQkMzQ1YsTUFBTUMsRUFBZSxVQUFJLEdBRW5CQyxFQUFlQyxJQUNiQSxFQUFXQyxVQUNYQyxRQUFRQyxJQUFJSCxHQUNaRixFQUFhTSxLQUFLSixFQUFXSyxTQUsvQkMsRUFBYUMsT0FBT0MsV0FBVyx1QkFDL0JDLEVBQVlGLE9BQU9DLFdBQVcsc0JBQzlCRSxFQUFZSCxPQUFPQyxXQUFXLHNCQUM5QkcsRUFBWUosT0FBT0MsV0FBVyxzQkFFcENGLEVBQVdNLFlBQVliLEdBQ3ZCVSxFQUFVRyxZQUFZYixHQUN0QlcsRUFBVUUsWUFBWWIsR0FDdEJZLEVBQVVD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QUttRyxNQUNieEMsT0FBTyxRQUNQQyxLQUFLLElBQUs1RCxLQUFLNkksS0FBS2xELEdBQ3BCL0IsS0FBSyxJQUFLNUQsS0FBSzZJLEtBQUtqRCxHQUNwQmhDLEtBQUssUUFBUzVELEtBQUs2SSxLQUFLaEksT0FDeEIrQyxLQUFLLFNBQVU1RCxLQUFLNkksS0FBSy9ILFFBQ3pCK0MsTUFBTSxPQUFRLFNBQ2RBLE1BQU0sZUFBZ0IsTUFDdEJBLE1BQU0sU0FBVSxRQUNoQkEsTUFBTSxlQUFnQixTQUUzQjdELEtBQUs4SSxRQUFVOUksS0FBS3dILFlBQVl1QixPQUVoQy9JLEtBQUttRyxNQUFNNEMsT0FBT0MsYUFBYWhKLEtBQUs4SSxRQUFTLE1BRTdDLElBQUlHLEVBQVEsRUFHUkEsRUFEQWpKLEtBQUsrRixVQUNHL0YsS0FBSytGLFVBQVUvRixLQUFLTixFQUFFTyxPQUV0QkQsS0FBS21CLFdBQVdrRCxPQUFPckUsS0FBS04sRUFBRU8sT0FLMUNELEtBQUttRyxNQUNBK0MsT0FBTyxpQkFDUHRGLEtBQUssS0FBTTVELEtBQUtjLE9BQVNtSSxHQUc5QmpKLEtBQUttRyxNQUFNK0MsT0FBTyxpQkFBaUJ0RixLQUFLLE1BQVE1RCxLQUFLeUksWUFFbEQzSSxvQkFDSEUsS0FBS29ILGNBR0Z0SCxnQkFjSCxPQVpBRSxLQUFLOEksUUFBVTlJLEtBQUt3SCxZQUFZdUIsT0FDaEMvSSxLQUFLNkksS0FBTzdJLEtBQUs4SSxRQUFRSyxVQUVyQm5KLEtBQUs2SSxLQUFLaEksTUFBUSxHQUFLYixLQUFLeUksWUFDNUJ6SSxLQUFLd0gsWUFDSjVELEtBQUssY0FBZSxTQUNyQjVELEtBQUs2SSxLQUFPN0ksS0FBSzhJLFFBQVFLLFdBRXpCbkosS0FBS3dILFlBQ0o1RCxLQUFLLGNBQWUsT0FHbEI1RCxLQUFLNkkiLCJmaWxlIjoiZDNoaXN0b3J5Z3JhcGguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUaW1lTG9jYWxlRGVmaW5pdGlvbiB9IGZyb20gJ2QzJztcblxuY29uc3QgdGltZWZvcm1hdGRlZmF1bHRsb2NhbGU6IFRpbWVMb2NhbGVEZWZpbml0aW9uID0ge1xuICAgIGRhdGU6ICclZC4lbS4lWScsXG4gICAgZGF0ZVRpbWU6ICclYSAlYiAlZSAlWCAlWScsXG4gICAgZGF5czogW1xuICAgICAgJ0RvbWluZ28nLFxuICAgICAgJ0x1bmVzJyxcbiAgICAgICdNYXJ0ZXMnLFxuICAgICAgJ01pw6lyY29sZXMnLFxuICAgICAgJ0p1ZXZlcycsXG4gICAgICAnVmllcm5lcycsXG4gICAgICAnU8OhYmFkbycsXG4gICAgXSxcbiAgICBtb250aHM6IFtcbiAgICAgICAgJ0VuZXJvJyxcbiAgICAgICAgJ0ZlYnJlcm8nLFxuICAgICAgICAnTWFyem8nLFxuICAgICAgICAnQWJyaWwnLFxuICAgICAgICAnTWF5bycsXG4gICAgICAgICdKdW5pbycsXG4gICAgICAgICdKdWxpbycsXG4gICAgICAgICdBZ29zdG8nLFxuICAgICAgICAnU2VwdGllbWJyZScsXG4gICAgICAgICdPY3R1YnJlJyxcbiAgICAgICAgJ05vdmllbWJyZScsXG4gICAgICAgICdEaWNpZW1icmUnLFxuICAgIF0sXG4gICAgcGVyaW9kczogWydBTScsICdQTSddLFxuICAgIHNob3J0RGF5czogWydEbycsICdMdScsICdNYScsICdNaScsICdKdScsICdWaScsICdTYSddLFxuICAgIHNob3J0TW9udGhzOiBbXG4gICAgICAgICdFbmUnLFxuICAgICAgICAnRmViJyxcbiAgICAgICAgJ01hcicsXG4gICAgICAgICdBYnInLFxuICAgICAgICAnTWF5JyxcbiAgICAgICAgJ0p1bicsXG4gICAgICAgICdKdWwnLFxuICAgICAgICAnQWdvJyxcbiAgICAgICAgJ1NlcCcsXG4gICAgICAgICdPY3QnLFxuICAgICAgICAnTm92JyxcbiAgICAgICAgJ0RpYycsXG4gICAgXSxcbiAgICB0aW1lOiAnJUg6JU06JVMnLFxufTtcbmV4cG9ydCBkZWZhdWx0IHRpbWVmb3JtYXRkZWZhdWx0bG9jYWxlO1xuIiwiaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuY29uc3QgY2hhbmdlV2lkdGgkID0gbmV3IFN1YmplY3Q8c3RyaW5nPigpO1xuXG5jb25zdCBkZXRlY3RXaWR0aCA9IChtZWRpYVFMaXN0OiBNZWRpYVF1ZXJ5TGlzdEV2ZW50KTogYW55ID0+IHtcbiAgICBpZiAobWVkaWFRTGlzdC5tYXRjaGVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKG1lZGlhUUxpc3QpO1xuICAgICAgICBjaGFuZ2VXaWR0aCQubmV4dChtZWRpYVFMaXN0Lm1lZGlhKTtcblxuICAgIH1cbn07XG5cbmNvbnN0IG1RTGlzdDEwMjQgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKG1heC13aWR0aDogMTAyNHB4KScpO1xuY29uc3QgbVFMaXN0NTY4ID0gd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDU2OHB4KScpO1xuY29uc3QgbVFMaXN0MzIwID0gd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDMyMHB4KScpO1xuY29uc3QgbVFMaXN0MzIxID0gd2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDMyMXB4KScpO1xuXG5tUUxpc3QxMDI0LmFkZExpc3RlbmVyKGRldGVjdFdpZHRoKTtcbm1RTGlzdDU2OC5hZGRMaXN0ZW5lcihkZXRlY3RXaWR0aCk7XG5tUUxpc3QzMjAuYWRkTGlzdGVuZXIoZGV0ZWN0V2lkdGgpO1xubVFMaXN0MzIxLmFkZExpc3RlbmVyKGRldGVjdFdpZHRoKTtcblxuZXhwb3J0IGRlZmF1bHQgY2hhbmdlV2lkdGgkO1xuIiwiaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0ICogYXMgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgeyBmcm9tLCBPYnNlcnZhYmxlLCBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciwgY29uY2F0TWFwLCBkZWxheSwgbWFwVG8sIG1lcmdlTWFwLCBzd2l0Y2hNYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgSUNvaW5IaXN0b3J5IGZyb20gJy4vY29pbi1oaXN0b3J5LmludGVyZmFjZSc7XG5pbXBvcnQgdGltZUZvcm1hdERlZmF1bHRMb2NhbGUgZnJvbSAnLi9kMy10aW1lZm9ybWF0ZGVmYXVsdGxvY2FsZSc7XG5pbXBvcnQgSVRpbWVQcmljZSBmcm9tICcuL3RpbWVwcmljZS5pbnRlcmZhY2UnO1xuXG5pbXBvcnQgY29uZmlnIGZyb20gJy4vZW52aXJvbm1lbnQnO1xuXG5pbXBvcnQgY2hhbmdlV2lkdGgkIGZyb20gJy4vcmVzcG9uc2l2ZSc7XG5cbmQzLnRpbWVGb3JtYXREZWZhdWx0TG9jYWxlKHRpbWVGb3JtYXREZWZhdWx0TG9jYWxlKTtcblxuaW50ZXJmYWNlIElTY2FsZXMge1xuICB4U2NhbGU6IGQzLlNjYWxlVGltZTxudW1iZXIsIG51bWJlcj47XG4gIHlTY2FsZTogZDMuU2NhbGVMaW5lYXI8bnVtYmVyLCBudW1iZXI+O1xufVxuXG5leHBvcnQgY2xhc3MgR3JhcGhMaW5lQ29tcG9uZW50IHtcbiAgICBwdWJsaWMgc3RhdGljIHJlbW92ZVN2ZyQoY29pbk5hbWU6IHN0cmluZyk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuICAgICAgICByZXR1cm4gb2YoZDMuc2VsZWN0KGAjJHtjb2luTmFtZX1gKS5yZW1vdmUoKSlcbiAgICAgICAgLnBpcGUoXG4gICAgICAgICAgICBtYXBUbyh0cnVlKSxcbiAgICAgICAgKTtcbiAgICB9XG4gICAgcHVibGljIHR4dE5vZGU6IFNWR1RleHRFbGVtZW50O1xuICAgIHB1YmxpYyBiYm94OiBET01SZWN0O1xuICAgIHB1YmxpYyBkaXN0YW5jaWF4OiBudW1iZXI7XG4gICAgcHVibGljIGQ6IElUaW1lUHJpY2UgPSB7cHJpY2U6IDAsIHRpbWVzdGFtcDogbmV3IERhdGUoKX07XG4gICAgcHVibGljIHBhblg6IGFueTtcbiAgICBwdWJsaWMgcGFuWTogYW55O1xuICAgIHB1YmxpYyBzY2FsZU11bHRpcGxpZXI6IGFueTtcbiAgICAvLyBwdWJsaWMgZDNldmVudHRyYW5zZm9ybTogYW55ID0geyBrOiAxLCB4OiAwLCB5OiAwIH07XG4gICAgcHVibGljIGQzZXZlbnR0cmFuc2Zvcm06IGFueTtcbiAgICAvLyBwdWJsaWMgbmV3eVNjYWxlOiBkMy5BeGlzU2NhbGU8bnVtYmVyIHwgeyB2YWx1ZU9mKCk6IG51bWJlcjsgfT47XG4gICAgLy8gcHVibGljIG5ld3hTY2FsZTogZDMuQXhpc1NjYWxlPG51bWJlciB8IHsgdmFsdWVPZigpOiBudW1iZXI7IH0+O1xuICAgIHB1YmxpYyBuZXd5U2NhbGU6IGFueTsgLy8gYXNpZ25hciBlbiBlbCBjb250cnVjdG9yIG8gZXF1aXZhbGVudGVcbiAgICBwdWJsaWMgbmV3eFNjYWxlOiBhbnk7XG4gICAgcHVibGljIGJpc2VjdERhdGUgPSBkMy5iaXNlY3RvcigoZDogSVRpbWVQcmljZSkgPT4gZC50aW1lc3RhbXApLnJpZ2h0O1xuICAgIHB1YmxpYyBiaXNlY3RWYWx1ZSA9IGQzLmJpc2VjdG9yKChkOiBJVGltZVByaWNlKSA9PiBkLnByaWNlKS5yaWdodDtcbiAgICBwdWJsaWMgc3ZnV2lkdGggPSA4MDA7XG4gICAgcHVibGljIHN2Z0hlaWdodCA9IDMwMDtcbiAgICBwdWJsaWMgbWFyZ2luID0geyB0b3A6IDMwLCByaWdodDogNDAsIGJvdHRvbTogNTAsIGxlZnQ6IDYwIH07XG4gICAgcHVibGljIHdpZHRoID0gdGhpcy5zdmdXaWR0aCAtIHRoaXMubWFyZ2luLmxlZnQgLSB0aGlzLm1hcmdpbi5yaWdodDtcbiAgICBwdWJsaWMgaGVpZ2h0ID0gdGhpcy5zdmdIZWlnaHQgLSB0aGlzLm1hcmdpbi50b3AgLSB0aGlzLm1hcmdpbi5ib3R0b207XG4gICAgcHVibGljIG9yaWdpbmFsTGluZTogZDMuTGluZTxJVGltZVByaWNlPjtcbiAgICBwdWJsaWMgc2NhbGVkTGluZTogZDMuTGluZTxJVGltZVByaWNlPjtcbiAgICBwdWJsaWMgb3JpZ2luYWxDaXJjbGUgPSB7XG4gICAgY3g6IC0xNTAsXG4gICAgY3k6IC0xNSxcbiAgICByOiAyMCxcbiAgICB9O1xuICAgIHB1YmxpYyBjaGFydFByb3BzID0ge30gYXMgSVNjYWxlcztcbiAgICBwdWJsaWMgZ1g6IGQzLlNlbGVjdGlvbjxTVkdHRWxlbWVudCwge30sIG51bGwsIHVuZGVmaW5lZD47XG4gICAgcHVibGljIGdZOiBkMy5TZWxlY3Rpb248U1ZHR0VsZW1lbnQsIHt9LCBudWxsLCB1bmRlZmluZWQ+O1xuICAgIHB1YmxpYyBsaW5lU3ZnOiBkMy5TZWxlY3Rpb248U1ZHR0VsZW1lbnQsIHt9LCBudWxsLCB1bmRlZmluZWQ+O1xuICAgIHB1YmxpYyB2aWV3OiBkMy5TZWxlY3Rpb248U1ZHR0VsZW1lbnQsIHt9LCBudWxsLCB1bmRlZmluZWQ+O1xuICAgIHB1YmxpYyBpbm5lclNwYWNlOiBkMy5TZWxlY3Rpb248U1ZHR0VsZW1lbnQsIHt9LCBudWxsLCB1bmRlZmluZWQ+O1xuICAgIHB1YmxpYyBzdmdWaWV3cG9ydDogZDMuU2VsZWN0aW9uPFNWR0dFbGVtZW50LCB7fSwgbnVsbCwgdW5kZWZpbmVkPjtcbiAgICBwdWJsaWMgdGl0bGVTdmc6IGQzLlNlbGVjdGlvbjxTVkdHRWxlbWVudCwge30sIG51bGwsIHVuZGVmaW5lZD47XG4gICAgcHVibGljIGZvY3VzOiBkMy5TZWxlY3Rpb248U1ZHR0VsZW1lbnQsIHt9LCBudWxsLCB1bmRlZmluZWQ+O1xuICAgIHB1YmxpYyB0ZXh0VG9vbFRpcDogZDMuU2VsZWN0aW9uPFNWR1RleHRFbGVtZW50LCB7fSwgbnVsbCwgdW5kZWZpbmVkPjtcbiAgICBwdWJsaWMgem9vbTogZDMuWm9vbUJlaGF2aW9yPEVsZW1lbnQsIHt9PjtcbiAgICBwdWJsaWMgeEF4aXM6IGQzLkF4aXM8bnVtYmVyIHwgeyB2YWx1ZU9mKCk6IG51bWJlciB9PjtcbiAgICBwdWJsaWMgeUF4aXM6IGQzLkF4aXM8bnVtYmVyIHwgeyB2YWx1ZU9mKCk6IG51bWJlciB9PjtcbiAgICBwdWJsaWMgbGluZUdyYXBoRWxlbWVudDogSFRNTEVsZW1lbnQ7XG4gICAgcHVibGljIGxpbmVhMTogSUNvaW5IaXN0b3J5O1xuICAgIHB1YmxpYyB0aXRsZUdyYXBoID0gJyc7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBsaW5lYXM6IElDb2luSGlzdG9yeVtdLFxuICAgICkge1xuICAgICAgICB0aGlzLm5nT25Jbml0KCk7XG4gICAgICAgIGNoYW5nZVdpZHRoJFxuICAgICAgICAuc3Vic2NyaWJlKChtZWRpYVN0cmluZykgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2RldGVjdGFkbyBjYW1iaW8gZGUgYW5jaG8nLCBtZWRpYVN0cmluZyk7XG4gICAgICAgICAgICB0aGlzLnJlY2FsY3VsYXRlV2lkdGhzKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwdWJsaWMgb25jbGlja3JlbW92ZSgpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7dGhpcy50aXRsZUdyYXBofWRhdGFgKS5jbGFzc05hbWUgPSAnZmlsYSc7XG4gICAgICAgIC8vIGQzLnNlbGVjdChgIyR7dGhpcy50aXRsZUdyYXBofWRhdGFgKS5hdHRyKCdjbGFzcycsICdmaWxhJyk7XG4gICAgICAgIEdyYXBoTGluZUNvbXBvbmVudC5yZW1vdmVTdmckKHRoaXMudGl0bGVHcmFwaCk7XG4gICAgfVxuICAgIHB1YmxpYyBnZXRMaW5lMSgpOiBPYnNlcnZhYmxlPElDb2luSGlzdG9yeT4ge1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGU8SUNvaW5IaXN0b3J5Pigob2IpID0+IHtcbiAgICAgICAgICAgIHRoaXMubGluZWExID0gdGhpcy5saW5lYXNbMF07XG4gICAgICAgICAgICBvYi5uZXh0KHRoaXMubGluZWFzWzBdKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRpdGxlcygpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGU8c3RyaW5nPigob2IpID0+IHtcbiAgICAgICAgICAgIGxldCB0aXRsZXMgPSAnJztcbiAgICAgICAgICAgIHRoaXMubGluZWFzLmZvckVhY2goKGxpbmRhdGEpID0+IHtcbiAgICAgICAgICAgIGlmIChsaW5kYXRhLm5hbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGl0bGVzID09PSAnJykge1xuICAgICAgICAgICAgICAgIHRpdGxlcyA9IGxpbmRhdGEubmFtZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRpdGxlcyA9IHRpdGxlcyArICcgLyAnICsgbGluZGF0YS5uYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy50aXRsZUdyYXBoID0gdGl0bGVzO1xuICAgICAgICAgICAgb2IubmV4dCh0aXRsZXMpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbmdPbkluaXQoKSB7XG5cbiAgICAgICAgLyogdGhpcy5yZW1vdmVTdmckKClcbiAgICAgICAgLnBpcGUoc3dpdGNoTWFwKChvaykgPT4gdGhpcy5nZXRUaXRsZXMoKSlcbiAgICAgICAgKSAqL1xuICAgICAgICB0aGlzLmdldFRpdGxlcygpXG4gICAgICAgIC5waXBlKFxuICAgICAgICAgICAgbWVyZ2VNYXAoKCkgPT4gdGhpcy5nZXRMaW5lMSgpKSxcbiAgICAgICAgICAgIHN3aXRjaE1hcCgoKSA9PiB0aGlzLmRlZmluZUNoYXJ0JCgpKSxcbiAgICAgICAgICAgIHN3aXRjaE1hcCgoKSA9PiBmcm9tKHRoaXMubGluZWFzKSksXG4gICAgICAgICAgICBtZXJnZU1hcCgobGluKSA9PiB0aGlzLmRyYXdMaW5lJChsaW4pKSxcbiAgICAgICAgICAgIGRlbGF5KDEwMDApLFxuICAgICAgICAgICAgY29uY2F0TWFwKCgpID0+IHRoaXMuYWRkVG9vbFRpcHMkKCkpLFxuICAgICAgICAgICAgY29uY2F0TWFwKCgpID0+IHRoaXMuYWRkRXZlbnRzQXJlYSgpKSxcbiAgICAgICAgICAgIGNhdGNoRXJyb3IoKCkgPT4gb2YoJ2Vycm9yJykpLFxuICAgICAgICApXG4gICAgICAgIC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICB0aGlzLmFkZFRpdGxlR3JhcGgoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHB1YmxpYyBkZWZpbmVDaGFydCQoKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XG4gICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZTxib29sZWFuPigob2IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lQ2hhcnQoKTtcbiAgICAgICAgICAgIG9iLm5leHQodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwdWJsaWMgZGVmaW5lQ2hhcnQoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aXRsZUdyYXBoOiAnLCB0aGlzLnRpdGxlR3JhcGgpO1xuICAgICAgICB0aGlzLmxpbmVHcmFwaEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGluZWNoYXJ0Jyk7XG4gICAgICAgIHRoaXMuc3ZnVmlld3BvcnQgPSBkM1xuICAgICAgICAuc2VsZWN0KHRoaXMubGluZUdyYXBoRWxlbWVudClcbiAgICAgICAgLmFwcGVuZCgnc3ZnJylcbiAgICAgICAgLmF0dHIoJ2lkJywgdGhpcy50aXRsZUdyYXBoKVxuICAgICAgICAuc3R5bGUoJ2JhY2tncm91bmQnLCAnd2hpdGUnKVxuICAgICAgICAuYXR0cigndmlld0JveCcsIGAwIDAgJHt0aGlzLnN2Z1dpZHRofSAke3RoaXMuc3ZnSGVpZ2h0fWApO1xuICAgICAgICB0aGlzLmNoYXJ0UHJvcHMueFNjYWxlID0gZDNcbiAgICAgICAgLnNjYWxlVGltZSgpXG4gICAgICAgIC5kb21haW4oZDMuZXh0ZW50KHRoaXMubGluZWExLnRpbWVQcmljZUFycmF5LCAoZCkgPT4gbmV3IERhdGUoZC50aW1lc3RhbXApLmdldFRpbWUoKSkpXG4gICAgICAgIC5yYW5nZShbMCwgdGhpcy53aWR0aF0pXG4gICAgICAgIC5jbGFtcCh0cnVlKTtcblxuICAgICAgICAvLyBkZXNhY3Rpdm8gZWwgem9vbSBkZWwgc3ZnIHBhcmEgcXVlXG4gICAgICAgIC8vIG5vIGludGVyZmllcmEgY29uIGVsIHpvb20gZGVsIGxpbmVzdmdcbiAgICAgICAgdGhpcy5zdmdWaWV3cG9ydC5vbignbW91c2Vkb3duLnpvb20nLCBudWxsKVxuICAgICAgICAub24oJ3RvdWNoc3RhcnQuem9vbScsIG51bGwpXG4gICAgICAgIC5vbigndG91Y2htb3ZlLnpvb20nLCBudWxsKVxuICAgICAgICAub24oJ3RvdWNoZW5kLnpvb20nLCBudWxsKTtcblxuICAgICAgICB0aGlzLmNoYXJ0UHJvcHMueVNjYWxlID0gZDNcbiAgICAgICAgLnNjYWxlTGluZWFyKClcbiAgICAgICAgLmRvbWFpbihbXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgZDMubWF4KFxuICAgICAgICAgICAgICAgIHRoaXMubGluZWFzLFxuICAgICAgICAgICAgICAgIChkKSA9PiBNYXRoLm1heCguLi5kLnRpbWVQcmljZUFycmF5Lm1hcCgodmFsdWUpID0+IHZhbHVlLnByaWNlKSkgKiAxLjEsXG4gICAgICAgICAgICApLFxuICAgICAgICBdKVxuICAgICAgICAucmFuZ2UoW3RoaXMuaGVpZ2h0LCAwXSlcbiAgICAgICAgLmNsYW1wKHRydWUpO1xuXG4gICAgICAgIHRoaXMueEF4aXMgPSBkMy5heGlzQm90dG9tKHRoaXMuY2hhcnRQcm9wcy54U2NhbGUpO1xuICAgICAgICB0aGlzLnlBeGlzID0gZDMuYXhpc0xlZnQodGhpcy5jaGFydFByb3BzLnlTY2FsZSk7XG4gICAgICAgIHRoaXMuem9vbSA9IGQzLnpvb20oKVxuICAgICAgICAuc2NhbGVFeHRlbnQoWzEsIEluZmluaXR5XSlcbiAgICAgICAgLnRyYW5zbGF0ZUV4dGVudChbWzAsIDBdLCBbdGhpcy53aWR0aCwgdGhpcy5oZWlnaHRdXSlcbiAgICAgICAgLmV4dGVudChbWzAsIDBdLCBbdGhpcy53aWR0aCwgdGhpcy5oZWlnaHRdXSlcbiAgICAgICAgLm9uKCd6b29tJywgdGhpcy56b29tRnVuY3Rpb24uYmluZCh0aGlzKSk7XG5cbiAgICAgICAgdGhpcy5pbm5lclNwYWNlID0gdGhpcy5zdmdWaWV3cG9ydFxuICAgICAgICAuYXBwZW5kKCdnJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2lubmVyX3NwYWNlJylcbiAgICAgICAgLmF0dHIoXG4gICAgICAgICd0cmFuc2Zvcm0nLFxuICAgICAgICAndHJhbnNsYXRlKCcgKyB0aGlzLm1hcmdpbi5sZWZ0ICsgJywnICsgdGhpcy5tYXJnaW4udG9wICsgJyknLFxuICAgICAgICApXG4gICAgICAgIC5jYWxsKHRoaXMuem9vbS5iaW5kKHRoaXMpKTtcbiAgICAgICAgY29uc3QgZm9ybWF0RXZlcmQgPSBkMy50aW1lRm9ybWF0KCclZC8lbSAlSDolTScpO1xuICAgICAgICB0aGlzLmdYID0gdGhpcy5pbm5lclNwYWNlXG4gICAgICAgICAgICAuYXBwZW5kKCdnJylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdheGlzIGF4aXMtLXgnKVxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoMCwnICsgdGhpcy5oZWlnaHQgKyAnKScpXG4gICAgICAgICAgICAuY2FsbCh0aGlzLnhBeGlzLnRpY2tzKDYpLnRpY2tGb3JtYXQoZm9ybWF0RXZlcmQpKTtcblxuICAgICAgICB0aGlzLmdZID0gdGhpcy5pbm5lclNwYWNlXG4gICAgICAgICAgICAuYXBwZW5kKCdnJylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdheGlzIGF4aXMtLXknKVxuICAgICAgICAgICAgLmNhbGwodGhpcy55QXhpcyk7XG5cbiAgICAgICAgdGhpcy5vcmlnaW5hbExpbmUgPSBkM1xuICAgICAgICAgICAgLmxpbmU8SVRpbWVQcmljZT4oKVxuICAgICAgICAgICAgLngoKGQpID0+IHtcbiAgICAgICAgICAgIGlmIChkLnRpbWVzdGFtcCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZC5kYXRlOiAnLCBkLmRhdGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYXJ0UHJvcHMueFNjYWxlKGQudGltZXN0YW1wLmdldFRpbWUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnkoKGQpID0+IHRoaXMuY2hhcnRQcm9wcy55U2NhbGUoZC5wcmljZSkpO1xuXG4gICAgICAgIHRoaXMuc2NhbGVkTGluZSA9IGQzXG4gICAgICAgIC5saW5lPElUaW1lUHJpY2U+KClcbiAgICAgICAgLngoKGQpID0+IHtcbiAgICAgICAgaWYgKGQudGltZXN0YW1wIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2QuZGF0ZTogJywgZC5kYXRlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5ld3hTY2FsZShkLnRpbWVzdGFtcC5nZXRUaW1lKCkpO1xuICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC55KChkKSA9PiB0aGlzLm5ld3lTY2FsZShkLnByaWNlKSk7XG5cbiAgICAgICAgY29uc3QgcmVtb3ZlUmVjdGFuZ2xlID0gdGhpcy5zdmdWaWV3cG9ydFxuICAgICAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgLmF0dHIoJ3gnLCA1KVxuICAgICAgICAuYXR0cigneScsIDUpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIDMwKVxuICAgICAgICAuYXR0cignaGVpZ2h0JywgMzApXG4gICAgICAgIC5hdHRyKCdmaWxsJywgJ3JlZCcpXG4gICAgICAgIC5vbignY2xpY2snLCB0aGlzLm9uY2xpY2tyZW1vdmUuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgY29uc3QgcmVtb3ZlQXNwYTEgPSB0aGlzLnN2Z1ZpZXdwb3J0XG4gICAgICAgIC5hcHBlbmQoJ2xpbmUnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAnYXNwYXMnKVxuICAgICAgICAuYXR0cigneDEnLCAzNSlcbiAgICAgICAgLmF0dHIoJ3gyJywgNSlcbiAgICAgICAgLmF0dHIoJ3kxJywgNSlcbiAgICAgICAgLmF0dHIoJ3kyJywgMzUpXG4gICAgICAgIC5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XG5cbiAgICAgICAgY29uc3QgcmVtb3ZlQXNwYTIgPSB0aGlzLnN2Z1ZpZXdwb3J0XG4gICAgICAgIC5hcHBlbmQoJ2xpbmUnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAnYXNwYXMnKVxuICAgICAgICAuYXR0cigneDEnLCA1KVxuICAgICAgICAuYXR0cigneDInLCAzNSlcbiAgICAgICAgLmF0dHIoJ3kxJywgNSlcbiAgICAgICAgLmF0dHIoJ3kyJywgMzUpXG4gICAgICAgIC5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XG5cbiAgICAgICAgLyogZDMueG1sKGAke2NvbmZpZy51cmxTZXJ2ZXJ9L2Nsb3NlaWNvbi5zdmdgKVxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgcmVtb3ZlSWNvbi5ub2RlKCkuYXBwZW5kKGRhdGEuZG9jdW1lbnRFbGVtZW50KTtcbiAgICAgICAgfSk7ICovXG4gICAgfVxuICAgIHB1YmxpYyBhZGRFdmVudHNBcmVhKCk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGU8Ym9vbGVhbj4oKG9iKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLmlubmVyU3BhY2VcbiAgICAgICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3pvb20nKVxuICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgdGhpcy53aWR0aClcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCB0aGlzLmhlaWdodClcbiAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgdGhpcy5tb3VzZW92ZXIuYmluZCh0aGlzKSlcbiAgICAgICAgICAgIC5vbignbW91c2VvdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1cy5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdtb3VzZW1vdmUnLCB0aGlzLm1vdXNlbW92ZS5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgLm9uKCd0b3VjaHN0YXJ0JywgdGhpcy50b3VjaFN0YXJ0LmJpbmQodGhpcykpXG4gICAgICAgICAgICAub24oJ3RvdWNobW92ZScsIHRoaXMudG91Y2hNb3ZlLmJpbmQodGhpcykpXG4gICAgICAgICAgICAub24oJ3RvdWNoZW5kJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMuc3R5bGUoJ2Rpc3BsYXknLCBudWxsKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBvYi5uZXh0KHRydWUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcHVibGljIGRyYXdMaW5lJChsaW5lOiBJQ29pbkhpc3RvcnkpIHtcbiAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZTxJQ29pbkhpc3Rvcnk+KChvYikgPT4ge1xuICAgICAgICAgIHRoaXMuZHJhd0xpbmUobGluZSk7XG4gICAgICAgICAgb2IubmV4dChsaW5lKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBwdWJsaWMgZHJhd0xpbmUobGluZTogSUNvaW5IaXN0b3J5KSB7XG4gICAgICAgIGxpbmUudGltZVByaWNlQXJyYXkuZm9yRWFjaCgocG9pbnQpID0+IHtcbiAgICAgICAgICAgIHBvaW50LnRpbWVzdGFtcCA9IG1vbWVudChwb2ludC50aW1lc3RhbXApLnRvRGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5saW5lU3ZnID0gdGhpcy5pbm5lclNwYWNlXG4gICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcbiAgICAgICAgICAgIC5kYXR1bShsaW5lLnRpbWVQcmljZUFycmF5KVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xpbmVncmFwaCcpXG4gICAgICAgICAgICAvLyAuc3R5bGUoJ3N0cm9rZScsIGNvbG9yX2NvZGUpIC8vIGHDsWFkaXIgYXF1w60gZWwgY29sb3IgcXVlIHZpZW5lIGRlIGxvcyBkYXRvcyBkZSBsYSBsaW5lYVxuICAgICAgICAgICAgLnN0eWxlKCdzdHJva2UnLCAnYmxhY2snKVxuICAgICAgICAgICAgLmF0dHIoJ2QnLCB0aGlzLm9yaWdpbmFsTGluZS5iaW5kKHRoaXMpKGxpbmUudGltZVByaWNlQXJyYXkpKTtcbiAgICB9XG4gICAgcHVibGljIHpvb21GdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5uZXd4U2NhbGUgPSBkMy5ldmVudC50cmFuc2Zvcm0ucmVzY2FsZVgodGhpcy5jaGFydFByb3BzLnhTY2FsZSk7XG4gICAgICAgIHRoaXMubmV3eVNjYWxlID0gZDMuZXZlbnQudHJhbnNmb3JtLnJlc2NhbGVZKHRoaXMuY2hhcnRQcm9wcy55U2NhbGUpO1xuICAgICAgICAvLyB1cGRhdGUgYXhlc1xuICAgICAgICB0aGlzLmdYLmNhbGwodGhpcy54QXhpcy5zY2FsZSh0aGlzLm5ld3hTY2FsZSkpO1xuICAgICAgICB0aGlzLmdZLmNhbGwodGhpcy55QXhpcy5zY2FsZSh0aGlzLm5ld3lTY2FsZSkpO1xuICAgICAgICB0aGlzLmxpbmVTdmcuY2FsbCh0aGlzLnhBeGlzLnNjYWxlKHRoaXMubmV3eFNjYWxlKSk7XG4gICAgICAgIHRoaXMubGluZVN2Zy5jYWxsKHRoaXMueUF4aXMuc2NhbGUodGhpcy5uZXd5U2NhbGUpKTtcblxuICAgICAgICB0aGlzLmQzZXZlbnR0cmFuc2Zvcm0gPSBkMy5ldmVudC50cmFuc2Zvcm07XG4gICAgICAgIC8vIHRoaXMubGluZVN2Zy5hdHRyKCd0cmFuc2Zvcm0nLCB0aGlzLmQzZXZlbnR0cmFuc2Zvcm0pO1xuXG4gICAgICAgIC8vIHRoaXMuY2hhcnRQcm9wcy54U2NhbGUuZG9tYWluKG5ld0RvbWFpblgpO1xuICAgICAgICAvLyB0aGlzLmNoYXJ0UHJvcHMueVNjYWxlLmRvbWFpbihkMy5ldmVudC50cmFuc2Zvcm0ucmVzY2FsZVkodGhpcy5jaGFydFByb3BzLnlTY2FsZS5kb21haW4oKSkpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnc2UgZXNjYWxhJyk7XG5cbiAgICAgICAgdGhpcy5jaGFuZ2VMaW5lKCk7XG5cbiAgICAgICAgdGhpcy5tb3ZlVG9vbFRpcCgpO1xuXG4gICAgfVxuXG4gICAgcHVibGljIGNoYW5nZUxpbmUoKSB7XG4gICAgICAgIHRoaXMubGluZVN2Z1xuICAgICAgICAuYXR0cignZCcsIHRoaXMuc2NhbGVkTGluZS5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICAvLyBjcmVhbW9zIGxhcyBmdW5jaW9uZXMgcXVlIGNyZWFuIGxvcyBjaXJjdWxvcyB5IGxvcyB0b29sdGlwc1xuXG4gICAgcHVibGljIGFkZFRpdGxlR3JhcGgoKSB7XG4gICAgICAvLyBlc3RlIGVzIGVsIHTDrXR1bG8gcXVlIGRlYmVyw61hIGFwYXJlY2VyIGRlYmFqbyBkZSBsYSBncsOhZmljYVxuICAgICAgLy8gY29ycmVnaW1vcyBlbCBtYXJnZW4gdG9wXG4gICAgICAvLyBjb25zdCBkaXN0VGV4dFRvcCA9IHRoaXMuaGVpZ2h0ICsgdGhpcy5tYXJnaW4udG9wO1xuICAgICAgY29uc3QgZGlzdFRleHRUb3AgPSAyNjA7XG4gICAgICAvLyBjb25zb2xlLmxvZygnZGlzdFRleHRUb3A6ICcsIGRpc3RUZXh0VG9wKTtcbiAgICAgIHRoaXMudGl0bGVTdmcgPSB0aGlzLmlubmVyU3BhY2VcbiAgICAgIC5hcHBlbmQoJ3RleHQnKVxuICAgICAgLmF0dHIoJ3gnLCB0aGlzLm1hcmdpbi5sZWZ0KVxuICAgICAgLy8gLmF0dHIoJ3knLCAwIC0gdGhpcy5tYXJnaW4udG9wIC8gNClcbiAgICAgIC5hdHRyKCd5JywgZGlzdFRleHRUb3ApXG4gICAgICAuYXR0cignY2xhc3MnLCAnZ3JhcGhpY190aXRsZV90ZXh0JylcbiAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdzdGFydCcpXG4gICAgICAudGV4dCh0aGlzLnRpdGxlR3JhcGgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRUb29sVGlwcyQoKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XG4gICAgICByZXR1cm4gbmV3IE9ic2VydmFibGU8Ym9vbGVhbj4oKG9iKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRUb29sVGlwcygpO1xuICAgICAgICAgIG9iLm5leHQodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcHVibGljIGFkZFRvb2xUaXBzKCkge1xuICAgICAgICB0aGlzLmZvY3VzID0gdGhpcy5pbm5lclNwYWNlXG4gICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAndGhpcy5mb2N1cycpXG4gICAgICAgIC5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG5cbiAgICAgICAgdGhpcy5mb2N1c1xuICAgICAgICAuYXBwZW5kKCdsaW5lJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3gtaG92ZXItbGluZSBob3Zlci1saW5lJylcbiAgICAgICAgLmF0dHIoJ3kxJywgMClcbiAgICAgICAgLmF0dHIoJ3kyJywgdGhpcy5oZWlnaHQpXG4gICAgICAgIC5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XG5cbiAgICAgICAgdGhpcy5mb2N1c1xuICAgICAgICAuYXBwZW5kKCdsaW5lJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3ktaG92ZXItbGluZSBob3Zlci1saW5lJylcbiAgICAgICAgLmF0dHIoJ3gxJywgMClcbiAgICAgICAgLmF0dHIoJ3gyJywgdGhpcy53aWR0aClcbiAgICAgICAgLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcblxuICAgICAgICB0aGlzLmZvY3VzXG4gICAgICAgIC5hcHBlbmQoJ2NpcmNsZScpXG4gICAgICAgIC5hdHRyKCdyJywgMilcbiAgICAgICAgLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcblxuICAgICAgICB0aGlzLnRleHRUb29sVGlwID0gdGhpcy5mb2N1c1xuICAgICAgICAuYXBwZW5kKCd0ZXh0JylcbiAgICAgICAgLmF0dHIoJ2lkJywgJ3RleHRUb29sVGlwJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3RleHRfdG9vbHRpcCcpXG4gICAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdlbmQnKVxuICAgICAgICAuYXR0cigneScsIC0yMClcbiAgICAgICAgLmF0dHIoJ2R5JywgJy4zMWVtJyk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldERhdGFQb2ludCgpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy5kKSB7XG4gICAgICAgICAgICBjb25zdCBob3JhID0gbW9tZW50KHRoaXMuZC50aW1lc3RhbXApLmZvcm1hdChjb25maWcudG9vbHRpcFRpbWVGb3JtYXQpO1xuICAgICAgICAgICAgY29uc3QgcHJlY2lvUmVkb25kZWFkbyA9IE1hdGgucm91bmQodGhpcy5kLnByaWNlICogMTAwKSAvIDEwMDtcbiAgICAgICAgICAgIGNvbnN0IHByZWNpb1RvTG9jYWxlID0gcHJlY2lvUmVkb25kZWFkby50b0xvY2FsZVN0cmluZygpO1xuICAgICAgICAgICAgcmV0dXJuIGAke2hvcmF9OiAke3ByZWNpb1RvTG9jYWxlfeKCrGA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJ25vIGRhdGEnO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyB0b3VjaE1vdmUoZGF0dW06IGFueSwgajogYW55LCBub2RlczogYW55KSB7XG4gICAgICAgIGQzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBjb25zdCBkID0gZDMudG91Y2hlcyhub2Rlc1tqXSk7XG5cbiAgICAgICAgdGhpcy5mb2N1cy5zdHlsZSgnZGlzcGxheScsIG51bGwpO1xuICAgICAgICB0aGlzLm1vdXNlbW92ZShkYXR1bSwgaiwgbm9kZXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyB0b3VjaFN0YXJ0KGRhdHVtOiBhbnksIGo6IGFueSwgbm9kZXM6IGFueSkge1xuICAgICAgICBkMy5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgY29uc3QgZCA9IGQzLnRvdWNoZXMobm9kZXNbal0pO1xuXG4gICAgICAgIHRoaXMuZm9jdXMuc3R5bGUoJ2Rpc3BsYXknLCBudWxsKTtcbiAgICAgICAgdGhpcy5tb3VzZW1vdmUoZGF0dW0sIGosIG5vZGVzKTtcblxuICAgICAgICAvLyBkID0gZDMudG91Y2hlcyh0aGlzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbW91c2VvdmVyKGRhdHVtOiBhbnksIGo6IGFueSwgbm9kZXM6IGFueSkge1xuICAgICAgICBkMy5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIC8vIGQgPSBkMy50b3VjaGVzKHRoaXMpO1xuICAgICAgICB0aGlzLmZvY3VzLnN0eWxlKCdkaXNwbGF5JywgbnVsbCk7XG4gICAgICAgIHRoaXMubW91c2Vtb3ZlKGRhdHVtLCBqLCBub2Rlcyk7XG4gICAgfVxuXG4gICAgcHVibGljIG1vdXNlbW92ZShkYXR1bTogYW55LCBqOiBhbnksIG5vZGVzOiBhbnkpIHtcbiAgICAgICAgbGV0IHgwO1xuICAgICAgICBpZiAodGhpcy5uZXd4U2NhbGUpIHtcbiAgICAgICAgICAgIHgwID0gdGhpcy5uZXd4U2NhbGUuaW52ZXJ0KGQzLm1vdXNlKG5vZGVzW2pdKVswXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB4MCA9IHRoaXMuY2hhcnRQcm9wcy54U2NhbGUuaW52ZXJ0KGQzLm1vdXNlKG5vZGVzW2pdKVswXSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaSA9IHRoaXMuYmlzZWN0RGF0ZSh0aGlzLmxpbmVhMS50aW1lUHJpY2VBcnJheSwgeDAsIDEpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnaTogJywgaSk7XG5cbiAgICAgICAgY29uc3QgZDAgPSB0aGlzLmxpbmVhMS50aW1lUHJpY2VBcnJheVtpIC0gMV07XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdkMDogJywgZDApO1xuXG4gICAgICAgIGNvbnN0IGFMZW5ndGggPSB0aGlzLmxpbmVhMS50aW1lUHJpY2VBcnJheS5sZW5ndGg7XG4gICAgICAgIGxldCBkMTogSVRpbWVQcmljZTtcbiAgICAgICAgaWYgKGkgPj0gdGhpcy5saW5lYTEudGltZVByaWNlQXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgICBkMSA9IHRoaXMubGluZWExLnRpbWVQcmljZUFycmF5W2FMZW5ndGggLSAxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGQxID0gdGhpcy5saW5lYTEudGltZVByaWNlQXJyYXlbaV07XG4gICAgICAgIH1cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2QxOiAnLCBkMSk7XG5cbiAgICAgICAgdGhpcy5kID1cbiAgICAgICAgICAgIHgwLmdldFRpbWUoKSAtIChkMC50aW1lc3RhbXAgYXMgRGF0ZSkuZ2V0VGltZSgpID5cbiAgICAgICAgICAgIChkMS50aW1lc3RhbXAgYXMgRGF0ZSkuZ2V0VGltZSgpIC0geDAuZ2V0VGltZSgpXG4gICAgICAgICAgICA/IGQxXG4gICAgICAgICAgICA6IGQwO1xuICAgICAgICB0aGlzLm1vdmVUb29sVGlwKCk7XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgbW92ZVRvb2xUaXAoKSB7XG4gICAgICAgIGlmICh0aGlzLm5ld3hTY2FsZSkge1xuICAgICAgICAgICAgdGhpcy5mb2N1c1xuICAgICAgICAgICAgLmF0dHIoXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybScsXG4gICAgICAgICAgICAgICAgYHRyYW5zbGF0ZSgke3RoaXMubmV3eFNjYWxlKFxuICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZSh0aGlzLmQudGltZXN0YW1wKSxcbiAgICAgICAgICAgICAgICApfSwke3RoaXMubmV3eVNjYWxlKHRoaXMuZC5wcmljZSl9KWApO1xuXG4gICAgICAgICAgICB0aGlzLmRpc3RhbmNpYXggPSB0aGlzLm5ld3hTY2FsZShuZXcgRGF0ZSh0aGlzLmQudGltZXN0YW1wKSk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZGlzdGFuY2lheDogJywgZGlzdGFuY2lheCk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNcbiAgICAgICAgICAgIC5hdHRyKFxuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nLFxuICAgICAgICAgICAgICAgIGB0cmFuc2xhdGUoJHt0aGlzLmNoYXJ0UHJvcHMueFNjYWxlKFxuICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZSh0aGlzLmQudGltZXN0YW1wKSxcbiAgICAgICAgICAgICAgICApfSwke3RoaXMuY2hhcnRQcm9wcy55U2NhbGUodGhpcy5kLnByaWNlKX0pYCk7XG5cbiAgICAgICAgICAgIHRoaXMuZGlzdGFuY2lheCA9IHRoaXMuY2hhcnRQcm9wcy54U2NhbGUobmV3IERhdGUodGhpcy5kLnRpbWVzdGFtcCkpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2Rpc3RhbmNpYXg6ICcsIGRpc3RhbmNpYXgpO1xuXG4gICAgICAgIH1cblxuICAgICAgICAvKiBpZiAodGhpcy5kM2V2ZW50dHJhbnNmb3JtKSB7XG4gICAgICAgICAgdGhpcy5mb2N1cy5hdHRyKFxuICAgICAgICAgICAgJ3RyYW5zZm9ybScsXG4gICAgICAgICAgICB0aGlzLmQzZXZlbnR0cmFuc2Zvcm1cbiAgICAgICAgICApXG4gICAgICAgIH0gKi9cbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jaGFydFByb3BzLnhTY2FsZShuZXcgRGF0ZShkLmRhdGUpKSk7XG5cbiAgICAgICAgdGhpcy50ZXh0VG9vbFRpcFxuICAgICAgICAudGV4dCh0aGlzLmdldERhdGFQb2ludC5iaW5kKHRoaXMpKTtcblxuICAgICAgICAvLyBjb21wcm9iYXIgcXVlIHNlIHB1ZWRlIG1vdmVyIGVuIHZleiBkZSBlbGltaW5hciB5IGNyZWFyXG4gICAgICAgIHRoaXMuZm9jdXMuc2VsZWN0QWxsKCdyZWN0JykucmVtb3ZlKCk7XG5cbiAgICAgICAgLy8gc2kgbm8gZnVuY2lvbmEgbWV0ZXIgZW4gdW4gb2JzZXJ2YWJsZVxuICAgICAgICB0aGlzLmNhbGN1bGF0ZUJib3goKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3RoaXMuYmJveCBlbiBtb3ZlVG9vbHRpcDogJywgdGhpcy5iYm94KTtcblxuICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5mb2N1c1xuICAgICAgICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAgICAgICAuYXR0cigneCcsIHRoaXMuYmJveC54KVxuICAgICAgICAgICAgLmF0dHIoJ3knLCB0aGlzLmJib3gueSlcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHRoaXMuYmJveC53aWR0aClcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCB0aGlzLmJib3guaGVpZ2h0KVxuICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgJ3doaXRlJylcbiAgICAgICAgICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JywgJy45JylcbiAgICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgJyM2NjYnKVxuICAgICAgICAgICAgLnN0eWxlKCdzdHJva2Utd2lkdGgnLCAnMC41cHgnKTtcblxuICAgICAgICB0aGlzLnR4dE5vZGUgPSB0aGlzLnRleHRUb29sVGlwLm5vZGUoKSBhcyBTVkdUZXh0RWxlbWVudDtcblxuICAgICAgICB0aGlzLmZvY3VzLm5vZGUoKS5pbnNlcnRCZWZvcmUodGhpcy50eHROb2RlLCBudWxsKTtcblxuICAgICAgICBsZXQgbmV3eTIgPSAwO1xuXG4gICAgICAgIGlmICh0aGlzLm5ld3lTY2FsZSkge1xuICAgICAgICAgICAgbmV3eTIgPSB0aGlzLm5ld3lTY2FsZSh0aGlzLmQucHJpY2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3eTIgPSB0aGlzLmNoYXJ0UHJvcHMueVNjYWxlKHRoaXMuZC5wcmljZSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGVzY2FsbyBsYSBwb3NpY2lvbiB5MiBkZSBsYSBsw61uZWEgc2Vnw7puIGxhIG51ZXZhIGVzY2FsYSBzaSBzZSBoYSBoZWNobyB6b29tXG4gICAgICAgIHRoaXMuZm9jdXNcbiAgICAgICAgICAgIC5zZWxlY3QoJy54LWhvdmVyLWxpbmUnKVxuICAgICAgICAgICAgLmF0dHIoJ3kyJywgdGhpcy5oZWlnaHQgLSBuZXd5Mik7XG5cbiAgICAgICAgLy8gbm8gZnVuY2lvbmEgbGEgbGluZWEgaG9yaXpvbnRhbFxuICAgICAgICB0aGlzLmZvY3VzLnNlbGVjdCgnLnktaG92ZXItbGluZScpLmF0dHIoJ3gyJywgLSB0aGlzLmRpc3RhbmNpYXgpO1xuICAgIH1cbiAgICBwdWJsaWMgcmVjYWxjdWxhdGVXaWR0aHMoKSB7XG4gICAgICAgIHRoaXMubW92ZVRvb2xUaXAoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FsY3VsYXRlQmJveCgpOiBET01SZWN0IHtcblxuICAgICAgICB0aGlzLnR4dE5vZGUgPSB0aGlzLnRleHRUb29sVGlwLm5vZGUoKSBhcyBTVkdUZXh0RWxlbWVudDtcbiAgICAgICAgdGhpcy5iYm94ID0gdGhpcy50eHROb2RlLmdldEJCb3goKTtcblxuICAgICAgICBpZiAodGhpcy5iYm94LndpZHRoICsgMTAgPiB0aGlzLmRpc3RhbmNpYXgpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dFRvb2xUaXBcbiAgICAgICAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdzdGFydCcpO1xuICAgICAgICAgICAgdGhpcy5iYm94ID0gdGhpcy50eHROb2RlLmdldEJCb3goKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudGV4dFRvb2xUaXBcbiAgICAgICAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdlbmQnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjb25zb2xlLmxvZygndGhpcy5iYm94IGVuIGNhbGN1bGF0ZUJib3g6ICcsIHRoaXMuYmJveCk7XG4gICAgICAgIHJldHVybiB0aGlzLmJib3g7XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==