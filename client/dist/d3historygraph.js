(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{88:function(t,e,i){"use strict";i.r(e);var s=i(52),a=i(53),r=i(55),h=i(79),n=i(81),c=i(80),l=i(84),o=i(87),m=i(85),p=i(86);var d={date:"%d.%m.%Y",dateTime:"%a %b %e %X %Y",days:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],periods:["AM","PM"],shortDays:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],shortMonths:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],time:"%H:%M:%S"};i.d(e,"GraphLineComponent",function(){return g}),s.timeFormatDefaultLocale(d);class g{constructor(t){this.lineas=t,this.bisectDate=s.bisector(t=>t.timestamp).right,this.bisectValue=s.bisector(t=>t.price).right,this.svgWidth=800,this.svgHeight=300,this.margin={top:30,right:40,bottom:50,left:60},this.width=this.svgWidth-this.margin.left-this.margin.right,this.height=this.svgHeight-this.margin.top-this.margin.bottom,this.originalCircle={cx:-150,cy:-15,r:20},this.chartProps={},this.lineGraphElement=document.getElementById("linechart"),this.titleGraph="",this.ngOnInit()}getLine1(){return new r.a(t=>{this.linea1=this.lineas[0],t.next(this.lineas[0])})}getTitles(){return new r.a(t=>{let e="";this.lineas.forEach(t=>{t.name&&(e=""===e?t.name:e+" / "+t.name)}),this.titleGraph=e,t.next(e)})}ngOnInit(){this.getTitles().pipe(Object(c.a)(t=>this.getLine1()),Object(l.a)(t=>this.defineChart$()),Object(l.a)(t=>Object(h.a)(this.lineas)),Object(c.a)(t=>this.drawLine$(t)),Object(o.a)(1e3),Object(m.a)(t=>this.addToolTips$(t)),Object(m.a)(t=>this.addEventsArea()),Object(p.a)(()=>Object(n.a)("error"))).subscribe(t=>{this.addTitleGraph()})}deleteSvg(){s.select(this.lineGraphElement).remove()}defineChart$(){return new r.a(t=>{this.defineChart(),t.next(!0)})}defineChart(){this.svgViewport=s.select(this.lineGraphElement).append("svg").style("background","white").attr("viewBox",`0 0 ${this.svgWidth} ${this.svgHeight}`),this.chartProps.xScale=s.scaleTime().domain(s.extent(this.linea1.timePriceArray,t=>new Date(t.timestamp).getTime())).range([0,this.width]).clamp(!0),this.chartProps.yScale=s.scaleLinear().domain([0,s.max(this.lineas,t=>1.1*Math.max(...t.timePriceArray.map(t=>t.price)))]).range([this.height,0]).clamp(!0),this.xAxis=s.axisBottom(this.chartProps.xScale),this.yAxis=s.axisLeft(this.chartProps.yScale),this.zoom=s.zoom().scaleExtent([1,1/0]).translateExtent([[0,0],[this.width,this.height]]).extent([[0,0],[this.width,this.height]]).on("zoom",this.zoomFunction.bind(this)),this.innerSpace=this.svgViewport.append("g").attr("class","inner_space").attr("transform","translate("+this.margin.left+","+this.margin.top+")").call(this.zoom.bind(this));const t=s.timeFormat("%d/%m %H:%M");this.gX=this.innerSpace.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+this.height+")").call(this.xAxis.ticks(6).tickFormat(t)),this.gY=this.innerSpace.append("g").attr("class","axis axis--y").call(this.yAxis),this.valueline=s.line().x(t=>{if(t.timestamp instanceof Date)return this.chartProps.xScale(t.timestamp.getTime())}).y(t=>this.chartProps.yScale(t.price))}addEventsArea(){return new r.a(t=>{this.view=this.innerSpace.append("rect").attr("class","zoom").attr("width",this.width).attr("height",this.height).on("mouseover",()=>{this.focus.style("display",null)}).on("mouseout",()=>{this.focus.style("display","none")}).on("mousemove",this.mousemove.bind(this)),t.next(!0)})}drawLine$(t){return new r.a(e=>{this.drawLine(t),e.next(t)})}drawLine(t){t.timePriceArray.forEach(t=>{t.timestamp=a(t.timestamp).toDate()}),this.lineSvg=this.innerSpace.append("path").datum(t.timePriceArray).attr("class","linegraph").style("stroke","black").attr("d",this.valueline.bind(this)(t.timePriceArray))}zoomFunction(){this.newxScale=s.event.transform.rescaleX(this.chartProps.xScale),this.newyScale=s.event.transform.rescaleY(this.chartProps.yScale),this.gX.call(this.xAxis.scale(this.newxScale)),this.gY.call(this.yAxis.scale(this.newyScale)),this.lineSvg.call(this.xAxis.scale(this.newxScale)),this.lineSvg.call(this.yAxis.scale(this.newyScale)),this.d3eventtransform=s.event.transform,console.log("se escala"),this.lineSvg.attr("d",s.line().x(t=>{if(t.timestamp instanceof Date)return this.newxScale(t.timestamp.getTime())}).y(t=>this.newyScale(t.price)))}addTitleGraph(){this.titleSvg=this.innerSpace.append("text").attr("x",this.margin.left).attr("y",260).attr("class","graphic_title_text").attr("text-anchor","left").text(this.titleGraph)}addToolTips$(t){return new r.a(e=>{this.addToolTips(t),e.next(!0)})}addToolTips(t){this.focus=this.innerSpace.append("g").attr("class","this.focus").style("display","none"),this.focus.append("line").attr("class","x-hover-line hover-line").attr("y1",0).attr("y2",this.height).attr("pointer-events","none"),this.focus.append("line").attr("class","y-hover-line hover-line").attr("x1",this.width).attr("x2",this.width).attr("pointer-events","none"),this.focus.append("circle").attr("r",2).attr("pointer-events","none"),this.focus.append("text").attr("x",15).attr("dy",".31em")}mousemove(t,e,i){let r;r=this.newxScale?this.newxScale.invert(s.mouse(i[e])[0]):this.chartProps.xScale.invert(s.mouse(i[e])[0]);const h=this.bisectDate(this.linea1.timePriceArray,r,1),n=this.linea1.timePriceArray[h-1],c=this.linea1.timePriceArray[h],l=r.getTime()-n.timestamp.getTime()>c.timestamp.getTime()-r.getTime()?c:n;this.newxScale?this.focus.attr("transform",`translate(${this.newxScale(new Date(l.timestamp))},${this.newyScale(l.price)})`):this.focus.attr("transform",`translate(${this.chartProps.xScale(new Date(l.timestamp))},${this.chartProps.yScale(l.price)})`);const o=this.focus.select("text").text(()=>`${a(l.timestamp).format("DD/MM HH:mm")}h: ${Math.round(10*l.price)/10}`).node().getBBox();this.focus.selectAll("rect").remove();this.focus.append("rect").attr("x",o.x).attr("y",o.y).attr("width",o.width).attr("height",o.height).style("fill","white").style("fill-opacity",".3").style("stroke","#666").style("stroke-width","1.5px");let m=0;m=this.newyScale?this.newyScale(l.price):this.chartProps.yScale(l.price),this.focus.select(".x-hover-line").attr("y2",this.height-m),this.focus.select(".y-hover-line").attr("x2",this.width+this.width)}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZDMtdGltZWZvcm1hdGRlZmF1bHRsb2NhbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2QzaGlzdG9yeWdyYXBoLnRzIl0sIm5hbWVzIjpbImQzX3RpbWVmb3JtYXRkZWZhdWx0bG9jYWxlIiwiZGF0ZSIsImRhdGVUaW1lIiwiZGF5cyIsIm1vbnRocyIsInBlcmlvZHMiLCJzaG9ydERheXMiLCJzaG9ydE1vbnRocyIsInRpbWUiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZCIsIl9fd2VicGFja19leHBvcnRzX18iLCJkM2hpc3RvcnlncmFwaF9HcmFwaExpbmVDb21wb25lbnQiLCJleHRlcm5hbF9kM18iLCJbb2JqZWN0IE9iamVjdF0iLCJsaW5lYXMiLCJ0aGlzIiwiYmlzZWN0RGF0ZSIsInRpbWVzdGFtcCIsInJpZ2h0IiwiYmlzZWN0VmFsdWUiLCJwcmljZSIsInN2Z1dpZHRoIiwic3ZnSGVpZ2h0IiwibWFyZ2luIiwidG9wIiwiYm90dG9tIiwibGVmdCIsIndpZHRoIiwiaGVpZ2h0Iiwib3JpZ2luYWxDaXJjbGUiLCJjeCIsImN5IiwiciIsImNoYXJ0UHJvcHMiLCJsaW5lR3JhcGhFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInRpdGxlR3JhcGgiLCJuZ09uSW5pdCIsIk9ic2VydmFibGUiLCJvYiIsImxpbmVhMSIsIm5leHQiLCJ0aXRsZXMiLCJmb3JFYWNoIiwibGluZGF0YSIsIm5hbWUiLCJnZXRUaXRsZXMiLCJwaXBlIiwiT2JqZWN0IiwibWVyZ2VNYXAiLCJnZXRMaW5lMSIsInN3aXRjaE1hcCIsImxpbiIsImRlZmluZUNoYXJ0JCIsIm9rIiwiZnJvbSIsImRyYXdMaW5lJCIsImRlbGF5IiwiY29uY2F0TWFwIiwiYWRkVG9vbFRpcHMkIiwiYWRkRXZlbnRzQXJlYSIsImNhdGNoRXJyb3IiLCJvZiIsInN1YnNjcmliZSIsImFkZFRpdGxlR3JhcGgiLCJyZW1vdmUiLCJkZWZpbmVDaGFydCIsInN2Z1ZpZXdwb3J0IiwiYXBwZW5kIiwic3R5bGUiLCJhdHRyIiwieFNjYWxlIiwiZG9tYWluIiwidGltZVByaWNlQXJyYXkiLCJEYXRlIiwiZ2V0VGltZSIsInJhbmdlIiwiY2xhbXAiLCJ5U2NhbGUiLCJNYXRoIiwibWF4IiwibWFwIiwidmFsdWUiLCJ4QXhpcyIsInlBeGlzIiwiem9vbSIsInNjYWxlRXh0ZW50IiwiSW5maW5pdHkiLCJ0cmFuc2xhdGVFeHRlbnQiLCJleHRlbnQiLCJvbiIsInpvb21GdW5jdGlvbiIsImJpbmQiLCJpbm5lclNwYWNlIiwiY2FsbCIsImZvcm1hdEV2ZXJkIiwiZ1giLCJ0aWNrcyIsInRpY2tGb3JtYXQiLCJnWSIsInZhbHVlbGluZSIsIngiLCJ5IiwidmlldyIsImZvY3VzIiwibW91c2Vtb3ZlIiwibGluZSIsImRyYXdMaW5lIiwicG9pbnQiLCJleHRlcm5hbF9tb21lbnRfIiwidG9EYXRlIiwibGluZVN2ZyIsImRhdHVtIiwibmV3eFNjYWxlIiwidHJhbnNmb3JtIiwicmVzY2FsZVgiLCJuZXd5U2NhbGUiLCJyZXNjYWxlWSIsInNjYWxlIiwiZDNldmVudHRyYW5zZm9ybSIsImNvbnNvbGUiLCJsb2ciLCJ0aXRsZVN2ZyIsInRleHQiLCJhZGRUb29sVGlwcyIsImoiLCJub2RlcyIsIngwIiwiaW52ZXJ0IiwiaSIsImQwIiwiZDEiLCJiYm94Iiwic2VsZWN0IiwiZm9ybWF0Iiwicm91bmQiLCJub2RlIiwiZ2V0QkJveCIsInNlbGVjdEFsbCIsIm5ld3kyIl0sIm1hcHBpbmdzIjoib0xBOENlLElBQUFBLEVBNUN1QyxDQUNsREMsS0FBTSxXQUNOQyxTQUFVLGlCQUNWQyxLQUFNLENBQ0osVUFDQSxRQUNBLFNBQ0EsWUFDQSxTQUNBLFVBQ0EsVUFFRkMsT0FBUSxDQUNKLFFBQ0EsVUFDQSxRQUNBLFFBQ0EsT0FDQSxRQUNBLFFBQ0EsU0FDQSxhQUNBLFVBQ0EsWUFDQSxhQUVKQyxRQUFTLENBQUMsS0FBTSxNQUNoQkMsVUFBVyxDQUFDLEtBQU0sS0FBTSxLQUFNLEtBQU0s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LFVBQVUsUUFBUXpFLFNBRWhCbkQsS0FBSzBGLE1BQ2JwQyxPQUFPLFFBQ1BFLEtBQUssSUFBSzhELEVBQUsvQixHQUNmL0IsS0FBSyxJQUFLOEQsRUFBSzlCLEdBQ2ZoQyxLQUFLLFFBQVM4RCxFQUFLMUcsT0FDbkI0QyxLQUFLLFNBQVU4RCxFQUFLekcsUUFDcEIwQyxNQUFNLE9BQVEsU0FDZEEsTUFBTSxlQUFnQixNQUN0QkEsTUFBTSxTQUFVLFFBQ2hCQSxNQUFNLGVBQWdCLFNBRTNCLElBQUlzRSxFQUFRLEVBR1JBLEVBREE3SCxLQUFLc0csVUFDR3RHLEtBQUtzRyxVQUFVNUcsRUFBRVcsT0FFakJMLEtBQUtrQixXQUFXOEMsT0FBT3RFLEVBQUVXLE9BS3JDTCxLQUFLMEYsTUFDQTZCLE9BQU8saUJBQ1AvRCxLQUFLLEtBQU14RCxLQUFLYSxPQUFTZ0gsR0FFOUI3SCxLQUFLMEYsTUFBTTZCLE9BQU8saUJBQWlCL0QsS0FBSyxLQUFNeEQsS0FBS1ksTUFBUVosS0FBS1kiLCJmaWxlIjoiZDNoaXN0b3J5Z3JhcGguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUaW1lTG9jYWxlRGVmaW5pdGlvbiB9IGZyb20gJ2QzJztcblxuY29uc3QgdGltZWZvcm1hdGRlZmF1bHRsb2NhbGU6IFRpbWVMb2NhbGVEZWZpbml0aW9uID0ge1xuICAgIGRhdGU6ICclZC4lbS4lWScsXG4gICAgZGF0ZVRpbWU6ICclYSAlYiAlZSAlWCAlWScsXG4gICAgZGF5czogW1xuICAgICAgJ0RvbWluZ28nLFxuICAgICAgJ0x1bmVzJyxcbiAgICAgICdNYXJ0ZXMnLFxuICAgICAgJ01pw6lyY29sZXMnLFxuICAgICAgJ0p1ZXZlcycsXG4gICAgICAnVmllcm5lcycsXG4gICAgICAnU8OhYmFkbycsXG4gICAgXSxcbiAgICBtb250aHM6IFtcbiAgICAgICAgJ0VuZXJvJyxcbiAgICAgICAgJ0ZlYnJlcm8nLFxuICAgICAgICAnTWFyem8nLFxuICAgICAgICAnQWJyaWwnLFxuICAgICAgICAnTWF5bycsXG4gICAgICAgICdKdW5pbycsXG4gICAgICAgICdKdWxpbycsXG4gICAgICAgICdBZ29zdG8nLFxuICAgICAgICAnU2VwdGllbWJyZScsXG4gICAgICAgICdPY3R1YnJlJyxcbiAgICAgICAgJ05vdmllbWJyZScsXG4gICAgICAgICdEaWNpZW1icmUnLFxuICAgIF0sXG4gICAgcGVyaW9kczogWydBTScsICdQTSddLFxuICAgIHNob3J0RGF5czogWydEbycsICdMdScsICdNYScsICdNaScsICdKdScsICdWaScsICdTYSddLFxuICAgIHNob3J0TW9udGhzOiBbXG4gICAgICAgICdFbmUnLFxuICAgICAgICAnRmViJyxcbiAgICAgICAgJ01hcicsXG4gICAgICAgICdBYnInLFxuICAgICAgICAnTWF5JyxcbiAgICAgICAgJ0p1bicsXG4gICAgICAgICdKdWwnLFxuICAgICAgICAnQWdvJyxcbiAgICAgICAgJ1NlcCcsXG4gICAgICAgICdPY3QnLFxuICAgICAgICAnTm92JyxcbiAgICAgICAgJ0RpYycsXG4gICAgXSxcbiAgICB0aW1lOiAnJUg6JU06JVMnLFxufTtcbmV4cG9ydCBkZWZhdWx0IHRpbWVmb3JtYXRkZWZhdWx0bG9jYWxlO1xuIiwiaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0ICogYXMgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgeyBmcm9tLCBPYnNlcnZhYmxlLCBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciwgY29uY2F0TWFwLCBkZWxheSwgbWVyZ2VNYXAsIHN3aXRjaE1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCBJQ29pbkhpc3RvcnkgZnJvbSAnLi9jb2luLWhpc3RvcnkuaW50ZXJmYWNlJztcbmltcG9ydCB0aW1lRm9ybWF0RGVmYXVsdExvY2FsZSBmcm9tICcuL2QzLXRpbWVmb3JtYXRkZWZhdWx0bG9jYWxlJztcbmltcG9ydCBJVGltZVByaWNlIGZyb20gJy4vdGltZXByaWNlLmludGVyZmFjZSc7XG5cbmQzLnRpbWVGb3JtYXREZWZhdWx0TG9jYWxlKHRpbWVGb3JtYXREZWZhdWx0TG9jYWxlKTtcblxuaW50ZXJmYWNlIElTY2FsZXMge1xuICB4U2NhbGU6IGQzLlNjYWxlVGltZTxudW1iZXIsIG51bWJlcj47XG4gIHlTY2FsZTogZDMuU2NhbGVMaW5lYXI8bnVtYmVyLCBudW1iZXI+O1xufVxuXG5leHBvcnQgY2xhc3MgR3JhcGhMaW5lQ29tcG9uZW50IHtcbiAgICBwdWJsaWMgcGFuWDogYW55O1xuICAgIHB1YmxpYyBwYW5ZOiBhbnk7XG4gICAgcHVibGljIHNjYWxlTXVsdGlwbGllcjogYW55O1xuICAgIC8vIHB1YmxpYyBkM2V2ZW50dHJhbnNmb3JtOiBhbnkgPSB7IGs6IDEsIHg6IDAsIHk6IDAgfTtcbiAgICBwdWJsaWMgZDNldmVudHRyYW5zZm9ybTogYW55O1xuICAgIC8vIHB1YmxpYyBuZXd5U2NhbGU6IGQzLkF4aXNTY2FsZTxudW1iZXIgfCB7IHZhbHVlT2YoKTogbnVtYmVyOyB9PjtcbiAgICAvLyBwdWJsaWMgbmV3eFNjYWxlOiBkMy5BeGlzU2NhbGU8bnVtYmVyIHwgeyB2YWx1ZU9mKCk6IG51bWJlcjsgfT47XG4gICAgcHVibGljIG5ld3lTY2FsZTogYW55O1xuICAgIHB1YmxpYyBuZXd4U2NhbGU6IGFueTtcbiAgICBwdWJsaWMgYmlzZWN0RGF0ZSA9IGQzLmJpc2VjdG9yKChkOiBJVGltZVByaWNlKSA9PiBkLnRpbWVzdGFtcCkucmlnaHQ7XG4gICAgcHVibGljIGJpc2VjdFZhbHVlID0gZDMuYmlzZWN0b3IoKGQ6IElUaW1lUHJpY2UpID0+IGQucHJpY2UpLnJpZ2h0O1xuICAgIHB1YmxpYyBzdmdXaWR0aCA9IDgwMDtcbiAgICBwdWJsaWMgc3ZnSGVpZ2h0ID0gMzAwO1xuICAgIHB1YmxpYyBtYXJnaW4gPSB7IHRvcDogMzAsIHJpZ2h0OiA0MCwgYm90dG9tOiA1MCwgbGVmdDogNjAgfTtcbiAgICBwdWJsaWMgd2lkdGggPSB0aGlzLnN2Z1dpZHRoIC0gdGhpcy5tYXJnaW4ubGVmdCAtIHRoaXMubWFyZ2luLnJpZ2h0O1xuICAgIHB1YmxpYyBoZWlnaHQgPSB0aGlzLnN2Z0hlaWdodCAtIHRoaXMubWFyZ2luLnRvcCAtIHRoaXMubWFyZ2luLmJvdHRvbTtcbiAgICBwdWJsaWMgdmFsdWVsaW5lOiBkMy5MaW5lPElUaW1lUHJpY2U+O1xuICAgIHB1YmxpYyBvcmlnaW5hbENpcmNsZSA9IHtcbiAgICBjeDogLTE1MCxcbiAgICBjeTogLTE1LFxuICAgIHI6IDIwLFxuICAgIH07XG4gICAgcHVibGljIGNoYXJ0UHJvcHMgPSB7fSBhcyBJU2NhbGVzO1xuICAgIHB1YmxpYyBnWDogZDMuU2VsZWN0aW9uPFNWR0dFbGVtZW50LCB7fSwgbnVsbCwgdW5kZWZpbmVkPjtcbiAgICBwdWJsaWMgZ1k6IGQzLlNlbGVjdGlvbjxTVkdHRWxlbWVudCwge30sIG51bGwsIHVuZGVmaW5lZD47XG4gICAgcHVibGljIGRyYXdlZExpbmVzOiBBcnJheTxkMy5TZWxlY3Rpb248U1ZHR0VsZW1lbnQsIHt9LCBudWxsLCB1bmRlZmluZWQ+PjtcbiAgICBwdWJsaWMgbGluZVN2ZzogZDMuU2VsZWN0aW9uPFNWR0dFbGVtZW50LCB7fSwgbnVsbCwgdW5kZWZpbmVkPjtcbiAgICBwdWJsaWMgdmlldzogZDMuU2VsZWN0aW9uPFNWR0dFbGVtZW50LCB7fSwgbnVsbCwgdW5kZWZpbmVkPjtcbiAgICBwdWJsaWMgaW5uZXJTcGFjZTogZDMuU2VsZWN0aW9uPFNWR0dFbGVtZW50LCB7fSwgbnVsbCwgdW5kZWZpbmVkPjtcbiAgICBwdWJsaWMgc3ZnVmlld3BvcnQ6IGQzLlNlbGVjdGlvbjxTVkdHRWxlbWVudCwge30sIG51bGwsIHVuZGVmaW5lZD47XG4gICAgcHVibGljIHRvb2x0aXA6IGQzLlNlbGVjdGlvbjxTVkdHRWxlbWVudCwge30sIG51bGwsIHVuZGVmaW5lZD47XG4gICAgcHVibGljIHRvb2x0aXBUaXRsZTogZDMuU2VsZWN0aW9uPFNWR0dFbGVtZW50LCB7fSwgbnVsbCwgdW5kZWZpbmVkPjtcbiAgICBwdWJsaWMgdG9vbHRpcFRleHQ6IGQzLlNlbGVjdGlvbjxTVkdHRWxlbWVudCwge30sIG51bGwsIHVuZGVmaW5lZD47XG4gICAgcHVibGljIHRpdGxlU3ZnOiBkMy5TZWxlY3Rpb248U1ZHR0VsZW1lbnQsIHt9LCBudWxsLCB1bmRlZmluZWQ+O1xuICAgIHB1YmxpYyBmb2N1czogZDMuU2VsZWN0aW9uPFNWR0dFbGVtZW50LCB7fSwgbnVsbCwgdW5kZWZpbmVkPjtcbiAgICBwdWJsaWMgem9vbTogZDMuWm9vbUJlaGF2aW9yPEVsZW1lbnQsIHt9PjtcbiAgICBwdWJsaWMgeEF4aXM6IGQzLkF4aXM8bnVtYmVyIHwgeyB2YWx1ZU9mKCk6IG51bWJlciB9PjtcbiAgICBwdWJsaWMgeUF4aXM6IGQzLkF4aXM8bnVtYmVyIHwgeyB2YWx1ZU9mKCk6IG51bWJlciB9PjtcbiAgICBwdWJsaWMgbGluZUdyYXBoRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5lY2hhcnQnKTtcbiAgICBwdWJsaWMgbGluZWExOiBJQ29pbkhpc3Rvcnk7XG4gICAgcHVibGljIHRpdGxlR3JhcGggPSAnJztcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGxpbmVhczogSUNvaW5IaXN0b3J5W10sXG4gICAgKSB7XG4gICAgICAgIHRoaXMubmdPbkluaXQoKTtcbiAgICB9XG4gICAgcHVibGljIGdldExpbmUxKCk6IE9ic2VydmFibGU8SUNvaW5IaXN0b3J5PiB7XG4gICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZTxJQ29pbkhpc3Rvcnk+KChvYikgPT4ge1xuICAgICAgICAgICAgdGhpcy5saW5lYTEgPSB0aGlzLmxpbmVhc1swXTtcbiAgICAgICAgICAgIG9iLm5leHQodGhpcy5saW5lYXNbMF0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGl0bGVzKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZTxzdHJpbmc+KChvYikgPT4ge1xuICAgICAgICAgICAgbGV0IHRpdGxlcyA9ICcnO1xuICAgICAgICAgICAgdGhpcy5saW5lYXMuZm9yRWFjaCgobGluZGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKGxpbmRhdGEubmFtZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aXRsZXMgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgdGl0bGVzID0gbGluZGF0YS5uYW1lO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGl0bGVzID0gdGl0bGVzICsgJyAvICcgKyBsaW5kYXRhLm5hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnRpdGxlR3JhcGggPSB0aXRsZXM7XG4gICAgICAgICAgICBvYi5uZXh0KHRpdGxlcyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5nZXRUaXRsZXMoKVxuICAgICAgICAucGlwZShcbiAgICAgICAgbWVyZ2VNYXAoKHRpdGxlcykgPT4gdGhpcy5nZXRMaW5lMSgpKSxcbiAgICAgICAgc3dpdGNoTWFwKChsaW4pID0+IHRoaXMuZGVmaW5lQ2hhcnQkKCkpLFxuICAgICAgICBzd2l0Y2hNYXAoKG9rKSA9PiBmcm9tKHRoaXMubGluZWFzKSksXG4gICAgICAgIG1lcmdlTWFwKChsaW4pID0+IHRoaXMuZHJhd0xpbmUkKGxpbikpLFxuICAgICAgICBkZWxheSgxMDAwKSxcbiAgICAgICAgY29uY2F0TWFwKChsaW4pID0+IHRoaXMuYWRkVG9vbFRpcHMkKGxpbikpLFxuICAgICAgICBjb25jYXRNYXAoKGxpbikgPT4gdGhpcy5hZGRFdmVudHNBcmVhKCkpLFxuICAgICAgICBjYXRjaEVycm9yKCgpID0+IG9mKCdlcnJvcicpKSxcbiAgICAgICAgKVxuICAgICAgICAuc3Vic2NyaWJlKChvaykgPT4ge1xuICAgICAgICB0aGlzLmFkZFRpdGxlR3JhcGgoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHB1YmxpYyBkZWxldGVTdmcoKSB7XG4gICAgICAgIC8vIGQzLnNlbGVjdCh0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudCkuc2VsZWN0KCdzdmcnKS5yZW1vdmUoKTtcbiAgICAgICAgZDMuc2VsZWN0KHRoaXMubGluZUdyYXBoRWxlbWVudCkucmVtb3ZlKCk7XG4gICAgfVxuICAgIHB1YmxpYyBkZWZpbmVDaGFydCQoKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XG4gICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZTxib29sZWFuPigob2IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lQ2hhcnQoKTtcbiAgICAgICAgICAgIG9iLm5leHQodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwdWJsaWMgZGVmaW5lQ2hhcnQoKSB7XG4gICAgICAgIHRoaXMuc3ZnVmlld3BvcnQgPSBkM1xuICAgICAgICAuc2VsZWN0KHRoaXMubGluZUdyYXBoRWxlbWVudClcbiAgICAgICAgLmFwcGVuZCgnc3ZnJylcbiAgICAgICAgLnN0eWxlKCdiYWNrZ3JvdW5kJywgJ3doaXRlJylcbiAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCBgMCAwICR7dGhpcy5zdmdXaWR0aH0gJHt0aGlzLnN2Z0hlaWdodH1gKTtcbiAgICAgICAgdGhpcy5jaGFydFByb3BzLnhTY2FsZSA9IGQzXG4gICAgICAgIC5zY2FsZVRpbWUoKVxuICAgICAgICAuZG9tYWluKGQzLmV4dGVudCh0aGlzLmxpbmVhMS50aW1lUHJpY2VBcnJheSwgKGQpID0+IG5ldyBEYXRlKGQudGltZXN0YW1wKS5nZXRUaW1lKCkpKVxuICAgICAgICAucmFuZ2UoWzAsIHRoaXMud2lkdGhdKVxuICAgICAgICAuY2xhbXAodHJ1ZSk7XG5cbiAgICAgICAgdGhpcy5jaGFydFByb3BzLnlTY2FsZSA9IGQzXG4gICAgICAgIC5zY2FsZUxpbmVhcigpXG4gICAgICAgIC5kb21haW4oW1xuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIGQzLm1heChcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVhcyxcbiAgICAgICAgICAgICAgICAoZCkgPT4gTWF0aC5tYXgoLi4uZC50aW1lUHJpY2VBcnJheS5tYXAoKHZhbHVlKSA9PiB2YWx1ZS5wcmljZSkpICogMS4xLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgXSlcbiAgICAgICAgLnJhbmdlKFt0aGlzLmhlaWdodCwgMF0pXG4gICAgICAgIC5jbGFtcCh0cnVlKTtcblxuICAgICAgICB0aGlzLnhBeGlzID0gZDMuYXhpc0JvdHRvbSh0aGlzLmNoYXJ0UHJvcHMueFNjYWxlKTtcbiAgICAgICAgdGhpcy55QXhpcyA9IGQzLmF4aXNMZWZ0KHRoaXMuY2hhcnRQcm9wcy55U2NhbGUpO1xuICAgICAgICB0aGlzLnpvb20gPSBkMy56b29tKClcbiAgICAgICAgLnNjYWxlRXh0ZW50KFsxLCBJbmZpbml0eV0pXG4gICAgICAgIC50cmFuc2xhdGVFeHRlbnQoW1swLCAwXSwgW3RoaXMud2lkdGgsIHRoaXMuaGVpZ2h0XV0pXG4gICAgICAgIC5leHRlbnQoW1swLCAwXSwgW3RoaXMud2lkdGgsIHRoaXMuaGVpZ2h0XV0pXG4gICAgICAgIC5vbignem9vbScsIHRoaXMuem9vbUZ1bmN0aW9uLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmlubmVyU3BhY2UgPSB0aGlzLnN2Z1ZpZXdwb3J0XG4gICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAnaW5uZXJfc3BhY2UnKVxuICAgICAgICAuYXR0cihcbiAgICAgICAgJ3RyYW5zZm9ybScsXG4gICAgICAgICd0cmFuc2xhdGUoJyArIHRoaXMubWFyZ2luLmxlZnQgKyAnLCcgKyB0aGlzLm1hcmdpbi50b3AgKyAnKScsXG4gICAgICAgIClcbiAgICAgICAgLmNhbGwodGhpcy56b29tLmJpbmQodGhpcykpO1xuICAgICAgICBjb25zdCBmb3JtYXRFdmVyZCA9IGQzLnRpbWVGb3JtYXQoJyVkLyVtICVIOiVNJyk7XG4gICAgICAgIHRoaXMuZ1ggPSB0aGlzLmlubmVyU3BhY2VcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2F4aXMgYXhpcy0teCcpXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCcgKyB0aGlzLmhlaWdodCArICcpJylcbiAgICAgICAgICAgIC5jYWxsKHRoaXMueEF4aXMudGlja3MoNikudGlja0Zvcm1hdChmb3JtYXRFdmVyZCkpO1xuXG4gICAgICAgIHRoaXMuZ1kgPSB0aGlzLmlubmVyU3BhY2VcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2F4aXMgYXhpcy0teScpXG4gICAgICAgICAgICAuY2FsbCh0aGlzLnlBeGlzKTtcbiAgICAgICAgdGhpcy52YWx1ZWxpbmUgPSBkM1xuICAgICAgICAgICAgLmxpbmU8SVRpbWVQcmljZT4oKVxuICAgICAgICAgICAgLngoKGQpID0+IHtcbiAgICAgICAgICAgIGlmIChkLnRpbWVzdGFtcCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZC5kYXRlOiAnLCBkLmRhdGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYXJ0UHJvcHMueFNjYWxlKGQudGltZXN0YW1wLmdldFRpbWUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnkoKGQpID0+IHRoaXMuY2hhcnRQcm9wcy55U2NhbGUoZC5wcmljZSkpO1xuICAgIH1cbiAgICBwdWJsaWMgYWRkRXZlbnRzQXJlYSgpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlPGJvb2xlYW4+KChvYikgPT4ge1xuICAgICAgICAgICAgdGhpcy52aWV3ID0gdGhpcy5pbm5lclNwYWNlXG4gICAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd6b29tJylcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHRoaXMud2lkdGgpXG4gICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgdGhpcy5oZWlnaHQpXG4gICAgICAgICAgICAub24oJ21vdXNlb3ZlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzLnN0eWxlKCdkaXNwbGF5JywgbnVsbCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdtb3VzZW91dCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub24oJ21vdXNlbW92ZScsIHRoaXMubW91c2Vtb3ZlLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgb2IubmV4dCh0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHB1YmxpYyBkcmF3TGluZSQobGluZTogSUNvaW5IaXN0b3J5KSB7XG4gICAgICByZXR1cm4gbmV3IE9ic2VydmFibGU8SUNvaW5IaXN0b3J5Pigob2IpID0+IHtcbiAgICAgICAgICB0aGlzLmRyYXdMaW5lKGxpbmUpO1xuICAgICAgICAgIG9iLm5leHQobGluZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcHVibGljIGRyYXdMaW5lKGxpbmU6IElDb2luSGlzdG9yeSkge1xuICAgICAgICBsaW5lLnRpbWVQcmljZUFycmF5LmZvckVhY2goKHBvaW50KSA9PiB7XG4gICAgICAgICAgICBwb2ludC50aW1lc3RhbXAgPSBtb21lbnQocG9pbnQudGltZXN0YW1wKS50b0RhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGluZVN2ZyA9IHRoaXMuaW5uZXJTcGFjZVxuICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXG4gICAgICAgICAgICAuZGF0dW0obGluZS50aW1lUHJpY2VBcnJheSlcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lZ3JhcGgnKVxuICAgICAgICAgICAgLy8gLnN0eWxlKCdzdHJva2UnLCBjb2xvcl9jb2RlKSAvLyBhw7FhZGlyIGFxdcOtIGVsIGNvbG9yIHF1ZSB2aWVuZSBkZSBsb3MgZGF0b3MgZGUgbGEgbGluZWFcbiAgICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgJ2JsYWNrJylcbiAgICAgICAgICAgIC5hdHRyKCdkJywgdGhpcy52YWx1ZWxpbmUuYmluZCh0aGlzKShsaW5lLnRpbWVQcmljZUFycmF5KSk7XG4gICAgfVxuICAgIHB1YmxpYyB6b29tRnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMubmV3eFNjYWxlID0gZDMuZXZlbnQudHJhbnNmb3JtLnJlc2NhbGVYKHRoaXMuY2hhcnRQcm9wcy54U2NhbGUpO1xuICAgICAgICB0aGlzLm5ld3lTY2FsZSA9IGQzLmV2ZW50LnRyYW5zZm9ybS5yZXNjYWxlWSh0aGlzLmNoYXJ0UHJvcHMueVNjYWxlKTtcbiAgICAgICAgLy8gdXBkYXRlIGF4ZXNcbiAgICAgICAgdGhpcy5nWC5jYWxsKHRoaXMueEF4aXMuc2NhbGUodGhpcy5uZXd4U2NhbGUpKTtcbiAgICAgICAgdGhpcy5nWS5jYWxsKHRoaXMueUF4aXMuc2NhbGUodGhpcy5uZXd5U2NhbGUpKTtcbiAgICAgICAgdGhpcy5saW5lU3ZnLmNhbGwodGhpcy54QXhpcy5zY2FsZSh0aGlzLm5ld3hTY2FsZSkpO1xuICAgICAgICB0aGlzLmxpbmVTdmcuY2FsbCh0aGlzLnlBeGlzLnNjYWxlKHRoaXMubmV3eVNjYWxlKSk7XG5cbiAgICAgICAgdGhpcy5kM2V2ZW50dHJhbnNmb3JtID0gZDMuZXZlbnQudHJhbnNmb3JtO1xuICAgICAgICAvLyB0aGlzLmxpbmVTdmcuYXR0cigndHJhbnNmb3JtJywgdGhpcy5kM2V2ZW50dHJhbnNmb3JtKTtcblxuICAgICAgICAvLyB0aGlzLmNoYXJ0UHJvcHMueFNjYWxlLmRvbWFpbihuZXdEb21haW5YKTtcbiAgICAgICAgLy8gdGhpcy5jaGFydFByb3BzLnlTY2FsZS5kb21haW4oZDMuZXZlbnQudHJhbnNmb3JtLnJlc2NhbGVZKHRoaXMuY2hhcnRQcm9wcy55U2NhbGUuZG9tYWluKCkpKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3NlIGVzY2FsYScpO1xuICAgICAgICB0aGlzLmxpbmVTdmdcbiAgICAgICAgLmF0dHIoJ2QnLCBkM1xuICAgICAgICAubGluZTxJVGltZVByaWNlPigpXG4gICAgICAgIC54KChkKSA9PiB7XG4gICAgICAgIGlmIChkLnRpbWVzdGFtcCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdkLmRhdGU6ICcsIGQuZGF0ZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5uZXd4U2NhbGUoZC50aW1lc3RhbXAuZ2V0VGltZSgpKTtcbiAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAueSgoZCkgPT4gdGhpcy5uZXd5U2NhbGUoZC5wcmljZSkpKTtcblxuICAgIH1cblxuICAgIC8vIGNyZWFtb3MgbGFzIGZ1bmNpb25lcyBxdWUgY3JlYW4gbG9zIGNpcmN1bG9zIHkgbG9zIHRvb2x0aXBzXG5cbiAgICBwdWJsaWMgYWRkVGl0bGVHcmFwaCgpIHtcbiAgICAgIC8vIGVzdGUgZXMgZWwgdMOtdHVsbyBxdWUgZGViZXLDrWEgYXBhcmVjZXIgZGViYWpvIGRlIGxhIGdyw6FmaWNhXG4gICAgICAvLyBjb3JyZWdpbW9zIGVsIG1hcmdlbiB0b3BcbiAgICAgIC8vIGNvbnN0IGRpc3RUZXh0VG9wID0gdGhpcy5oZWlnaHQgKyB0aGlzLm1hcmdpbi50b3A7XG4gICAgICBjb25zdCBkaXN0VGV4dFRvcCA9IDI2MDtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdkaXN0VGV4dFRvcDogJywgZGlzdFRleHRUb3ApO1xuICAgICAgdGhpcy50aXRsZVN2ZyA9IHRoaXMuaW5uZXJTcGFjZVxuICAgICAgLmFwcGVuZCgndGV4dCcpXG4gICAgICAuYXR0cigneCcsIHRoaXMubWFyZ2luLmxlZnQpXG4gICAgICAvLyAuYXR0cigneScsIDAgLSB0aGlzLm1hcmdpbi50b3AgLyA0KVxuICAgICAgLmF0dHIoJ3knLCBkaXN0VGV4dFRvcClcbiAgICAgIC5hdHRyKCdjbGFzcycsICdncmFwaGljX3RpdGxlX3RleHQnKVxuICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ2xlZnQnKVxuICAgICAgLnRleHQodGhpcy50aXRsZUdyYXBoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkVG9vbFRpcHMkKGxpbmU6IElDb2luSGlzdG9yeSk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZTxib29sZWFuPigob2IpID0+IHtcbiAgICAgICAgdGhpcy5hZGRUb29sVGlwcyhsaW5lKTtcbiAgICAgICAgb2IubmV4dCh0cnVlKTtcbiAgICB9KTtcbiAgICB9XG4gICAgcHVibGljIGFkZFRvb2xUaXBzKGxpbmU6IElDb2luSGlzdG9yeSkge1xuICAgICAgICAvLyBhY3RpdmFtb3MgZWwgZXZlbnRvIFwibW91c2VvdmVyXCIgcGFyYSBsYSBsaW5lYSBkZWwgYXJndW1lbnRvXG4gICAgICAgIC8vIHNlIGl0ZXJhIHBhcmEgY2FkYSBwdW50byBkZSBsYSBsw61uZWFcbiAgICAgICAgLy8gdXNhbmRvIGxhIHNlbGVjY2lvbiBkZSBjaXJjdWxvcyBkaWJ1amFkb3MgZW4gY2FkYSBwdW50b1xuICAgICAgICAvLyBubyBlc3TDoSBjbGFybyBjb21vIHNlIGl0ZXJhIHNpbiB1c2FyIGxhIHZhcmlhYmxlIGlcbiAgICAgICAgLy8gZm9yIChsZXQgaSBvZiBsaW5lLnRpbWVQcmljZUFycmF5KSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzID0gdGhpcy5pbm5lclNwYWNlXG4gICAgICAgICAgICAuYXBwZW5kKCdnJylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd0aGlzLmZvY3VzJylcbiAgICAgICAgICAgIC5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG5cbiAgICAgICAgICAgIHRoaXMuZm9jdXNcbiAgICAgICAgICAgIC5hcHBlbmQoJ2xpbmUnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3gtaG92ZXItbGluZSBob3Zlci1saW5lJylcbiAgICAgICAgICAgIC5hdHRyKCd5MScsIDApXG4gICAgICAgICAgICAuYXR0cigneTInLCB0aGlzLmhlaWdodClcbiAgICAgICAgICAgIC5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XG5cbiAgICAgICAgICAgIHRoaXMuZm9jdXNcbiAgICAgICAgICAgIC5hcHBlbmQoJ2xpbmUnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3ktaG92ZXItbGluZSBob3Zlci1saW5lJylcbiAgICAgICAgICAgIC5hdHRyKCd4MScsIHRoaXMud2lkdGgpXG4gICAgICAgICAgICAuYXR0cigneDInLCB0aGlzLndpZHRoKVxuICAgICAgICAgICAgLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcblxuICAgICAgICAgICAgdGhpcy5mb2N1c1xuICAgICAgICAgICAgLmFwcGVuZCgnY2lyY2xlJylcbiAgICAgICAgICAgIC5hdHRyKCdyJywgMilcbiAgICAgICAgICAgIC5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XG5cbiAgICAgICAgICAgIHRoaXMuZm9jdXNcbiAgICAgICAgICAgIC5hcHBlbmQoJ3RleHQnKVxuICAgICAgICAgICAgLmF0dHIoJ3gnLCAxNSlcbiAgICAgICAgICAgIC5hdHRyKCdkeScsICcuMzFlbScpO1xuICAgICAgICAvLyB9XG4gICAgfVxuXG4gICAgcHVibGljIG1vdXNlbW92ZShkYXR1bTogYW55LCBqOiBhbnksIG5vZGVzOiBhbnkpIHtcbiAgICAgICAgbGV0IHgwO1xuICAgICAgICBpZiAodGhpcy5uZXd4U2NhbGUpIHtcbiAgICAgICAgICAgIHgwID0gdGhpcy5uZXd4U2NhbGUuaW52ZXJ0KGQzLm1vdXNlKG5vZGVzW2pdKVswXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB4MCA9IHRoaXMuY2hhcnRQcm9wcy54U2NhbGUuaW52ZXJ0KGQzLm1vdXNlKG5vZGVzW2pdKVswXSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaSA9IHRoaXMuYmlzZWN0RGF0ZSh0aGlzLmxpbmVhMS50aW1lUHJpY2VBcnJheSwgeDAsIDEpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnaTogJywgaSk7XG5cbiAgICAgICAgY29uc3QgZDAgPSB0aGlzLmxpbmVhMS50aW1lUHJpY2VBcnJheVtpIC0gMV07XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdkMDogJywgZDApO1xuXG4gICAgICAgIGNvbnN0IGQxID0gdGhpcy5saW5lYTEudGltZVByaWNlQXJyYXlbaV07XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdkMTogJywgZDEpO1xuXG4gICAgICAgIGNvbnN0IGQgPVxuICAgICAgICAgICAgeDAuZ2V0VGltZSgpIC0gKGQwLnRpbWVzdGFtcCBhcyBEYXRlKS5nZXRUaW1lKCkgPlxuICAgICAgICAgICAgKGQxLnRpbWVzdGFtcCBhcyBEYXRlKS5nZXRUaW1lKCkgLSB4MC5nZXRUaW1lKClcbiAgICAgICAgICAgID8gZDFcbiAgICAgICAgICAgIDogZDA7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdkOiAnLCBkKTtcbiAgICAgICAgaWYgKHRoaXMubmV3eFNjYWxlKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzXG4gICAgICAgICAgICAuYXR0cihcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJyxcbiAgICAgICAgICAgICAgICBgdHJhbnNsYXRlKCR7dGhpcy5uZXd4U2NhbGUoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKGQudGltZXN0YW1wKSxcbiAgICAgICAgICAgICAgICApfSwke3RoaXMubmV3eVNjYWxlKGQucHJpY2UpfSlgKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5mb2N1c1xuICAgICAgICAgICAgLmF0dHIoXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybScsXG4gICAgICAgICAgICAgICAgYHRyYW5zbGF0ZSgke3RoaXMuY2hhcnRQcm9wcy54U2NhbGUoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKGQudGltZXN0YW1wKSxcbiAgICAgICAgICAgICAgICApfSwke3RoaXMuY2hhcnRQcm9wcy55U2NhbGUoZC5wcmljZSl9KWApO1xuXG4gICAgICAgIH1cblxuICAgICAgICAvKiBpZiAodGhpcy5kM2V2ZW50dHJhbnNmb3JtKSB7XG4gICAgICAgICAgdGhpcy5mb2N1cy5hdHRyKFxuICAgICAgICAgICAgJ3RyYW5zZm9ybScsXG4gICAgICAgICAgICB0aGlzLmQzZXZlbnR0cmFuc2Zvcm1cbiAgICAgICAgICApXG4gICAgICAgIH0gKi9cbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jaGFydFByb3BzLnhTY2FsZShuZXcgRGF0ZShkLmRhdGUpKSk7XG5cbiAgICAgICAgY29uc3QgdGV4dDogYW55ID0gdGhpcy5mb2N1c1xuICAgICAgICAgICAgLnNlbGVjdCgndGV4dCcpXG4gICAgICAgICAgICAudGV4dChcbiAgICAgICAgICAgICgpID0+XG4gICAgICAgICAgICAgICAgYCR7bW9tZW50KGQudGltZXN0YW1wKS5mb3JtYXQoJ0REL01NIEhIOm1tJyl9aDogJHtNYXRoLnJvdW5kKFxuICAgICAgICAgICAgICAgIGQucHJpY2UgKiAxMCxcbiAgICAgICAgICAgICAgICApIC8gMTB9YCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgYmJveCA9IHRleHQubm9kZSgpLmdldEJCb3goKTtcblxuICAgICAgICB0aGlzLmZvY3VzLnNlbGVjdEFsbCgncmVjdCcpLnJlbW92ZSgpO1xuXG4gICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmZvY3VzXG4gICAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgICAgIC5hdHRyKCd4JywgYmJveC54KVxuICAgICAgICAgICAgLmF0dHIoJ3knLCBiYm94LnkpXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCBiYm94LndpZHRoKVxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGJib3guaGVpZ2h0KVxuICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgJ3doaXRlJylcbiAgICAgICAgICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JywgJy4zJylcbiAgICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgJyM2NjYnKVxuICAgICAgICAgICAgLnN0eWxlKCdzdHJva2Utd2lkdGgnLCAnMS41cHgnKTtcblxuICAgICAgICBsZXQgbmV3eTIgPSAwO1xuXG4gICAgICAgIGlmICh0aGlzLm5ld3lTY2FsZSkge1xuICAgICAgICAgICAgbmV3eTIgPSB0aGlzLm5ld3lTY2FsZShkLnByaWNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld3kyID0gdGhpcy5jaGFydFByb3BzLnlTY2FsZShkLnByaWNlKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZXNjYWxvIGxhIHBvc2ljaW9uIHkyIGRlIGxhIGzDrW5lYSBzZWfDum4gbGEgbnVldmEgZXNjYWxhIHNpIHNlIGhhIGhlY2hvIHpvb21cbiAgICAgICAgdGhpcy5mb2N1c1xuICAgICAgICAgICAgLnNlbGVjdCgnLngtaG92ZXItbGluZScpXG4gICAgICAgICAgICAuYXR0cigneTInLCB0aGlzLmhlaWdodCAtIG5ld3kyKTtcblxuICAgICAgICB0aGlzLmZvY3VzLnNlbGVjdCgnLnktaG92ZXItbGluZScpLmF0dHIoJ3gyJywgdGhpcy53aWR0aCArIHRoaXMud2lkdGgpO1xuXG4gICAgICAgIC8vIGlmICh0aGlzLmQzZXZlbnR0cmFuc2Zvcm0pIHtcbiAgICAgICAgLy8gICAgIHRoaXMudmlldy5hdHRyKCd0cmFuc2Zvcm0nLCB0aGlzLmQzZXZlbnR0cmFuc2Zvcm0pO1xuICAgICAgICAvLyB9XG5cbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9